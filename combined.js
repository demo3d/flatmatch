function Apartment(a,c,d,l,m){this.yawShift=l;this.heightOffset=m;this.textures=[];this.layoutId=a;this.scale=c;this.startingPos=d.startingPosition;this.startingPos[2]=0;a=d.geometry;d=d.box;void 0==d&&(d=[]);this.repositionGeometry(a,d);this.buildGlGeometry(a,d)}
Apartment.prototype.render=function(a,c,d){if(this.vertices&&Shaders.ready){gl.clear(gl.DEPTH_BUFFER_BIT);var l=mat4.create();mat4.mul(l,c,a);gl.useProgram(Shaders.shadow);glu.enableVertexAttribArrays(Shaders.shadow);gl.uniformMatrix4fv(Shaders.shadow.locations.modelViewProjectionMatrix,!1,l);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertices);gl.vertexAttribPointer(Shaders.shadow.locations.vertexPosition,3,gl.FLOAT,!1,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,this.texCoords);gl.vertexAttribPointer(Shaders.shadow.locations.vertexTexCoords,
2,gl.FLOAT,!1,0,0);glu.performShadowMapping&&(gl.uniformMatrix4fv(Shaders.shadow.locations.shadowMatrix,!1,d),a=norm3(mapSun.getPosition()),gl.uniform3fv(Shaders.shadow.locations.sunDir,a),gl.uniform1i(Shaders.shadow.locations.tex,0),gl.uniform1i(Shaders.shadow.locations.shadowTex,1),gl.bindBuffer(gl.ARRAY_BUFFER,this.normals),gl.vertexAttribPointer(Shaders.shadow.locations.normalIn,3,gl.FLOAT,!1,0,0),gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,Shadows.colorTexture));for(a=0;a<this.numVertices;a+=
6)gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,this.textures[a/6]),gl.drawArrays(gl.TRIANGLES,a,6);glu.disableVertexAttribArrays(Shaders.shadow);gl.useProgram(Shaders.flat);glu.enableVertexAttribArrays(Shaders.flat);gl.bindBuffer(gl.ARRAY_BUFFER,this.boxVertices);gl.vertexAttribPointer(Shaders.flat.locations.vertexPosition,3,gl.FLOAT,!1,0,0);gl.uniformMatrix4fv(Shaders.flat.locations.modelViewProjectionMatrix,!1,l);gl.uniform4fv(Shaders.flat.locations.color,[.5,.5,.55,1]);gl.drawArrays(gl.TRIANGLES,
0,this.numBoxVertices);glu.disableVertexAttribArrays(Shaders.shadow)}};
Apartment.prototype.renderDepth=function(a,c){if(this.vertices&&Shaders.ready){gl.disable(gl.CULL_FACE);var d=mat4.create();mat4.mul(d,c,a);gl.useProgram(Shaders.depth);glu.enableVertexAttribArrays(Shaders.depth);gl.uniformMatrix4fv(Shaders.depth.locations.modelViewProjectionMatrix,!1,d);gl.uniform3fv(Shaders.depth.locations.lightPos,mapSun.getPosition());gl.bindBuffer(gl.ARRAY_BUFFER,this.vertices);gl.vertexAttribPointer(Shaders.depth.locations.vertexPos,3,gl.FLOAT,!1,0,0);gl.drawArrays(gl.TRIANGLES,
0,this.numVertices);gl.bindBuffer(gl.ARRAY_BUFFER,this.boxVertices);gl.vertexAttribPointer(Shaders.depth.locations.vertexPos,3,gl.FLOAT,!1,0,0);gl.drawArrays(gl.TRIANGLES,0,this.numBoxVertices);glu.disableVertexAttribArrays(Shaders.depth);gl.enable(gl.CULL_FACE)}};
Apartment.getTrianglesVertices=function(a){var c=a.pos,d=[a.width[0],a.width[1],a.width[2]],d=[c[0]+d[0],c[1]+d[1],c[2]+d[2]],l=[a.height[0],a.height[1],a.height[2]],m=[d[0]+l[0],d[1]+l[1],d[2]+l[2]],l=[c[0]+l[0],c[1]+l[1],c[2]+l[2]],n=norm3(a.width);a=norm3(a.height);var b=1/(1<<glu.vertexShaderMediumFloatPrecision-9),n=mul3scalar(n,b);a=mul3scalar(a,b);c=[c[0]-n[0]-a[0],c[1]-n[1]-a[1],c[2]-n[2]-a[2]];d=[d[0]+n[0]-a[0],d[1]+n[1]-a[1],d[2]+n[2]-a[2]];m=[m[0]+n[0]+a[0],m[1]+n[1]+a[1],m[2]+n[2]+a[2]];
l=[l[0]-n[0]+a[0],l[1]-n[1]+a[1],l[2]-n[2]+a[2]];return[c,d,m,c,m,l]};Apartment.loadImage=function(a,c,d){var l=new Image;l.id=c;l.onload=function(){glu.updateTexture(a.textures[l.id],l);if(Controller.onRequestFrameRender)Controller.onRequestFrameRender()};l.src="data:image/png;base64,"+d};Apartment.prototype.updateTextures=function(a){a=JSON.parse(a);for(var c=0;c<this.numVertices/6;c++)a[c]&&Apartment.loadImage(this,c,a[c])};
Apartment.prototype.buildGlGeometry=function(a,c){var d=[],l=[],m=[],n;for(n in a){var b=Apartment.getTrianglesVertices(a[n]);[].push.apply(d,[].concat.apply([],b));var e=[].concat([0,0],[1,0],[1,1],[0,0],[1,1],[0,1]);[].push.apply(l,e);b=getNormal(b[0],b[1],b[2]);[].push.apply(m,[].concat(b,b,b,b,b,b))}this.numVertices=d.length/3|0;this.vertices=glu.createArrayBuffer(d);this.texCoords=glu.createArrayBuffer(l);this.normals=glu.createArrayBuffer(m);for(n=0;n<this.numVertices/6;n++)d=Math.floor(256*
Math.random()),d=new Uint8Array([d,d,d]),this.textures[n]=glu.createTextureFromBytes(d);d=[];for(n in c)b=Apartment.getTrianglesVertices(c[n]),[].push.apply(d,[].concat.apply([],b));this.numBoxVertices=d.length/3|0;this.boxVertices=glu.createArrayBuffer(d)};
function getAABB(a,c){if(1>a.length)return c;if(c)var d=c.min_x,l=c.max_x,m=c.min_y,n=c.max_y;else d=a[0].pos[0],l=a[0].pos[0],m=a[0].pos[1],n=a[0].pos[1];for(var b in a)var l=Math.max(l,a[b].pos[0]),d=Math.min(d,a[b].pos[0]),n=Math.max(n,a[b].pos[1]),m=Math.min(m,a[b].pos[1]),e=a[b].pos[0]+a[b].width[0],g=a[b].pos[1]+a[b].width[1],l=Math.max(l,e),d=Math.min(d,e),n=Math.max(n,g),m=Math.min(m,g);return{min_x:d,max_x:l,min_y:m,max_y:n}}
Apartment.prototype.repositionGeometry=function(a,c){var d=getAABB(a),d=getAABB(c,d),l=(d.max_x+d.min_x)/2,d=(d.max_y+d.min_y)/2;this.pixelShift=[l,d];Apartment.moveBy(a,-l,-d,this.heightOffset);Apartment.moveBy(c,-l,-d,this.heightOffset);this.startingPos[0]-=l;this.startingPos[1]-=d;Apartment.rotateBy(a,this.yawShift);Apartment.rotateBy(c,this.yawShift);rotate(this.startingPos,this.yawShift);this.startingPos[1]=-this.startingPos[1]};
Apartment.rotateBy=function(a,c){for(var d in a)rotate(a[d].pos,c),rotate(a[d].width,c),rotate(a[d].height,c)};Apartment.moveBy=function(a,c,d,l){for(var m in a)a[m].pos[0]+=c,a[m].pos[1]+=d,a[m].pos[2]+=l};Apartment.prototype.localToPixelCoordinates=function(a){if(!mapApartment.pixelShift||void 0===mapApartment.yawShift)return[0,0];var c=[];c[0]=a.x;c[1]=-a.y;rotate(c,-mapApartment.yawShift);c=add2(c,mapApartment.pixelShift);c[0]*=mapApartment.scale;c[1]*=mapApartment.scale;return c};
Apartment.prototype.pixelToLocalCoordinates=function(a){if(!mapApartment.pixelShift||void 0===mapApartment.yawShift)return[0,0];a[0]/=mapApartment.scale;a[1]/=mapApartment.scale;a=sub2(a,mapApartment.pixelShift);rotate(a,mapApartment.yawShift);return{x:a[0],y:-a[1]}};var ApartmentMap=function(){function a(a){var c=Math.min(l.width/n.width,l.height/n.height),d=l.getBoundingClientRect(),p=(a.clientX-d.left)/c;a=(a.clientY-d.top)/c;b&&b(p,a)}function c(a,b){if(l&&n){var c=n.width/n.height,d,u;a/b>c?(u=b,d=b*c):(d=a,u=a/c);m.style.width=d+"px";m.style.height=u+"px";l.height=l.clientHeight;l.width=l.clientWidth;scheduleFrameRendering()}}var d,l,m,n,b;return{init:function(b,g,k){l=g;m=b;n=new Image;n.onload=function(){d=null;c();scheduleFrameRendering()};n.src=k;l.removeEventListener("click",
a);l.addEventListener("click",a);c()},render:function(a){if(n){l.context2d||(l.context2d=l.getContext("2d"));var b=l.context2d,c=Math.min(l.width/n.width,l.height/n.height);var p=l.width,m=l.height;if(!d||d.width!=p||d.height!=m)if(0==p*m)d=null;else{d=document.createElement("canvas");d.width=p;d.height=m;var q=d.getContext("2d");q.fillStyle="#fff";q.fillRect(0,0,p,m);p=Math.min(l.width/n.width,l.height/n.height);q.globalAlpha=.5;q.drawImage(n,0,0,n.width*p,n.height*p);q.globalAlpha=1}d&&b.drawImage(d,
0,0);a[0]*=c;a[1]*=c;c=l.width/60;b.lineWidth=2;b.strokeStyle="#44D";b.beginPath();b.arc(a[0],a[1],c,0,2*Math.PI);b.stroke();q=Controller.viewAngleYaw-mapApartment.yawShift;q=q/180*Math.PI;q=[Math.sin(q),Math.cos(q)];b.strokeStyle="#D44";b.beginPath();b.moveTo(a[0],a[1]);b.lineTo(a[0]+2*c*q[0],a[1]-2*c*q[1]);b.stroke()}},resize:c,addEventListener:function(a,c){"click"==a&&(b=c)}}}();function fail(a){console.log(a)}function frac(a){return a-(a|0)}function nextInteger(a,c){return a==(a|0)?a+(0>c?-1:1):0>c?a|0:(a|0)+1}
var CollisionHandling={map:null,init:function(a,c,d){CollisionHandling.width=a;CollisionHandling.height=c;CollisionHandling.buffer=new ArrayBuffer(a*c);CollisionHandling.data=new Uint8Array(CollisionHandling.buffer);c=a=0;for(var l in d){for(var m=d[l];0<m;)CollisionHandling.data[a]=c,a+=1,m-=1;c=!c}},toDataUrl:function(){var a=document.createElement("CANVAS");a.width=CollisionHandling.width;a.height=CollisionHandling.height;for(var c=a.getContext("2d"),d=c.getImageData(0,0,CollisionHandling.width,
CollisionHandling.height),l=0;l<CollisionHandling.width*CollisionHandling.height;l++){var m=CollisionHandling.data[l]?255:0;d.data[4*l+0]=m;d.data[4*l+1]=m;d.data[4*l+2]=m;d.data[4*l+3]=255}c.putImageData(d,0,0);return a.toDataURL()},canGoHorizontal:function(a,c,d){if(1!=Math.abs(d))return fail("Invalid direction parameter");if(0!=frac(a))return!0;a=0<d?a:a-1;return 0!=frac(c)?CollisionHandling.moveAllowed(a|0,c|0):CollisionHandling.moveAllowed(a|0,c|0)||CollisionHandling.moveAllowed(a|0,c-1|0)},
canGoVertical:function(a,c,d){if(1!=Math.abs(d))return fail("Invalid direction parameter");if(0!=frac(c))return!0;c=0<d?c:c-1;return 0!=frac(a)?CollisionHandling.moveAllowed(a|0,c|0):CollisionHandling.moveAllowed(a|0,c|0)||CollisionHandling.moveAllowed(a-1|0,c|0)},adjustMovement:function(a,c){a[0]=Math.round(1E4*a[0])/1E4;a[1]=Math.round(1E4*a[1])/1E4;c[0]=Math.round(1E4*c[0])/1E4;c[1]=Math.round(1E4*c[1])/1E4;var d=[c[0]-a[0],c[1]-a[1]],l=[a[0]<c[0]?1:-1,a[1]<c[1]?1:-1],m=Math.sqrt(dot2(d,d));if(0==
m)return c;for(var d=norm2(d),n=[a[0],a[1]];0<m;){var b=CollisionHandling.canGoHorizontal(n[0],n[1],l[0]),e=CollisionHandling.canGoVertical(n[0],n[1],l[1]);if(!b&&!e)break;var b=[b?d[0]:0,e?d[1]:0],e=nextInteger(n[0],l[0]),g=nextInteger(n[1],l[1]),k=(e-n[0])/b[0],p=(g-n[1])/b[1];-Infinity==k&&(k=Infinity);-Infinity==p&&(p=Infinity);if(0>k||0>p)return fail("Invalid movement direction");var u=Math.min(k,p);if(Infinity==u)break;if(0==u)return fail("Invalid movement distance");if(u<m)m-=u,n[0]=u==k?e:
n[0]+u*b[0],n[1]=u==p?g:n[1]+u*b[1];else return[n[0]+m*b[0],n[1]+m*b[1]]}return n},moveAllowed:function(a,c){return!!CollisionHandling.data[(c|0)*CollisionHandling.width+(a|0)]}};function Buildings(a,c){this.numEdgeVertices=this.numVertices=0;if(a){this.mapCenter=c;this.geometry=[];this.numTilesLoaded=0;this.windowTexture=glu.createTextureFromBytes(new Uint8Array([255,255,255]));a.bindTexture(a.TEXTURE_2D,this.windowTexture);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);var d=new Image,l=this;d.onload=function(){glu.updateTexture(l.windowTexture,d);if(Controller.onRequestFrameRender)Controller.onRequestFrameRender()};
d.src="images/window.png";Math.cos(c.lat/180*Math.PI);Math.pow(2,19);var m=long2tile(c.lng,14),n=lat2tile(c.lat,14),b=[-1,0,1],e=[-1,0,1],m=Math.floor(m),n=Math.floor(n),g=[],k;for(k in b)for(var p in e)g.push({x:m+b[k],y:n+e[p]});for(k in g)Helpers.ajaxGet("tiles/geo/"+g[k].x+"/"+g[k].y+".json",this.onDataLoaded.bind(this))}}
Buildings.prototype.onDataLoaded=function(a){try{var c=JSON.parse(a);[].push.apply(this.geometry,c)}catch(d){console.log("Error parsing JSON response of request '%s': %s",a.url,d.message)}this.numTilesLoaded+=1;if(9==this.numTilesLoaded){a=this.mapCenter.lat;var c=Math.cos(a/180*Math.PI),l=this.mapCenter.lng,m=12756200*Math.PI,n;for(n in this.geometry){var b=this.geometry[n],e=b.minHeightInMeters,g=[],k=1E10,p;for(p in b.vertices){var u=b.vertices[p],q=(u[0]-a)/360*m,r=(u[1]-l)/360*m*c,h=r*r+q*q;
h<k&&(k=h);g.push([r,-q,u[2]])}if(225E4<k)b.edges=[],b.faces=[],b.outlines=[];else{for(p in b.edges)for(k=b.edges[p],p=0;p<k.length;p+=1)k[p]=g[k[p]];for(p in b.faces)b.faces[p]=g[b.faces[p]];for(p in b.outlines){var k=b.outlines[p],u=[],q=[],w;for(w in k)k[w]=g[k[w]],r=k[w],h=[r[0],r[1],e],u.push(r),q.push(h),b.edges.push([h,r]);b.edges.push(u);b.edges.push(q)}}}this.buildGlGeometry(this.geometry);delete this.geometry;if(this.onLoaded)this.onLoaded()}};
Buildings.prototype.buildGlGeometry=function(a){if(gl){this.vertices=[];this.texCoords=[];this.normals=[];this.vertexColors=[];this.edgeVertices=[];for(var c in a){var d=a[c],l=[].concat(d.wallColor,d.wallColor,d.wallColor),m=[].concat(d.roofColor,d.roofColor,d.roofColor),n=d.minHeightInMeters,b=d.numLevels|0,e;for(e in d.edges)for(var g=d.edges[e],k=0;k<g.length-1;k++){var p=g[k].concat(g[k+1]);[].push.apply(this.edgeVertices,p)}for(e=0;e+2<d.faces.length;e+=3){var g=d.faces[e+0],p=d.faces[e+1],
u=d.faces[e+2],q=getNormal(g,p,u),g=[].concat(g,p,u);[].push.apply(this.vertices,g);var r=[0,0,0,0,0,0];[].push.apply(this.texCoords,r);q=[].concat(q,q,q);[].push.apply(this.normals,q);[].push.apply(this.vertexColors,m)}for(e in d.outlines)for(m=d.outlines[e],k=0;k<m.length-1;k++){var h=m[k],u=m[k+1],p=[u[0],u[1],n],g=[h[0],h[1],n],q=getNormal(g,p,u),r=dist3(u,h)/2|0,r=[0,b,r,b,r,0,0,b,r,0,0,0];this.texCoords.push.apply(this.texCoords,r);q=[].concat(q,q,q,q,q,q);this.normals.push.apply(this.normals,
q);g=[].concat(g,p,u,g,u,h);this.vertices.push.apply(this.vertices,g);g=[].concat(l,l);[].push.apply(this.vertexColors,g)}}this.numVertices=this.vertices.length/3;this.numEdgeVertices=this.edgeVertices.length/3;console.log("'Buildings' total to %s faces and %s edges",this.numVertices/3,this.numEdgeVertices/2);this.vertices=glu.createArrayBuffer(this.vertices);this.vertexColors=glu.createArrayBuffer(this.vertexColors);this.texCoords=glu.createArrayBuffer(this.texCoords);this.normals=glu.createArrayBuffer(this.normals);
this.edgeVertices=glu.createArrayBuffer(this.edgeVertices)}};
Buildings.prototype.renderDepth=function(a,c){if(this.numVertices&&Shaders.ready){gl.enable(gl.CULL_FACE);gl.cullFace(gl.FRONT);gl.useProgram(Shaders.depth);glu.enableVertexAttribArrays(Shaders.depth);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertices);gl.vertexAttribPointer(Shaders.depth.locations.vertexPosition,3,gl.FLOAT,!1,0,0);var d=mat4.create();mat4.mul(d,c,a);gl.uniformMatrix4fv(Shaders.depth.locations.modelViewProjectionMatrix,!1,d);gl.drawArrays(gl.TRIANGLES,0,this.numVertices);gl.cullFace(gl.BACK);
glu.disableVertexAttribArrays(Shaders.depth)}};
Buildings.prototype.render=function(a,c){if(Shaders.ready){if(this.numVertices){gl.useProgram(Shaders.building);glu.enableVertexAttribArrays(Shaders.building);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertices);gl.vertexAttribPointer(Shaders.building.locations.vertexPosition,3,gl.FLOAT,!1,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexColors);gl.vertexAttribPointer(Shaders.building.locations.vertexColorIn,3,gl.FLOAT,!1,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,this.texCoords);gl.vertexAttribPointer(Shaders.building.locations.vertexTexCoords,
2,gl.FLOAT,!1,0,0);-1<Shaders.building.locations.vertexNormal&&(gl.bindBuffer(gl.ARRAY_BUFFER,this.normals),gl.vertexAttribPointer(Shaders.building.locations.vertexNormal,3,gl.FLOAT,!1,0,0));var d=mat4.create();mat4.mul(d,c,a);gl.uniform1i(Shaders.building.locations.tex,0);gl.uniformMatrix4fv(Shaders.building.locations.modelViewProjectionMatrix,!1,d);d=Controller.localPosition;gl.uniform3f(Shaders.building.locations.cameraPos,d.x,d.y,d.z);gl.uniform1i(Shaders.building.locations.tex,0);gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D,this.windowTexture);gl.enable(gl.POLYGON_OFFSET_FILL);gl.polygonOffset(1,1);gl.drawArrays(gl.TRIANGLES,0,this.numVertices);gl.disable(gl.POLYGON_OFFSET_FILL);glu.disableVertexAttribArrays(Shaders.building)}this.numEdgeVertices&&(gl.useProgram(Shaders.flat),glu.enableVertexAttribArrays(Shaders.flat),gl.bindBuffer(gl.ARRAY_BUFFER,this.edgeVertices),gl.vertexAttribPointer(Shaders.flat.locations.vertexPosition,3,gl.FLOAT,!1,0,0),d=mat4.create(),mat4.mul(d,c,a),gl.uniformMatrix4fv(Shaders.flat.locations.modelViewProjectionMatrix,
!1,d),gl.uniform4fv(Shaders.flat.locations.color,[.4,.4,.4,1]),gl.drawArrays(gl.LINES,0,this.numEdgeVertices),glu.disableVertexAttribArrays(Shaders.flat))}};function getSign(a,c){return a&&!c?1:c&&!a?-1:0}function toDictionary(a){a=a.split("&");var c={},d;for(d in a){var l=a[d].split("=");2==l.length&&(c[l[0]]=parseFloat(l[1]))}return c}
var Controller={position:{lat:0,lng:0},localPosition:{x:0,y:0,z:1.5},viewAngleYaw:0,viewAnglePitch:0,getEffectivePosition:function(){var a=12756200*Math.PI/360,c=a*Math.cos(Controller.position.lat/180*Math.PI);return{lat:Controller.position.lat+Controller.localPosition.y/a,lng:Controller.position.lng+Controller.localPosition.x/c}},getLocalPosition:function(){return[Controller.localPosition.x,Controller.localPosition.y,Controller.localPosition.z]},buildQueryString:function(a,c){a||(a=Controller.position.lat);
c||(c=Controller.position.lng);return"?lat="+a.toFixed(8)+"&lng="+c.toFixed(8)+"&yaw="+Controller.viewAngleYaw.toFixed(1)+"&pitch="+Controller.viewAnglePitch.toFixed(1)},initFromQueryString:function(a){a=toDictionary(a);a.lat&&a.lng&&(Controller.position={lat:a.lat,lng:a.lng},"yaw"in a&&"pitch"in a&&(Controller.viewAngleYaw=a.yaw,Controller.viewAnglePitch=a.pitch))},onMouseDown:function(a){0==a.button&&(Controller.x=a.clientX,Controller.y=a.clientY,Controller.down="mouse")},onMouseUp:function(a){0==
a.button&&(Controller.down=null)},keysDown:{},lastKeyEventProcessed:null,turn:function(a,c){Controller.viewAngleYaw%=360;Controller.viewAngleYaw+=a;Controller.viewAnglePitch+=c;60<Controller.viewAnglePitch&&(Controller.viewAnglePitch=60);-60>Controller.viewAnglePitch&&(Controller.viewAnglePitch=-60)},move:function(a,c){var d=Controller.viewAngleYaw/180*Math.PI,l=Math.sin(d),m=Math.cos(d),n=Math.sin(d+Math.PI/2),d=Math.cos(d+Math.PI/2),l=a*n+c*l,n=a*d+c*m;mapApartment&&(m=mapApartment.localToPixelCoordinates({x:Controller.localPosition.x,
y:Controller.localPosition.y}),l=mapApartment.localToPixelCoordinates({x:Controller.localPosition.x+l,y:Controller.localPosition.y+n}),l=CollisionHandling.adjustMovement(m,l),m=mapApartment.pixelToLocalCoordinates(l),Controller.localPosition.x=m.x,Controller.localPosition.y=m.y)},moveTo:function(a,c){var d=mapApartment.localToPixelCoordinates({x:a,y:c});CollisionHandling.moveAllowed(d[0],d[1])&&(Controller.localPosition.x=a,Controller.localPosition.y=c)},updateKeyInteraction:function(){var a=(new Date).getTime();
if(Controller.keysStillPressed())if(null===Controller.lastKeyEventProcessed)Controller.lastKeyEventProcessed=a;else{var c=a-Controller.lastKeyEventProcessed;Controller.lastKeyEventProcessed=a;1E3<c&&(console.log("[WARN] extensive time step (%s ms)",c),c=1E3);var a=c/400*getSign("W"in Controller.keysDown||"up"in Controller.keysDown,"S"in Controller.keysDown||"down"in Controller.keysDown),d=c/400*getSign("D"in Controller.keysDown,"A"in Controller.keysDown);Controller.move(d,a);a=c/10*getSign("right"in
Controller.keysDown,"left"in Controller.keysDown);d=0;Controller.keysStillPressed()&&"mouse"!=Controller.down&&1<Math.abs(Controller.viewAnglePitch)&&(d=(0>Controller.viewAnglePitch?1:-1)*c/40);Controller.turn(a,d);Controller.updateHistoryState()}else Controller.lastKeyEventProcessed=null},x:null,y:null,down:null,onKeyDown:function(a){var c=null;switch(a.keyCode){case 65:c="A";break;case 68:c="D";break;case 83:c="S";break;case 87:c="W";break;case 37:c="left";break;case 38:c="up";break;case 39:c="right";
break;case 40:c="down"}if(!(c in Controller.keysDown)&&(null!=c&&(Controller.updateKeyInteraction(),Controller.keysDown[c]=c),Controller.onRequestFrameRender))Controller.onRequestFrameRender()},onKeyUp:function(a){switch(a.keyCode){case 65:delete Controller.keysDown.A;break;case 68:delete Controller.keysDown.D;break;case 83:delete Controller.keysDown.S;break;case 87:delete Controller.keysDown.W;break;case 37:delete Controller.keysDown.left;break;case 38:delete Controller.keysDown.up;break;case 39:delete Controller.keysDown.right;
break;case 40:delete Controller.keysDown.down}Controller.updateKeyInteraction()},keysStillPressed:function(){return 0<Object.keys(Controller.keysDown).length},onMouseMove:function(a){if("mouse"==Controller.down){var c=a.clientX-Controller.x,d=a.clientY-Controller.y;Controller.x=a.clientX;Controller.y=a.clientY;Controller.turn(c/5,-d/5);Controller.updateHistoryState();if(Controller.onRequestFrameRender)Controller.onRequestFrameRender()}},getTouchData:function(a,c){if(null===c)return null;for(var d in a)if(a[d].identifier==
c)return a[d];return null},onTouchDown:function(a){a.preventDefault();a=a.changedTouches[0];Controller.down=a.identifier;Controller.x=a.clientX;Controller.y=a.clientY},onTouchEnd:function(a){a.preventDefault();Controller.down=null},onTouchMove:function(a){a.preventDefault();a=Controller.getTouchData(a.changedTouches,Controller.down);if(null!==a){var c=a.clientX-Controller.x,d=a.clientY-Controller.y;Controller.x=a.clientX;Controller.y=a.clientY;Controller.move(0,-d/100);Controller.turn(c/5,0);Controller.updateHistoryState();
if(Controller.onRequestFrameRender)Controller.onRequestFrameRender()}},updateTimeoutId:null,updateHistoryState:function(){Controller.updateTimeoutId&&window.clearTimeout(Controller.updateTimeoutId);Controller.updateTimeoutId=window.setTimeout(function(){},1E3)}};(function(a){var c;"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(c={},define(function(){return c})):c="undefined"!=typeof window?window:a:c=exports;(function(a){if(!c)var c=1E-6;if(!m)var m="undefined"!=typeof Float32Array?Float32Array:Array;if(!n)var n=Math.random;var b={setMatrixArrayType:function(h){m=h}};"undefined"!=typeof a&&(a.glMatrix=b);var e=Math.PI/180;b.toRadian=function(h){return h*e};var g={create:function(){var h=new m(2);return h[0]=
0,h[1]=0,h},clone:function(h){var w=new m(2);return w[0]=h[0],w[1]=h[1],w},fromValues:function(h,w){var a=new m(2);return a[0]=h,a[1]=w,a},copy:function(h,w){return h[0]=w[0],h[1]=w[1],h},set:function(h,w,a){return h[0]=w,h[1]=a,h},add:function(h,w,a){return h[0]=w[0]+a[0],h[1]=w[1]+a[1],h},subtract:function(h,w,a){return h[0]=w[0]-a[0],h[1]=w[1]-a[1],h}};g.sub=g.subtract;g.multiply=function(h,w,a){return h[0]=w[0]*a[0],h[1]=w[1]*a[1],h};g.mul=g.multiply;g.divide=function(h,w,a){return h[0]=w[0]/
a[0],h[1]=w[1]/a[1],h};g.div=g.divide;g.min=function(h,w,a){return h[0]=Math.min(w[0],a[0]),h[1]=Math.min(w[1],a[1]),h};g.max=function(h,w,a){return h[0]=Math.max(w[0],a[0]),h[1]=Math.max(w[1],a[1]),h};g.scale=function(h,w,a){return h[0]=w[0]*a,h[1]=w[1]*a,h};g.scaleAndAdd=function(h,w,a,b){return h[0]=w[0]+a[0]*b,h[1]=w[1]+a[1]*b,h};g.distance=function(h,w){var a=w[0]-h[0],b=w[1]-h[1];return Math.sqrt(a*a+b*b)};g.dist=g.distance;g.squaredDistance=function(h,w){var a=w[0]-h[0],b=w[1]-h[1];return a*
a+b*b};g.sqrDist=g.squaredDistance;g.length=function(h){var w=h[0];h=h[1];return Math.sqrt(w*w+h*h)};g.len=g.length;g.squaredLength=function(h){var w=h[0];h=h[1];return w*w+h*h};g.sqrLen=g.squaredLength;g.negate=function(h,w){return h[0]=-w[0],h[1]=-w[1],h};g.normalize=function(h,w){var a=w[0],b=w[1],a=a*a+b*b;return 0<a&&(a=1/Math.sqrt(a),h[0]=w[0]*a,h[1]=w[1]*a),h};g.dot=function(h,w){return h[0]*w[0]+h[1]*w[1]};g.cross=function(h,w,a){w=w[0]*a[1]-w[1]*a[0];return h[0]=h[1]=0,h[2]=w,h};g.lerp=function(h,
w,a,b){var c=w[0];w=w[1];return h[0]=c+b*(a[0]-c),h[1]=w+b*(a[1]-w),h};g.random=function(h,a){a=a||1;var t=2*n()*Math.PI;return h[0]=Math.cos(t)*a,h[1]=Math.sin(t)*a,h};g.transformMat2=function(h,a,t){var b=a[0];a=a[1];return h[0]=t[0]*b+t[2]*a,h[1]=t[1]*b+t[3]*a,h};g.transformMat2d=function(h,a,t){var b=a[0];a=a[1];return h[0]=t[0]*b+t[2]*a+t[4],h[1]=t[1]*b+t[3]*a+t[5],h};g.transformMat3=function(h,a,t){var b=a[0];a=a[1];return h[0]=t[0]*b+t[3]*a+t[6],h[1]=t[1]*b+t[4]*a+t[7],h};g.transformMat4=function(h,
a,t){var b=a[0];a=a[1];return h[0]=t[0]*b+t[4]*a+t[12],h[1]=t[1]*b+t[5]*a+t[13],h};g.forEach=function(){var h=g.create();return function(a,t,b,c,e,d){var g;t||(t=2);b||(b=0);for(c?g=Math.min(c*t+b,a.length):g=a.length;b<g;b+=t)h[0]=a[b],h[1]=a[b+1],e(h,h,d),a[b]=h[0],a[b+1]=h[1];return a}}();g.str=function(h){return"vec2("+h[0]+", "+h[1]+")"};"undefined"!=typeof a&&(a.vec2=g);var k={create:function(){var h=new m(3);return h[0]=0,h[1]=0,h[2]=0,h},clone:function(h){var a=new m(3);return a[0]=h[0],a[1]=
h[1],a[2]=h[2],a},fromValues:function(h,a,t){var b=new m(3);return b[0]=h,b[1]=a,b[2]=t,b},copy:function(h,a){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h},set:function(h,a,t,b){return h[0]=a,h[1]=t,h[2]=b,h},add:function(h,a,t){return h[0]=a[0]+t[0],h[1]=a[1]+t[1],h[2]=a[2]+t[2],h},subtract:function(h,a,t){return h[0]=a[0]-t[0],h[1]=a[1]-t[1],h[2]=a[2]-t[2],h}};k.sub=k.subtract;k.multiply=function(h,a,t){return h[0]=a[0]*t[0],h[1]=a[1]*t[1],h[2]=a[2]*t[2],h};k.mul=k.multiply;k.divide=function(h,a,t){return h[0]=
a[0]/t[0],h[1]=a[1]/t[1],h[2]=a[2]/t[2],h};k.div=k.divide;k.min=function(h,a,t){return h[0]=Math.min(a[0],t[0]),h[1]=Math.min(a[1],t[1]),h[2]=Math.min(a[2],t[2]),h};k.max=function(h,a,t){return h[0]=Math.max(a[0],t[0]),h[1]=Math.max(a[1],t[1]),h[2]=Math.max(a[2],t[2]),h};k.scale=function(h,a,t){return h[0]=a[0]*t,h[1]=a[1]*t,h[2]=a[2]*t,h};k.scaleAndAdd=function(h,a,t,b){return h[0]=a[0]+t[0]*b,h[1]=a[1]+t[1]*b,h[2]=a[2]+t[2]*b,h};k.distance=function(h,a){var t=a[0]-h[0],b=a[1]-h[1],c=a[2]-h[2];return Math.sqrt(t*
t+b*b+c*c)};k.dist=k.distance;k.squaredDistance=function(h,a){var t=a[0]-h[0],b=a[1]-h[1],c=a[2]-h[2];return t*t+b*b+c*c};k.sqrDist=k.squaredDistance;k.length=function(h){var a=h[0],t=h[1];h=h[2];return Math.sqrt(a*a+t*t+h*h)};k.len=k.length;k.squaredLength=function(h){var a=h[0],t=h[1];h=h[2];return a*a+t*t+h*h};k.sqrLen=k.squaredLength;k.negate=function(h,a){return h[0]=-a[0],h[1]=-a[1],h[2]=-a[2],h};k.normalize=function(h,a){var t=a[0],b=a[1],c=a[2],t=t*t+b*b+c*c;return 0<t&&(t=1/Math.sqrt(t),
h[0]=a[0]*t,h[1]=a[1]*t,h[2]=a[2]*t),h};k.dot=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]};k.cross=function(h,a,t){var b=a[0],c=a[1];a=a[2];var e=t[0],d=t[1];t=t[2];return h[0]=c*t-a*d,h[1]=a*e-b*t,h[2]=b*d-c*e,h};k.lerp=function(h,a,t,b){var c=a[0],e=a[1];a=a[2];return h[0]=c+b*(t[0]-c),h[1]=e+b*(t[1]-e),h[2]=a+b*(t[2]-a),h};k.random=function(h,a){a=a||1;var t=2*n()*Math.PI,b=2*n()-1,c=Math.sqrt(1-b*b)*a;return h[0]=Math.cos(t)*c,h[1]=Math.sin(t)*c,h[2]=b*a,h};k.transformMat4=function(h,a,
t){var b=a[0],c=a[1];a=a[2];return h[0]=t[0]*b+t[4]*c+t[8]*a+t[12],h[1]=t[1]*b+t[5]*c+t[9]*a+t[13],h[2]=t[2]*b+t[6]*c+t[10]*a+t[14],h};k.transformMat3=function(h,a,t){var b=a[0],c=a[1];a=a[2];return h[0]=b*t[0]+c*t[3]+a*t[6],h[1]=b*t[1]+c*t[4]+a*t[7],h[2]=b*t[2]+c*t[5]+a*t[8],h};k.transformQuat=function(h,a,t){var b=a[0],c=a[1],e=a[2];a=t[0];var d=t[1],g=t[2];t=t[3];var k=t*b+d*e-g*c,l=t*c+g*b-a*e,p=t*e+a*c-d*b,b=-a*b-d*c-g*e;return h[0]=k*t+b*-a+l*-g-p*-d,h[1]=l*t+b*-d+p*-a-k*-g,h[2]=p*t+b*-g+k*
-d-l*-a,h};k.rotateX=function(h,a,t,b){var c=[],e=[];return c[0]=a[0]-t[0],c[1]=a[1]-t[1],c[2]=a[2]-t[2],e[0]=c[0],e[1]=c[1]*Math.cos(b)-c[2]*Math.sin(b),e[2]=c[1]*Math.sin(b)+c[2]*Math.cos(b),h[0]=e[0]+t[0],h[1]=e[1]+t[1],h[2]=e[2]+t[2],h};k.rotateY=function(h,a,b,c){var e=[],d=[];return e[0]=a[0]-b[0],e[1]=a[1]-b[1],e[2]=a[2]-b[2],d[0]=e[2]*Math.sin(c)+e[0]*Math.cos(c),d[1]=e[1],d[2]=e[2]*Math.cos(c)-e[0]*Math.sin(c),h[0]=d[0]+b[0],h[1]=d[1]+b[1],h[2]=d[2]+b[2],h};k.rotateZ=function(h,a,b,c){var e=
[],d=[];return e[0]=a[0]-b[0],e[1]=a[1]-b[1],e[2]=a[2]-b[2],d[0]=e[0]*Math.cos(c)-e[1]*Math.sin(c),d[1]=e[0]*Math.sin(c)+e[1]*Math.cos(c),d[2]=e[2],h[0]=d[0]+b[0],h[1]=d[1]+b[1],h[2]=d[2]+b[2],h};k.forEach=function(){var h=k.create();return function(a,b,c,e,d,g){var k;b||(b=3);c||(c=0);for(e?k=Math.min(e*b+c,a.length):k=a.length;c<k;c+=b)h[0]=a[c],h[1]=a[c+1],h[2]=a[c+2],d(h,h,g),a[c]=h[0],a[c+1]=h[1],a[c+2]=h[2];return a}}();k.str=function(h){return"vec3("+h[0]+", "+h[1]+", "+h[2]+")"};"undefined"!=
typeof a&&(a.vec3=k);var p={create:function(){var h=new m(4);return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h},clone:function(h){var a=new m(4);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a},fromValues:function(h,a,b,c){var e=new m(4);return e[0]=h,e[1]=a,e[2]=b,e[3]=c,e},copy:function(h,a){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h},set:function(h,a,b,c,e){return h[0]=a,h[1]=b,h[2]=c,h[3]=e,h},add:function(h,a,b){return h[0]=a[0]+b[0],h[1]=a[1]+b[1],h[2]=a[2]+b[2],h[3]=a[3]+b[3],h},subtract:function(h,
a,b){return h[0]=a[0]-b[0],h[1]=a[1]-b[1],h[2]=a[2]-b[2],h[3]=a[3]-b[3],h}};p.sub=p.subtract;p.multiply=function(h,a,b){return h[0]=a[0]*b[0],h[1]=a[1]*b[1],h[2]=a[2]*b[2],h[3]=a[3]*b[3],h};p.mul=p.multiply;p.divide=function(h,a,b){return h[0]=a[0]/b[0],h[1]=a[1]/b[1],h[2]=a[2]/b[2],h[3]=a[3]/b[3],h};p.div=p.divide;p.min=function(h,a,b){return h[0]=Math.min(a[0],b[0]),h[1]=Math.min(a[1],b[1]),h[2]=Math.min(a[2],b[2]),h[3]=Math.min(a[3],b[3]),h};p.max=function(h,a,b){return h[0]=Math.max(a[0],b[0]),
h[1]=Math.max(a[1],b[1]),h[2]=Math.max(a[2],b[2]),h[3]=Math.max(a[3],b[3]),h};p.scale=function(h,a,b){return h[0]=a[0]*b,h[1]=a[1]*b,h[2]=a[2]*b,h[3]=a[3]*b,h};p.scaleAndAdd=function(h,a,b,c){return h[0]=a[0]+b[0]*c,h[1]=a[1]+b[1]*c,h[2]=a[2]+b[2]*c,h[3]=a[3]+b[3]*c,h};p.distance=function(h,a){var b=a[0]-h[0],c=a[1]-h[1],e=a[2]-h[2],d=a[3]-h[3];return Math.sqrt(b*b+c*c+e*e+d*d)};p.dist=p.distance;p.squaredDistance=function(h,a){var b=a[0]-h[0],c=a[1]-h[1],e=a[2]-h[2],d=a[3]-h[3];return b*b+c*c+e*
e+d*d};p.sqrDist=p.squaredDistance;p.length=function(h){var a=h[0],b=h[1],c=h[2];h=h[3];return Math.sqrt(a*a+b*b+c*c+h*h)};p.len=p.length;p.squaredLength=function(h){var a=h[0],b=h[1],c=h[2];h=h[3];return a*a+b*b+c*c+h*h};p.sqrLen=p.squaredLength;p.negate=function(h,a){return h[0]=-a[0],h[1]=-a[1],h[2]=-a[2],h[3]=-a[3],h};p.normalize=function(h,a){var b=a[0],c=a[1],e=a[2],d=a[3],b=b*b+c*c+e*e+d*d;return 0<b&&(b=1/Math.sqrt(b),h[0]=a[0]*b,h[1]=a[1]*b,h[2]=a[2]*b,h[3]=a[3]*b),h};p.dot=function(h,a){return h[0]*
a[0]+h[1]*a[1]+h[2]*a[2]+h[3]*a[3]};p.lerp=function(h,a,b,c){var e=a[0],d=a[1],g=a[2];a=a[3];return h[0]=e+c*(b[0]-e),h[1]=d+c*(b[1]-d),h[2]=g+c*(b[2]-g),h[3]=a+c*(b[3]-a),h};p.random=function(h,a){return a=a||1,h[0]=n(),h[1]=n(),h[2]=n(),h[3]=n(),p.normalize(h,h),p.scale(h,h,a),h};p.transformMat4=function(h,a,b){var c=a[0],e=a[1],d=a[2];a=a[3];return h[0]=b[0]*c+b[4]*e+b[8]*d+b[12]*a,h[1]=b[1]*c+b[5]*e+b[9]*d+b[13]*a,h[2]=b[2]*c+b[6]*e+b[10]*d+b[14]*a,h[3]=b[3]*c+b[7]*e+b[11]*d+b[15]*a,h};p.transformQuat=
function(h,a,b){var c=a[0],e=a[1],d=a[2];a=b[0];var g=b[1],k=b[2];b=b[3];var l=b*c+g*d-k*e,p=b*e+k*c-a*d,m=b*d+a*e-g*c,c=-a*c-g*e-k*d;return h[0]=l*b+c*-a+p*-k-m*-g,h[1]=p*b+c*-g+m*-a-l*-k,h[2]=m*b+c*-k+l*-g-p*-a,h};p.forEach=function(){var h=p.create();return function(a,b,c,e,d,g){var k;b||(b=4);c||(c=0);for(e?k=Math.min(e*b+c,a.length):k=a.length;c<k;c+=b)h[0]=a[c],h[1]=a[c+1],h[2]=a[c+2],h[3]=a[c+3],d(h,h,g),a[c]=h[0],a[c+1]=h[1],a[c+2]=h[2],a[c+3]=h[3];return a}}();p.str=function(h){return"vec4("+
h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"};"undefined"!=typeof a&&(a.vec4=p);b={create:function(){var h=new m(4);return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h},clone:function(h){var a=new m(4);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a},copy:function(h,a){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h},identity:function(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h},transpose:function(h,a){if(h===a){var b=a[1];h[1]=a[2];h[2]=b}else h[0]=a[0],h[1]=a[2],h[2]=a[1],h[3]=a[3];return h},invert:function(h,a){var b=
a[0],c=a[1],e=a[2],d=a[3],g=b*d-e*c;return g?(g=1/g,h[0]=d*g,h[1]=-c*g,h[2]=-e*g,h[3]=b*g,h):null},adjoint:function(h,a){var b=a[0];return h[0]=a[3],h[1]=-a[1],h[2]=-a[2],h[3]=b,h},determinant:function(h){return h[0]*h[3]-h[2]*h[1]},multiply:function(h,a,b){var c=a[0],e=a[1],d=a[2];a=a[3];var g=b[0],k=b[1],l=b[2];b=b[3];return h[0]=c*g+d*k,h[1]=e*g+a*k,h[2]=c*l+d*b,h[3]=e*l+a*b,h}};b.mul=b.multiply;b.rotate=function(h,a,b){var c=a[0],e=a[1],d=a[2];a=a[3];var g=Math.sin(b);b=Math.cos(b);return h[0]=
c*b+d*g,h[1]=e*b+a*g,h[2]=c*-g+d*b,h[3]=e*-g+a*b,h};b.scale=function(a,b,c){var e=b[1],d=b[2],g=b[3],k=c[0];c=c[1];return a[0]=b[0]*k,a[1]=e*k,a[2]=d*c,a[3]=g*c,a};b.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};b.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};b.LDU=function(a,b,c,e){return a[2]=e[2]/e[0],c[0]=e[0],c[1]=e[1],c[3]=e[3]-a[2]*c[1],[a,b,c]};"undefined"!=typeof a&&(a.mat2=b);b={create:function(){var a=new m(6);
return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},clone:function(a){var b=new m(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},invert:function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=b[4],l=b[5],p=c*g-e*d;return p?(p=1/p,a[0]=g*p,a[1]=-e*p,a[2]=-d*p,a[3]=c*p,a[4]=(d*l-g*k)*p,a[5]=(e*k-c*l)*p,a):null},determinant:function(a){return a[0]*
a[3]-a[1]*a[2]},multiply:function(a,b,c){var e=b[0],d=b[1],g=b[2],k=b[3],l=b[4];b=b[5];var p=c[0],m=c[1],n=c[2],q=c[3],u=c[4];c=c[5];return a[0]=e*p+g*m,a[1]=d*p+k*m,a[2]=e*n+g*q,a[3]=d*n+k*q,a[4]=e*u+g*c+l,a[5]=d*u+k*c+b,a}};b.mul=b.multiply;b.rotate=function(a,b,c){var e=b[0],d=b[1],g=b[2],k=b[3],l=b[4];b=b[5];var p=Math.sin(c);c=Math.cos(c);return a[0]=e*c+g*p,a[1]=d*c+k*p,a[2]=e*-p+g*c,a[3]=d*-p+k*c,a[4]=l,a[5]=b,a};b.scale=function(a,b,c){var e=b[1],d=b[2],g=b[3],k=b[4],l=b[5],p=c[0];c=c[1];
return a[0]=b[0]*p,a[1]=e*p,a[2]=d*c,a[3]=g*c,a[4]=k,a[5]=l,a};b.translate=function(a,b,c){var e=b[0],d=b[1],g=b[2],k=b[3],l=b[4];b=b[5];var p=c[0];c=c[1];return a[0]=e,a[1]=d,a[2]=g,a[3]=k,a[4]=e*p+g*c+l,a[5]=d*p+k*c+b,a};b.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};b.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!=typeof a&&(a.mat2d=b);var u={create:function(){var a=
new m(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},fromMat4:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},clone:function(a){var b=new m(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=
0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,b){if(a===b){var c=b[1],e=b[2],d=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=e;a[7]=d}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=b[4],l=b[5],p=b[6],m=b[7],n=b[8],q=n*k-l*m,u=-n*g+l*p,r=m*g-k*p,x=c*q+e*u+d*r;return x?(x=1/x,a[0]=q*x,a[1]=(-n*e+d*m)*x,a[2]=(l*e-d*k)*x,a[3]=u*x,a[4]=(n*c-d*p)*x,a[5]=(-l*c+d*g)*x,a[6]=
r*x,a[7]=(-m*c+e*p)*x,a[8]=(k*c-e*g)*x,a):null},adjoint:function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=b[4],l=b[5],p=b[6],m=b[7],n=b[8];return a[0]=k*n-l*m,a[1]=d*m-e*n,a[2]=e*l-d*k,a[3]=l*p-g*n,a[4]=c*n-d*p,a[5]=d*g-c*l,a[6]=g*m-k*p,a[7]=e*p-c*m,a[8]=c*k-e*g,a},determinant:function(a){var b=a[3],c=a[4],e=a[5],d=a[6],g=a[7],k=a[8];return a[0]*(k*c-e*g)+a[1]*(-k*b+e*d)+a[2]*(g*b-c*d)},multiply:function(a,b,c){var e=b[0],d=b[1],g=b[2],k=b[3],l=b[4],p=b[5],m=b[6],n=b[7];b=b[8];var q=c[0],u=c[1],r=c[2],
x=c[3],A=c[4],z=c[5],v=c[6],H=c[7];c=c[8];return a[0]=q*e+u*k+r*m,a[1]=q*d+u*l+r*n,a[2]=q*g+u*p+r*b,a[3]=x*e+A*k+z*m,a[4]=x*d+A*l+z*n,a[5]=x*g+A*p+z*b,a[6]=v*e+H*k+c*m,a[7]=v*d+H*l+c*n,a[8]=v*g+H*p+c*b,a}};u.mul=u.multiply;u.translate=function(a,b,c){var e=b[0],d=b[1],g=b[2],k=b[3],l=b[4],p=b[5],m=b[6],n=b[7];b=b[8];var q=c[0];c=c[1];return a[0]=e,a[1]=d,a[2]=g,a[3]=k,a[4]=l,a[5]=p,a[6]=q*e+c*k+m,a[7]=q*d+c*l+n,a[8]=q*g+c*p+b,a};u.rotate=function(a,b,c){var e=b[0],d=b[1],g=b[2],k=b[3],l=b[4],p=b[5],
m=b[6],n=b[7];b=b[8];var q=Math.sin(c);c=Math.cos(c);return a[0]=c*e+q*k,a[1]=c*d+q*l,a[2]=c*g+q*p,a[3]=c*k-q*e,a[4]=c*l-q*d,a[5]=c*p-q*g,a[6]=m,a[7]=n,a[8]=b,a};u.scale=function(a,b,c){var e=c[0];c=c[1];return a[0]=e*b[0],a[1]=e*b[1],a[2]=e*b[2],a[3]=c*b[3],a[4]=c*b[4],a[5]=c*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a};u.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a};u.fromQuat=function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=c+c,l=e+e,
p=d+d,c=c*k,m=e*k,e=e*l,n=d*k,q=d*l,d=d*p,k=g*k,l=g*l,g=g*p;return a[0]=1-e-d,a[3]=m-g,a[6]=n+l,a[1]=m+g,a[4]=1-c-d,a[7]=q-k,a[2]=n-l,a[5]=q+k,a[8]=1-c-e,a};u.normalFromMat4=function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=b[4],l=b[5],p=b[6],m=b[7],n=b[8],q=b[9],u=b[10],r=b[11],x=b[12],A=b[13],z=b[14],v=b[15],H=c*l-e*k,F=c*p-d*k,I=c*m-g*k,G=e*p-d*l,S=e*m-g*l,T=d*m-g*p,U=n*A-q*x,P=n*z-u*x,n=n*v-r*x,V=q*z-u*A,q=q*v-r*A,u=u*v-r*z;return(r=H*u-F*q+I*V+G*n-S*P+T*U)?(r=1/r,a[0]=(l*u-p*q+m*V)*r,a[1]=(p*n-
k*u-m*P)*r,a[2]=(k*q-l*n+m*U)*r,a[3]=(d*q-e*u-g*V)*r,a[4]=(c*u-d*n+g*P)*r,a[5]=(e*n-c*q-g*U)*r,a[6]=(A*T-z*S+v*G)*r,a[7]=(z*I-x*T-v*F)*r,a[8]=(x*S-A*I+v*H)*r,a):null};u.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};u.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!=typeof a&&
(a.mat3=u);var q={create:function(){var a=new m(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},clone:function(a){var b=new m(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],
a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,b){if(a===b){var c=b[1],e=b[2],d=b[3],g=b[6],k=b[7],l=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=e;a[9]=g;a[11]=b[14];a[12]=d;a[13]=k;a[14]=l}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=
b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=b[4],l=b[5],p=b[6],m=b[7],n=b[8],q=b[9],u=b[10],r=b[11],x=b[12],A=b[13],z=b[14],v=b[15],H=c*l-e*k,F=c*p-d*k,I=c*m-g*k,G=e*p-d*l,S=e*m-g*l,T=d*m-g*p,U=n*A-q*x,P=n*z-u*x,V=n*v-r*x,Z=q*z-u*A,R=q*v-r*A,M=u*v-r*z,J=H*M-F*R+I*Z+G*V-S*P+T*U;return J?(J=1/J,a[0]=(l*M-p*R+m*Z)*J,a[1]=(d*R-e*M-g*Z)*J,a[2]=(A*T-z*S+v*G)*J,a[3]=(u*S-q*T-r*G)*
J,a[4]=(p*V-k*M-m*P)*J,a[5]=(c*M-d*V+g*P)*J,a[6]=(z*I-x*T-v*F)*J,a[7]=(n*T-u*I+r*F)*J,a[8]=(k*R-l*V+m*U)*J,a[9]=(e*V-c*R-g*U)*J,a[10]=(x*S-A*I+v*H)*J,a[11]=(q*I-n*S-r*H)*J,a[12]=(l*P-k*Z-p*U)*J,a[13]=(c*Z-e*P+d*U)*J,a[14]=(A*F-x*G-z*H)*J,a[15]=(n*G-q*F+u*H)*J,a):null},adjoint:function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=b[4],l=b[5],p=b[6],m=b[7],n=b[8],q=b[9],u=b[10],r=b[11],x=b[12],A=b[13],z=b[14],v=b[15];return a[0]=l*(u*v-r*z)-q*(p*v-m*z)+A*(p*r-m*u),a[1]=-(e*(u*v-r*z)-q*(d*v-g*z)+A*(d*r-g*
u)),a[2]=e*(p*v-m*z)-l*(d*v-g*z)+A*(d*m-g*p),a[3]=-(e*(p*r-m*u)-l*(d*r-g*u)+q*(d*m-g*p)),a[4]=-(k*(u*v-r*z)-n*(p*v-m*z)+x*(p*r-m*u)),a[5]=c*(u*v-r*z)-n*(d*v-g*z)+x*(d*r-g*u),a[6]=-(c*(p*v-m*z)-k*(d*v-g*z)+x*(d*m-g*p)),a[7]=c*(p*r-m*u)-k*(d*r-g*u)+n*(d*m-g*p),a[8]=k*(q*v-r*A)-n*(l*v-m*A)+x*(l*r-m*q),a[9]=-(c*(q*v-r*A)-n*(e*v-g*A)+x*(e*r-g*q)),a[10]=c*(l*v-m*A)-k*(e*v-g*A)+x*(e*m-g*l),a[11]=-(c*(l*r-m*q)-k*(e*r-g*q)+n*(e*m-g*l)),a[12]=-(k*(q*z-u*A)-n*(l*z-p*A)+x*(l*u-p*q)),a[13]=c*(q*z-u*A)-n*(e*z-
d*A)+x*(e*u-d*q),a[14]=-(c*(l*z-p*A)-k*(e*z-d*A)+x*(e*p-d*l)),a[15]=c*(l*u-p*q)-k*(e*u-d*q)+n*(e*p-d*l),a},determinant:function(a){var b=a[0],c=a[1],e=a[2],d=a[3],g=a[4],k=a[5],l=a[6],p=a[7],m=a[8],n=a[9],q=a[10],u=a[11],r=a[12],x=a[13],A=a[14];a=a[15];return(b*k-c*g)*(q*a-u*A)-(b*l-e*g)*(n*a-u*x)+(b*p-d*g)*(n*A-q*x)+(c*l-e*k)*(m*a-u*r)-(c*p-d*k)*(m*A-q*r)+(e*p-d*l)*(m*x-n*r)},multiply:function(a,b,c){var e=b[0],d=b[1],g=b[2],k=b[3],l=b[4],p=b[5],m=b[6],n=b[7],q=b[8],u=b[9],r=b[10],x=b[11],A=b[12],
z=b[13],v=b[14];b=b[15];var H=c[0],F=c[1],I=c[2],G=c[3];return a[0]=H*e+F*l+I*q+G*A,a[1]=H*d+F*p+I*u+G*z,a[2]=H*g+F*m+I*r+G*v,a[3]=H*k+F*n+I*x+G*b,H=c[4],F=c[5],I=c[6],G=c[7],a[4]=H*e+F*l+I*q+G*A,a[5]=H*d+F*p+I*u+G*z,a[6]=H*g+F*m+I*r+G*v,a[7]=H*k+F*n+I*x+G*b,H=c[8],F=c[9],I=c[10],G=c[11],a[8]=H*e+F*l+I*q+G*A,a[9]=H*d+F*p+I*u+G*z,a[10]=H*g+F*m+I*r+G*v,a[11]=H*k+F*n+I*x+G*b,H=c[12],F=c[13],I=c[14],G=c[15],a[12]=H*e+F*l+I*q+G*A,a[13]=H*d+F*p+I*u+G*z,a[14]=H*g+F*m+I*r+G*v,a[15]=H*k+F*n+I*x+G*b,a}};q.mul=
q.multiply;q.translate=function(a,b,c){var e=c[0],d=c[1];c=c[2];var g,k,l,p,m,n,q,u,r,x,A,z;return b===a?(a[12]=b[0]*e+b[4]*d+b[8]*c+b[12],a[13]=b[1]*e+b[5]*d+b[9]*c+b[13],a[14]=b[2]*e+b[6]*d+b[10]*c+b[14],a[15]=b[3]*e+b[7]*d+b[11]*c+b[15]):(g=b[0],k=b[1],l=b[2],p=b[3],m=b[4],n=b[5],q=b[6],u=b[7],r=b[8],x=b[9],A=b[10],z=b[11],a[0]=g,a[1]=k,a[2]=l,a[3]=p,a[4]=m,a[5]=n,a[6]=q,a[7]=u,a[8]=r,a[9]=x,a[10]=A,a[11]=z,a[12]=g*e+m*d+r*c+b[12],a[13]=k*e+n*d+x*c+b[13],a[14]=l*e+q*d+A*c+b[14],a[15]=p*e+u*d+z*
c+b[15]),a};q.scale=function(a,b,c){var e=c[0],d=c[1];c=c[2];return a[0]=b[0]*e,a[1]=b[1]*e,a[2]=b[2]*e,a[3]=b[3]*e,a[4]=b[4]*d,a[5]=b[5]*d,a[6]=b[6]*d,a[7]=b[7]*d,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};q.rotate=function(a,b,e,d){var g=d[0],k=d[1];d=d[2];var p=Math.sqrt(g*g+k*k+d*d),m,n,q,u,r,Q,K,x,A,z,v,H,F,I,G,S,T,U,P,V,Z,R,M,J;return Math.abs(p)<c?null:(p=1/p,g*=p,k*=p,d*=p,m=Math.sin(e),n=Math.cos(e),q=1-n,u=b[0],r=b[1],Q=b[2],K=
b[3],x=b[4],A=b[5],z=b[6],v=b[7],H=b[8],F=b[9],I=b[10],G=b[11],S=g*g*q+n,T=k*g*q+d*m,U=d*g*q-k*m,P=g*k*q-d*m,V=k*k*q+n,Z=d*k*q+g*m,R=g*d*q+k*m,M=k*d*q-g*m,J=d*d*q+n,a[0]=u*S+x*T+H*U,a[1]=r*S+A*T+F*U,a[2]=Q*S+z*T+I*U,a[3]=K*S+v*T+G*U,a[4]=u*P+x*V+H*Z,a[5]=r*P+A*V+F*Z,a[6]=Q*P+z*V+I*Z,a[7]=K*P+v*V+G*Z,a[8]=u*R+x*M+H*J,a[9]=r*R+A*M+F*J,a[10]=Q*R+z*M+I*J,a[11]=K*R+v*M+G*J,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)};q.rotateX=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[4],
g=b[5],k=b[6],l=b[7],p=b[8],m=b[9],n=b[10],q=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=d*c+p*e,a[5]=g*c+m*e,a[6]=k*c+n*e,a[7]=l*c+q*e,a[8]=p*c-d*e,a[9]=m*c-g*e,a[10]=n*c-k*e,a[11]=q*c-l*e,a};q.rotateY=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[0],g=b[1],k=b[2],l=b[3],p=b[8],m=b[9],n=b[10],q=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=d*c-p*e,
a[1]=g*c-m*e,a[2]=k*c-n*e,a[3]=l*c-q*e,a[8]=d*e+p*c,a[9]=g*e+m*c,a[10]=k*e+n*c,a[11]=l*e+q*c,a};q.rotateZ=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[0],g=b[1],k=b[2],l=b[3],p=b[4],m=b[5],n=b[6],q=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=d*c+p*e,a[1]=g*c+m*e,a[2]=k*c+n*e,a[3]=l*c+q*e,a[4]=p*c-d*e,a[5]=m*c-g*e,a[6]=n*c-k*e,a[7]=q*c-l*e,a};q.fromRotationTranslation=function(a,b,c){var e=b[0],d=b[1],g=b[2],k=b[3],
l=e+e,p=d+d,m=g+g;b=e*l;var n=e*p,e=e*m,q=d*p,d=d*m,g=g*m,l=k*l,p=k*p,k=k*m;return a[0]=1-(q+g),a[1]=n+k,a[2]=e-p,a[3]=0,a[4]=n-k,a[5]=1-(b+g),a[6]=d+l,a[7]=0,a[8]=e+p,a[9]=d-l,a[10]=1-(b+q),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a};q.fromQuat=function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=c+c,l=e+e,p=d+d,c=c*k,m=e*k,e=e*l,n=d*k,q=d*l,d=d*p,k=g*k,l=g*l,g=g*p;return a[0]=1-e-d,a[1]=m+g,a[2]=n-l,a[3]=0,a[4]=m-g,a[5]=1-c-d,a[6]=q+k,a[7]=0,a[8]=n+l,a[9]=q-k,a[10]=1-c-e,a[11]=0,a[12]=0,a[13]=
0,a[14]=0,a[15]=1,a};q.frustum=function(a,b,c,e,d,g,k){var l=1/(c-b),p=1/(d-e),m=1/(g-k);return a[0]=2*g*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*g*p,a[6]=0,a[7]=0,a[8]=(c+b)*l,a[9]=(d+e)*p,a[10]=(k+g)*m,a[11]=-1,a[12]=0,a[13]=0,a[14]=k*g*2*m,a[15]=0,a};q.perspective=function(a,b,c,e,d){b=1/Math.tan(b/2);var g=1/(e-d);return a[0]=b/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(d+e)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*d*e*g,a[15]=0,a};q.ortho=function(a,b,c,e,d,g,k){var l=1/(b-
c),p=1/(e-d),m=1/(g-k);return a[0]=-2*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*p,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*m,a[11]=0,a[12]=(b+c)*l,a[13]=(d+e)*p,a[14]=(k+g)*m,a[15]=1,a};q.lookAt=function(a,b,e,d){var g,k,p,m,n,u,r,X,Q,K,x=b[0],A=b[1];b=b[2];var z=d[0],v=d[1];d=d[2];var H=e[0],F=e[1];e=e[2];return Math.abs(x-H)<c&&Math.abs(A-F)<c&&Math.abs(b-e)<c?q.identity(a):(r=x-H,X=A-F,Q=b-e,K=1/Math.sqrt(r*r+X*X+Q*Q),r*=K,X*=K,Q*=K,g=v*Q-d*X,k=d*r-z*Q,p=z*X-v*r,K=Math.sqrt(g*g+k*k+p*p),K?(K=1/K,g*=K,k*=
K,p*=K):(g=0,k=0,p=0),m=X*p-Q*k,n=Q*g-r*p,u=r*k-X*g,K=Math.sqrt(m*m+n*n+u*u),K?(K=1/K,m*=K,n*=K,u*=K):(m=0,n=0,u=0),a[0]=g,a[1]=m,a[2]=r,a[3]=0,a[4]=k,a[5]=n,a[6]=X,a[7]=0,a[8]=p,a[9]=u,a[10]=Q,a[11]=0,a[12]=-(g*x+k*A+p*b),a[13]=-(m*x+n*A+u*b),a[14]=-(r*x+X*A+Q*b),a[15]=1,a)};q.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!=typeof a&&(a.mat4=q);var r={create:function(){var a=new m(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}};r.rotationTo=function(){var a=k.create(),b=k.fromValues(1,0,0),c=k.fromValues(0,1,0);return function(e,d,
g){var l=k.dot(d,g);return-.999999>l?(k.cross(a,b,d),1E-6>k.length(a)&&k.cross(a,c,d),k.normalize(a,a),r.setAxisAngle(e,a,Math.PI),e):.999999<l?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(k.cross(a,d,g),e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=1+l,r.normalize(e,e))}}();r.setAxes=function(){var a=u.create();return function(b,c,e,d){return a[0]=e[0],a[3]=e[1],a[6]=e[2],a[1]=d[0],a[4]=d[1],a[7]=d[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],r.normalize(b,r.fromMat3(b,a))}}();r.clone=p.clone;r.fromValues=p.fromValues;r.copy=p.copy;
r.set=p.set;r.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};r.setAxisAngle=function(a,b,c){c*=.5;var e=Math.sin(c);return a[0]=e*b[0],a[1]=e*b[1],a[2]=e*b[2],a[3]=Math.cos(c),a};r.add=p.add;r.multiply=function(a,b,c){var e=b[0],d=b[1],g=b[2];b=b[3];var k=c[0],l=c[1],p=c[2];c=c[3];return a[0]=e*c+b*k+d*p-g*l,a[1]=d*c+b*l+g*k-e*p,a[2]=g*c+b*p+e*l-d*k,a[3]=b*c-e*k-d*l-g*p,a};r.mul=r.multiply;r.scale=p.scale;r.rotateX=function(a,b,c){c*=.5;var e=b[0],d=b[1],g=b[2];b=b[3];var k=Math.sin(c);
c=Math.cos(c);return a[0]=e*c+b*k,a[1]=d*c+g*k,a[2]=g*c-d*k,a[3]=b*c-e*k,a};r.rotateY=function(a,b,c){c*=.5;var e=b[0],d=b[1],g=b[2];b=b[3];var k=Math.sin(c);c=Math.cos(c);return a[0]=e*c-g*k,a[1]=d*c+b*k,a[2]=g*c+e*k,a[3]=b*c-d*k,a};r.rotateZ=function(a,b,c){c*=.5;var e=b[0],d=b[1],g=b[2];b=b[3];var k=Math.sin(c);c=Math.cos(c);return a[0]=e*c+d*k,a[1]=d*c-e*k,a[2]=g*c+b*k,a[3]=b*c-g*k,a};r.calculateW=function(a,b){var c=b[0],e=b[1],d=b[2];return a[0]=c,a[1]=e,a[2]=d,a[3]=-Math.sqrt(Math.abs(1-c*
c-e*e-d*d)),a};r.dot=p.dot;r.lerp=p.lerp;r.slerp=function(a,b,c,e){var d=b[0],g=b[1],k=b[2];b=b[3];var l=c[0],p=c[1],m=c[2];c=c[3];var n,q,u,r,x;return q=d*l+g*p+k*m+b*c,0>q&&(q=-q,l=-l,p=-p,m=-m,c=-c),1E-6<1-q?(n=Math.acos(q),u=Math.sin(n),r=Math.sin((1-e)*n)/u,x=Math.sin(e*n)/u):(r=1-e,x=e),a[0]=r*d+x*l,a[1]=r*g+x*p,a[2]=r*k+x*m,a[3]=r*b+x*c,a};r.invert=function(a,b){var c=b[0],e=b[1],d=b[2],g=b[3],k=c*c+e*e+d*d+g*g,k=k?1/k:0;return a[0]=-c*k,a[1]=-e*k,a[2]=-d*k,a[3]=g*k,a};r.conjugate=function(a,
b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a};r.length=p.length;r.len=r.length;r.squaredLength=p.squaredLength;r.sqrLen=r.squaredLength;r.normalize=p.normalize;r.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[7]-b[5])*c,a[1]=(b[2]-b[6])*c,a[2]=(b[3]-b[1])*c;else{var e=0;b[4]>b[0]&&(e=1);b[8]>b[3*e+e]&&(e=2);var d=(e+1)%3,g=(e+2)%3,c=Math.sqrt(b[3*e+e]-b[3*d+d]-b[3*g+g]+1);a[e]=.5*c;c=.5/c;a[3]=(b[3*g+d]-b[3*d+g])*c;a[d]=(b[3*d+e]+b[3*e+d])*c;
a[g]=(b[3*g+e]+b[3*e+g])*c}return a};r.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!=typeof a&&(a.quat=r)})(c)})(this);var glu={compileShader:function(a,c){var d=gl.createShader(c);gl.shaderSource(d,a);gl.compileShader(d);if(!gl.getShaderParameter(d,gl.COMPILE_STATUS)){var l=gl.getShaderInfoLog(d);gl.deleteShader(d);return[!1,"Couldn't compile the shader: "+l+"\nSource is: "+a]}return[!0,d]},createProgram:function(a,c){var d=gl.createProgram();gl.attachShader(d,a);gl.attachShader(d,c);gl.linkProgram(d);if(!gl.getProgramParameter(d,gl.LINK_STATUS)){var l=gl.getProgramInfoLog(d);gl.deleteProgram(d);gl.deleteShader(a);
gl.deleteShader(c);return[!1,l]}return[!0,d]},enableVertexAttribArrays:function(a){for(var c in a.attribLocations)gl.enableVertexAttribArray(a.attribLocations[c])},disableVertexAttribArrays:function(a){for(var c in a.attribLocations)gl.disableVertexAttribArray(a.attribLocations[c])},createShader:function(a,c,d,l,m){var n=glu.compileShader(a,gl.VERTEX_SHADER);if(!n[0])return m&&(m.textContent=n[1]),null;var b=n[1],n=glu.compileShader(c,gl.FRAGMENT_SHADER);if(!n[0])return m&&(m.textContent=n[1]),null;
n=glu.createProgram(b,n[1]);if(!n[0])return m&&(m.textContent=n[1]+"; vShader was:"+a+"; fShader was: "+c),null;a=n[1];gl.useProgram(a);a.locations={};a.attribLocations=[];for(var e in d)c=gl.getAttribLocation(a,d[e]),a.attribLocations.push(c),a.locations[d[e]]=c;for(e in l)a.locations[l[e]]=gl.getUniformLocation(a,l[e]);return a},createArrayBuffer:function(a){var c=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,c);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(a),gl.STATIC_DRAW);return c},lookAt:function(a,
c,d){a=a/180*Math.PI;c=c/180*Math.PI;c=[Math.sin(a)*Math.cos(c),Math.cos(a)*Math.cos(c),Math.sin(c)];d=[d.x,d.y,d.z];a=vec3.create();vec3.add(a,d,c);c=mat4.create();mat4.lookAt(c,d,a,[0,0,1]);mat4.scale(c,c,[1,-1,1]);return c},init:function(){glu.anisotropyExtension=gl.getExtension("EXT_texture_filter_anisotropic");glu.anisotrophyExtension&&(glu.anisotropyExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT=gl.getParameter(glu.anisotropyExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT));glu.loseContextExtension=gl.getExtension("WEBGL_lose_context");
glu.depthTextureExtension=gl.getExtension("WEBGL_depth_texture");glu.performShadowMapping=!!glu.depthTextureExtension;var a=gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT);glu.vertexShaderMediumFloatPrecision=a.precision},loseContext:function(){glu.loseContextExtension&&glu.loseContextExtension.loseContext&&glu.loseContextExtension.loseContext()},restoreContext:function(){glu.loseContextExtension&&glu.loseContextExtension.restoreContext&&glu.loseContextExtension.restoreContext()},setMaxAnisotropy:function(){null!=
glu.anisotropyExtension&&gl.texParameterf(gl.TEXTURE_2D,glu.anisotropyExtension.TEXTURE_MAX_ANISOTROPY_EXT,glu.anisotropyExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT)},createTexture:function(a){var c=gl.createTexture();gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,c);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,gl.RGB,gl.UNSIGNED_BYTE,a);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_LINEAR);gl.texParameteri(gl.TEXTURE_2D,
gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.generateMipmap(gl.TEXTURE_2D);glu.setMaxAnisotropy();return c},createTextureFromBytes:function(a){var c=gl.createTexture();gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,c);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,1,1,0,gl.RGB,gl.UNSIGNED_BYTE,a);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_LINEAR);
gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.generateMipmap(gl.TEXTURE_2D);glu.setMaxAnisotropy();return c},updateTexture:function(a,c){gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,a);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,gl.RGB,gl.UNSIGNED_BYTE,c);gl.generateMipmap(gl.TEXTURE_2D);glu.setMaxAnisotropy()},createNpotTexture:function(a){var c=gl.createTexture();gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,
c);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,gl.RGB,gl.UNSIGNED_BYTE,a);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);return c}};var Helpers=function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return{getEarthCircumference:function(){return 12756200*Math.PI},getDayString:function(c){c=(c%366|0)+1;for(var d=0;c>a[d];d++)c-=a[d];return""+c+". "+"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" ")[d]},getColor:function(a){return Helpers.colors[a]},getWebGlFailReason:function(){var a=navigator.userAgent.toLowerCase(),d=-1<a.indexOf("android");a.indexOf("webkit");var l=-1<a.indexOf("chrome"),
m=-1<a.indexOf("firefox");-1<a.indexOf("safari")&&a.indexOf("chrome");var n=-1<a.indexOf("msie ");a.indexOf("mobile");a.indexOf("tablet");var b=-1<a.indexOf("iphone"),a=-1<a.indexOf("ipad");return!d||l||m?d&&(l||m)?"Ihr Ger\u00e4t ist vermutlich zu alt und unterst\u00fctzt keine 3D-Grafik im Browser (WebGL)":b||a?"Ihr iPhone/iPad unterst\u00fctzt keine 3D-Grafik im Browser (WebGL). M\u00f6gliche L\u00f6sung: Aktualisieren sie das Betriebssystem ('iOS') auf Version 8 oder h\u00f6her.":n?"Ihr Internet Explorer unterst\u00fctzt keine 3D-Grafik im Brwoser (WebGL). M\u00f6gliche L\u00f6sung: Aktualisieren sie den Internet Explorer auf Version 11 oder h\u00f6her":
"Ihr Browser oder ihr Ger\u00e4t unterst\u00fctzt keine 3D-Grafik im Browser (WebGL).":"Ihr Android-Browser unterst\u00fctzt anscheinend keine 3D-Grafiken (WebGL). M\u00f6gliche L\u00f6sung: Installieren und benutzen sie ein aktuelle Version der Browser 'Chrome' oder 'Firefox Mobile'"},ajaxGet:function(a,d){var l=new XMLHttpRequest;l.open("GET",a);l.overrideMimeType("text/plain");l.responseType="";l.onreadystatechange=function(){4==l.readyState&&null!=l.response&&d(l.responseText)};l.send()}}}();(function(a,c){"object"===typeof module&&"object"===typeof module.exports?module.exports=a.document?c(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return c(a)}:c(a)})("undefined"!==typeof window?window:this,function(a,c){function d(a){var b=a.length,c=f.type(a);return"function"===c||f.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function l(a,b,c){if(f.isFunction(b))return f.grep(a,function(a,s){return!!b.call(a,
s,a)!==c});if(b.nodeType)return f.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Eb.test(b))return f.filter(b,a,c);b=f.filter(b,a)}return f.grep(a,function(a){return 0<=f.inArray(a,b)!==c})}function m(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function n(a){var b=db[a]={};f.each(a.match(ga)||[],function(a,s){b[s]=!0});return b}function b(){D.addEventListener?(D.removeEventListener("DOMContentLoaded",e,!1),a.removeEventListener("load",e,!1)):(D.detachEvent("onreadystatechange",
e),a.detachEvent("onload",e))}function e(){if(D.addEventListener||"load"===event.type||"complete"===D.readyState)b(),f.ready()}function g(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(Fb,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Gb.test(c)?f.parseJSON(c):c}catch(e){}f.data(a,b,c)}else c=void 0;return c}function k(a){for(var b in a)if(("data"!==b||!f.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}
function p(a,b,c,e){if(f.acceptData(a)){var d=f.expando,g=a.nodeType,h=g?f.cache:a,k=g?a[d]:a[d]&&d;if(k&&h[k]&&(e||h[k].data)||void 0!==c||"string"!==typeof b){k||(k=g?a[d]=M.pop()||f.guid++:d);h[k]||(h[k]=g?{}:{toJSON:f.noop});if("object"===typeof b||"function"===typeof b)e?h[k]=f.extend(h[k],b):h[k].data=f.extend(h[k].data,b);a=h[k];e||(a.data||(a.data={}),a=a.data);void 0!==c&&(a[f.camelCase(b)]=c);"string"===typeof b?(c=a[b],null==c&&(c=a[f.camelCase(b)])):c=a;return c}}}function u(a,b,c){if(f.acceptData(a)){var e,
d,h=a.nodeType,g=h?f.cache:a,l=h?a[f.expando]:f.expando;if(g[l]){if(b&&(e=c?g[l]:g[l].data)){f.isArray(b)?b=b.concat(f.map(b,f.camelCase)):b in e?b=[b]:(b=f.camelCase(b),b=b in e?[b]:b.split(" "));for(d=b.length;d--;)delete e[b[d]];if(c?!k(e):!f.isEmptyObject(e))return}if(!c&&(delete g[l].data,!k(g[l])))return;h?f.cleanData([a],!0):y.deleteExpando||g!=g.window?delete g[l]:g[l]=null}}}function q(){return!0}function r(){return!1}function h(){try{return D.activeElement}catch(a){}}function w(a){var b=
eb.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function t(a,b){var c,e,d=0,g="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!g)for(g=[],c=a.childNodes||a;null!=(e=c[d]);d++)!b||f.nodeName(e,b)?g.push(e):f.merge(g,t(e,b));return void 0===b||b&&f.nodeName(a,b)?f.merge([a],g):g}function Na(a){Pa.test(a.type)&&(a.defaultChecked=a.checked)}
function Oa(a,b){return f.nodeName(a,"table")&&f.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Ca(a){a.type=(null!==f.find.attr(a,"type"))+"/"+a.type;return a}function ab(a){var b=Hb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function Ba(a,b){for(var c,e=0;null!=(c=a[e]);e++)f._data(c,"globalEval",!b||f._data(b[e],"globalEval"))}function bb(a,b){if(1===b.nodeType&&f.hasData(a)){var c,
e,d;e=f._data(a);var g=f._data(b,e),h=e.events;if(h)for(c in delete g.handle,g.events={},h)for(e=0,d=h[c].length;e<d;e++)f.event.add(b,c,h[c][e]);g.data&&(g.data=f.extend({},g.data))}}function cb(b,c){var e,d=f(c.createElement(b)).appendTo(c.body),g=a.getDefaultComputedStyle&&(e=a.getDefaultComputedStyle(d[0]))?e.display:f.css(d[0],"display");d.detach();return g}function Da(a){var b=D,c=fb[a];c||(c=cb(a,b),"none"!==c&&c||(ha=(ha||f("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),
b=(ha[0].contentWindow||ha[0].contentDocument).document,b.write(),b.close(),c=cb(a,b),ha.detach()),fb[a]=c);return c}function X(a,b){return{get:function(){var c=a();if(null!=c)if(c)delete this.get;else return(this.get=b).apply(this,arguments)}}}function Q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),e=b,f=gb.length;f--;)if(b=gb[f]+c,b in a)return b;return e}function K(a,b){for(var c,e,d,g=[],h=0,k=a.length;h<k;h++)e=a[h],e.style&&(g[h]=f._data(e,"olddisplay"),c=e.style.display,
b?(g[h]||"none"!==c||(e.style.display=""),""===e.style.display&&xa(e)&&(g[h]=f._data(e,"olddisplay",Da(e.nodeName)))):(d=xa(e),(c&&"none"!==c||!d)&&f._data(e,"olddisplay",d?c:f.css(e,"display"))));for(h=0;h<k;h++)e=a[h],!e.style||b&&"none"!==e.style.display&&""!==e.style.display||(e.style.display=b?g[h]||"":"none");return a}function x(a,b,c){return(a=Ib.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function A(a,b,c,e,d){b=c===(e?"border":"content")?4:"width"===b?1:0;for(var g=0;4>b;b+=2)"margin"===
c&&(g+=f.css(a,c+ba[b],!0,d)),e?("content"===c&&(g-=f.css(a,"padding"+ba[b],!0,d)),"margin"!==c&&(g-=f.css(a,"border"+ba[b]+"Width",!0,d))):(g+=f.css(a,"padding"+ba[b],!0,d),"padding"!==c&&(g+=f.css(a,"border"+ba[b]+"Width",!0,d)));return g}function z(a,b,c){var e=!0,d="width"===b?a.offsetWidth:a.offsetHeight,g=na(a),h=y.boxSizing&&"border-box"===f.css(a,"boxSizing",!1,g);if(0>=d||null==d){d=oa(a,b,g);if(0>d||null==d)d=a.style[b];if(Ea.test(d))return d;e=h&&(y.boxSizingReliable()||d===a.style[b]);
d=parseFloat(d)||0}return d+A(a,b,c||(h?"border":"content"),e,g)+"px"}function v(a,b,c,e,f){return new v.prototype.init(a,b,c,e,f)}function H(){setTimeout(function(){sa=void 0});return sa=f.now()}function F(a,b){var c,e={height:a},f=0;for(b=b?1:0;4>f;f+=2-b)c=ba[f],e["margin"+c]=e["padding"+c]=a;b&&(e.opacity=e.width=a);return e}function I(a,b,c){for(var e,f=(qa[b]||[]).concat(qa["*"]),d=0,g=f.length;d<g;d++)if(e=f[d].call(c,b,a))return e}function G(a,b){var c,e,d,g,h;for(c in a)if(e=f.camelCase(c),
d=b[e],g=a[c],f.isArray(g)&&(d=g[1],g=a[c]=g[0]),c!==e&&(a[e]=g,delete a[c]),(h=f.cssHooks[e])&&"expand"in h)for(c in g=h.expand(g),delete a[e],g)c in a||(a[c]=g[c],b[c]=d);else b[e]=d}function S(a,b,c){var e,d=0,g=Fa.length,h=f.Deferred().always(function(){delete k.elem}),k=function(){if(e)return!1;for(var b=sa||H(),b=Math.max(0,l.startTime+l.duration-b),c=1-(b/l.duration||0),C=0,f=l.tweens.length;C<f;C++)l.tweens[C].run(c);h.notifyWith(a,[l,c,b]);if(1>c&&f)return b;h.resolveWith(a,[l]);return!1},
l=h.promise({elem:a,props:f.extend({},b),opts:f.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:sa||H(),duration:c.duration,tweens:[],createTween:function(b,c){var C=f.Tween(a,l.opts,b,c,l.opts.specialEasing[b]||l.opts.easing);l.tweens.push(C);return C},stop:function(b){var c=0,C=b?l.tweens.length:0;if(e)return this;for(e=!0;c<C;c++)l.tweens[c].run(1);b?h.resolveWith(a,[l,b]):h.rejectWith(a,[l,b]);return this}});c=l.props;for(G(c,l.opts.specialEasing);d<g;d++)if(b=
Fa[d].call(l,a,c,l.opts))return b;f.map(c,I,l);f.isFunction(l.opts.start)&&l.opts.start.call(a,l);f.fx.timer(f.extend(k,{elem:a,anim:l,queue:l.opts.queue}));return l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function T(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var e,d=0,g=b.toLowerCase().match(ga)||[];if(f.isFunction(c))for(;e=g[d++];)"+"===e.charAt(0)?(e=e.slice(1)||"*",(a[e]=a[e]||[]).unshift(c)):(a[e]=a[e]||[]).push(c)}}function U(a,
b,c,e){function d(k){var l;g[k]=!0;f.each(a[k]||[],function(a,s){var f=s(b,c,e);if("string"===typeof f&&!h&&!g[f])return b.dataTypes.unshift(f),d(f),!1;if(h)return!(l=f)});return l}var g={},h=a===Qa;return d(b.dataTypes[0])||!g["*"]&&d("*")}function P(a,b){var c,e,d=f.ajaxSettings.flatOptions||{};for(e in b)void 0!==b[e]&&((d[e]?a:c||(c={}))[e]=b[e]);c&&f.extend(!0,a,c);return a}function V(a,b,c,e){var d;if(f.isArray(b))f.each(b,function(b,C){c||Jb.test(a)?e(a,C):V(a+"["+("object"===typeof C?b:"")+
"]",C,c,e)});else if(c||"object"!==f.type(b))e(a,b);else for(d in b)V(a+"["+d+"]",b[d],c,e)}function Z(){try{return new a.XMLHttpRequest}catch(b){}}function R(a){return f.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var M=[],J=M.slice,hb=M.concat,Ra=M.push,ib=M.indexOf,Ga={},Kb=Ga.toString,ia=Ga.hasOwnProperty,y={},f=function(a,b){return new f.fn.init(a,b)},Lb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Mb=/^-ms-/,Nb=/-([\da-z])/gi,Ob=function(a,b){return b.toUpperCase()};f.fn=f.prototype=
{jquery:"1.11.1",constructor:f,selector:"",length:0,toArray:function(){return J.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:J.call(this)},pushStack:function(a){a=f.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,b){return f.each(this,a,b)},map:function(a){return this.pushStack(f.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},
last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Ra,sort:M.sort,splice:M.splice};f.extend=f.fn.extend=function(){var a,b,c,e,d,g=arguments[0]||{},h=1,k=arguments.length,l=!1;"boolean"===typeof g&&(l=g,g=arguments[h]||{},h++);"object"===typeof g||f.isFunction(g)||(g={});h===k&&(g=this,h--);for(;h<k;h++)if(null!=(d=arguments[h]))for(e in d)a=g[e],c=d[e],
g!==c&&(l&&c&&(f.isPlainObject(c)||(b=f.isArray(c)))?(b?(b=!1,a=a&&f.isArray(a)?a:[]):a=a&&f.isPlainObject(a)?a:{},g[e]=f.extend(l,a,c)):void 0!==c&&(g[e]=c));return g};f.extend({expando:"jQuery"+("1.11.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===f.type(a)},isArray:Array.isArray||function(a){return"array"===f.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!f.isArray(a)&&
0<=a-parseFloat(a)},isEmptyObject:function(a){for(var b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==f.type(a)||a.nodeType||f.isWindow(a))return!1;try{if(a.constructor&&!ia.call(a,"constructor")&&!ia.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(y.ownLast)for(b in a)return ia.call(a,b);for(b in a);return void 0===b||ia.call(a,b)},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?Ga[Kb.call(a)]||"object":typeof a},
globalEval:function(b){b&&f.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(Mb,"ms-").replace(Nb,Ob)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e,f=0,g=a.length;e=d(a);if(c)if(e)for(;f<g&&(e=b.apply(a[f],c),!1!==e);f++);else for(f in a){if(e=b.apply(a[f],c),!1===e)break}else if(e)for(;f<g&&(e=b.call(a[f],f,a[f]),!1!==e);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),!1===e)break;return a},
trim:function(a){return null==a?"":(a+"").replace(Lb,"")},makeArray:function(a,b){var c=b||[];null!=a&&(d(Object(a))?f.merge(c,"string"===typeof a?[a]:a):Ra.call(c,a));return c},inArray:function(a,b,c){var e;if(b){if(ib)return ib.call(b,a,c);e=b.length;for(c=c?0>c?Math.max(0,e+c):c:0;c<e;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,e=0,f=a.length;e<c;)a[f++]=b[e++];if(c!==c)for(;void 0!==b[e];)a[f++]=b[e++];a.length=f;return a},grep:function(a,b,c){for(var e=
[],f=0,d=a.length,g=!c;f<d;f++)c=!b(a[f],f),c!==g&&e.push(a[f]);return e},map:function(a,b,c){var e,f=0,g=a.length,h=[];if(d(a))for(;f<g;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return hb.apply([],h)},guid:1,proxy:function(a,b){var c,e;"string"===typeof b&&(e=a[b],b=a,a=e);if(f.isFunction(a))return c=J.call(arguments,2),e=function(){return a.apply(b||this,c.concat(J.call(arguments)))},e.guid=a.guid=a.guid||f.guid++,e},now:function(){return+new Date},support:y});
f.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){Ga["[object "+b+"]"]=b.toLowerCase()});var va=function(a){function b(a,c,s,e){var f,d,C,g,B;(c?c.ownerDocument||c:ja)!==ca&&K(c);c=c||ca;s=s||[];if(!a||"string"!==typeof a)return s;if(1!==(g=c.nodeType)&&9!==g)return[];if(M&&!e){if(f=xa.exec(a))if(C=f[1])if(9===g)if((d=c.getElementById(C))&&d.parentNode){if(d.id===C)return s.push(d),s}else return s;else{if(c.ownerDocument&&(d=c.ownerDocument.getElementById(C))&&
P(c,d)&&d.id===C)return s.push(d),s}else{if(f[2])return Y.apply(s,c.getElementsByTagName(a)),s;if((C=f[3])&&v.getElementsByClassName&&c.getElementsByClassName)return Y.apply(s,c.getElementsByClassName(C)),s}if(v.qsa&&(!da||!da.test(a))){d=f=W;C=c;B=9===g&&a;if(1===g&&"object"!==c.nodeName.toLowerCase()){g=z(a);(f=c.getAttribute("id"))?d=f.replace(za,"\\$&"):c.setAttribute("id",d);d="[id='"+d+"'] ";for(C=g.length;C--;)g[C]=d+n(g[C]);C=qa.test(a)&&p(c.parentNode)||c;B=g.join(",")}if(B)try{return Y.apply(s,
C.querySelectorAll(B)),s}catch(h){}finally{f||c.removeAttribute("id")}}}return F(a.replace(fa,"$1"),c,s,e)}function c(){function a(c,s){b.push(c+" ")>E.cacheLength&&delete a[b.shift()];return a[c+" "]=s}var b=[];return a}function e(a){a[W]=!0;return a}function f(a){var b=ca.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function d(a,b){for(var c=a.split("|"),s=a.length;s--;)E.attrHandle[c[s]]=b}function g(a,b){var c=b&&a,s=c&&1===a.nodeType&&
1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(s)return s;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function l(a){return e(function(b){b=+b;return e(function(c,s){for(var e,f=a([],c.length,b),d=f.length;d--;)c[e=f[d]]&&(c[e]=!(s[e]=c[e]))})})}function p(a){return a&&
"undefined"!==typeof a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,s="";b<c;b++)s+=a[b].value;return s}function q(a,b,c){var s=b.dir,e=c&&"parentNode"===s,f=V++;return b.first?function(b,c,f){for(;b=b[s];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,d){var C,g,B=[ka,f];if(d)for(;b=b[s];){if((1===b.nodeType||e)&&a(b,c,d))return!0}else for(;b=b[s];)if(1===b.nodeType||e){g=b[W]||(b[W]={});if((C=g[s])&&C[0]===ka&&C[1]===f)return B[2]=C[2];g[s]=B;if(B[2]=a(b,c,d))return!0}}}
function r(a){return 1<a.length?function(b,c,s){for(var e=a.length;e--;)if(!a[e](b,c,s))return!1;return!0}:a[0]}function u(a,b,c,s,e){for(var f,d=[],C=0,g=a.length,B=null!=b;C<g;C++)if(f=a[C])if(!c||c(f,s,e))d.push(f),B&&b.push(C);return d}function t(a,c,s,f,d,g){f&&!f[W]&&(f=t(f));d&&!d[W]&&(d=t(d,g));return e(function(e,g,B,h){var k,N,l=[],p=[],O=g.length,aa;if(!(aa=e)){aa=c||"*";for(var m=B.nodeType?[B]:B,n=[],Aa=0,q=m.length;Aa<q;Aa++)b(aa,m[Aa],n);aa=n}aa=!a||!e&&c?aa:u(aa,l,a,B,h);m=s?d||(e?
a:O||f)?[]:g:aa;s&&s(aa,m,B,h);if(f)for(k=u(m,p),f(k,[],B,h),B=k.length;B--;)if(N=k[B])m[p[B]]=!(aa[p[B]]=N);if(e){if(d||a){if(d){k=[];for(B=m.length;B--;)(N=m[B])&&k.push(aa[B]=N);d(null,m=[],k,h)}for(B=m.length;B--;)(N=m[B])&&-1<(k=d?ba.call(e,N):l[B])&&(e[k]=!(g[k]=N))}}else m=u(m===g?m.splice(O,m.length):m),d?d(null,g,m,h):Y.apply(g,m)})}function w(a){var b,c,s,e=a.length,f=E.relative[a[0].type];c=f||E.relative[" "];for(var d=f?1:0,C=q(function(a){return a===b},c,!0),g=q(function(a){return-1<
ba.call(b,a)},c,!0),B=[function(a,c,s){return!f&&(s||c!==I)||((b=c).nodeType?C(a,c,s):g(a,c,s))}];d<e;d++)if(c=E.relative[a[d].type])B=[q(r(B),c)];else{c=E.filter[a[d].type].apply(null,a[d].matches);if(c[W]){for(s=++d;s<e&&!E.relative[a[s].type];s++);return t(1<d&&r(B),1<d&&n(a.slice(0,d-1).concat({value:" "===a[d-2].type?"*":""})).replace(fa,"$1"),c,d<s&&w(a.slice(d,s)),s<e&&w(a=a.slice(s)),s<e&&n(a))}B.push(c)}return r(B)}function y(a,c){var s=0<c.length,f=0<a.length,d=function(e,d,g,B,h){var k,
N,l,p=0,O="0",aa=e&&[],m=[],n=I,Aa=e||f&&E.find.TAG("*",h),q=ka+=null==n?1:Math.random()||.1,r=Aa.length;for(h&&(I=d!==ca&&d);O!==r&&null!=(k=Aa[O]);O++){if(f&&k){for(N=0;l=a[N++];)if(l(k,d,g)){B.push(k);break}h&&(ka=q)}s&&((k=!l&&k)&&p--,e&&aa.push(k))}p+=O;if(s&&O!==p){for(N=0;l=c[N++];)l(aa,m,d,g);if(e){if(0<p)for(;O--;)aa[O]||m[O]||(m[O]=ea.call(B));m=u(m)}Y.apply(B,m);h&&!e&&0<m.length&&1<p+c.length&&b.uniqueSort(B)}h&&(ka=q,I=n);return aa};return s?e(d):d}var x,v,E,A,D,z,H,F,I,G,J,K,ca,pa,M,
da,ya,Q,P,W="sizzle"+-new Date,ja=a.document,ka=0,V=0,S=c(),T=c(),U=c(),X=function(a,b){a===b&&(J=!0);return 0},Z={}.hasOwnProperty,R=[],ea=R.pop,ga=R.push,Y=R.push,ma=R.slice,ba=R.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},na="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),oa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+na+
"))|)[\\x20\\t\\r\\n\\f]*\\]",la=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oa+")*)|.*)\\)|)",fa=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),ra=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Na=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Ca=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),Ba=new RegExp(la),sa=new RegExp("^"+na+"$"),ia={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+oa),PSEUDO:new RegExp("^"+la),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},
va=/^(?:input|select|textarea|button)$/i,wa=/^h\d$/i,ha=/^[^{]+\{\s*\[native \w/,xa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qa=/[+~]/,za=/'|\\/g,ta=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ua=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{Y.apply(R=ma.call(ja.childNodes),ja.childNodes),R[ja.childNodes.length].nodeType}catch(Oa){Y={apply:R.length?function(a,b){ga.apply(a,ma.call(b))}:
function(a,b){for(var c=a.length,s=0;a[c++]=b[s++];);a.length=c-1}}}v=b.support={};D=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};K=b.setDocument=function(a){var b=a?a.ownerDocument||a:ja;a=b.defaultView;if(b===ca||9!==b.nodeType||!b.documentElement)return ca;ca=b;pa=b.documentElement;M=!D(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){K()},!1):a.attachEvent&&a.attachEvent("onunload",function(){K()}));v.attributes=f(function(a){a.className=
"i";return!a.getAttribute("className")});v.getElementsByTagName=f(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});v.getElementsByClassName=ha.test(b.getElementsByClassName)&&f(function(a){a.innerHTML="<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});v.getById=f(function(a){pa.appendChild(a).id=W;return!b.getElementsByName||!b.getElementsByName(W).length});v.getById?(E.find.ID=function(a,
b){if("undefined"!==typeof b.getElementById&&M){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},E.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}}):(delete E.find.ID,E.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});E.find.TAG=v.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:
function(a,b){var c,s=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&s.push(c);return s}return f};E.find.CLASS=v.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&M)return b.getElementsByClassName(a)};ya=[];da=[];if(v.qsa=ha.test(b.querySelectorAll))f(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&da.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");
a.querySelectorAll("[selected]").length||da.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||da.push(":checked")}),f(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&da.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||
da.push(":enabled",":disabled");a.querySelectorAll("*,:x");da.push(",.*:")});(v.matchesSelector=ha.test(Q=pa.matches||pa.webkitMatchesSelector||pa.mozMatchesSelector||pa.oMatchesSelector||pa.msMatchesSelector))&&f(function(a){v.disconnectedMatch=Q.call(a,"div");Q.call(a,"[s!='']:x");ya.push("!=",la)});da=da.length&&new RegExp(da.join("|"));ya=ya.length&&new RegExp(ya.join("|"));P=(a=ha.test(pa.compareDocumentPosition))||ha.test(pa.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,s=
b&&b.parentNode;return a===s||!!(s&&1===s.nodeType&&(c.contains?c.contains(s):a.compareDocumentPosition&&a.compareDocumentPosition(s)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};X=a?function(a,c){if(a===c)return J=!0,0;var s=!a.compareDocumentPosition-!c.compareDocumentPosition;if(s)return s;s=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return s&1||!v.sortDetached&&c.compareDocumentPosition(a)===s?a===b||a.ownerDocument===ja&&P(ja,a)?-1:
c===b||c.ownerDocument===ja&&P(ja,c)?1:G?ba.call(G,a)-ba.call(G,c):0:s&4?-1:1}:function(a,c){if(a===c)return J=!0,0;var s,e=0;s=a.parentNode;var f=c.parentNode,d=[a],C=[c];if(!s||!f)return a===b?-1:c===b?1:s?-1:f?1:G?ba.call(G,a)-ba.call(G,c):0;if(s===f)return g(a,c);for(s=a;s=s.parentNode;)d.unshift(s);for(s=c;s=s.parentNode;)C.unshift(s);for(;d[e]===C[e];)e++;return e?g(d[e],C[e]):d[e]===ja?-1:C[e]===ja?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,
c){(a.ownerDocument||a)!==ca&&K(a);c=c.replace(Ca,"='$1']");if(!(!v.matchesSelector||!M||ya&&ya.test(c)||da&&da.test(c)))try{var s=Q.call(a,c);if(s||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return s}catch(e){}return 0<b(c,ca,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==ca&&K(a);return P(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==ca&&K(a);var c=E.attrHandle[b.toLowerCase()],c=c&&Z.call(E.attrHandle,b.toLowerCase())?c(a,b,!M):void 0;return void 0!==c?c:v.attributes||
!M?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],s=0,e=0;J=!v.detectDuplicates;G=!v.sortStable&&a.slice(0);a.sort(X);if(J){for(;b=a[e++];)b===a[e]&&(s=c.push(e));for(;s--;)a.splice(c[s],1)}G=null;return a};A=b.getText=function(a){var b,c="",s=0;b=a.nodeType;if(!b)for(;b=a[s++];)c+=A(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;
for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===b||4===b)return a.nodeValue;return c};E=b.selectors={cacheLength:50,createPseudo:e,match:ia,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ta,ua);a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===
a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(ia.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":c&&Ba.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&
a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&S(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,s){return function(e){e=b.attr(e,a);if(null==e)return"!="===c;if(!c)return!0;e+="";return"="===c?e===s:"!="===c?e!==s:"^="===c?s&&0===e.indexOf(s):"*="===c?s&&-1<e.indexOf(s):"$="===c?s&&e.slice(-s.length)===
s:"~="===c?-1<(" "+e+" ").indexOf(s):"|="===c?e===s||e.slice(0,s.length+1)===s+"-":!1}},CHILD:function(a,b,c,s,e){var f="nth"!==a.slice(0,3),d="last"!==a.slice(-4),C="of-type"===b;return 1===s&&0===e?function(a){return!!a.parentNode}:function(b,c,g){var B,h,k,N,l;c=f!==d?"nextSibling":"previousSibling";var p=b.parentNode,O=C&&b.nodeName.toLowerCase();g=!g&&!C;if(p){if(f){for(;c;){for(h=b;h=h[c];)if(C?h.nodeName.toLowerCase()===O:1===h.nodeType)return!1;l=c="only"===a&&!l&&"nextSibling"}return!0}l=
[d?p.firstChild:p.lastChild];if(d&&g)for(g=p[W]||(p[W]={}),B=g[a]||[],N=B[0]===ka&&B[1],k=B[0]===ka&&B[2],h=N&&p.childNodes[N];h=++N&&h&&h[c]||(k=N=0)||l.pop();){if(1===h.nodeType&&++k&&h===b){g[a]=[ka,N,k];break}}else if(g&&(B=(b[W]||(b[W]={}))[a])&&B[0]===ka)k=B[1];else for(;(h=++N&&h&&h[c]||(k=N=0)||l.pop())&&((C?h.nodeName.toLowerCase()!==O:1!==h.nodeType)||!++k||(g&&((h[W]||(h[W]={}))[a]=[ka,k]),h!==b)););k-=e;return k===s||0===k%s&&0<=k/s}}},PSEUDO:function(a,c){var s,f=E.pseudos[a]||E.setFilters[a.toLowerCase()]||
b.error("unsupported pseudo: "+a);return f[W]?f(c):1<f.length?(s=[a,a,"",c],E.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,b){for(var s,e=f(a,c),d=e.length;d--;)s=ba.call(a,e[d]),a[s]=!(b[s]=e[d])}):function(a){return f(a,0,s)}):f}},pseudos:{not:e(function(a){var b=[],c=[],s=H(a.replace(fa,"$1"));return s[W]?e(function(a,b,c,e){e=s(a,null,e,[]);for(var f=a.length;f--;)if(c=e[f])a[f]=!(b[f]=c)}):function(a,e,f){b[0]=a;s(b,null,f,c);return!c.pop()}}),has:e(function(a){return function(c){return 0<
b(a,c).length}}),contains:e(function(a){return function(b){return-1<(b.textContent||b.innerText||A(b)).indexOf(a)}}),lang:e(function(a){sa.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ta,ua).toLowerCase();return function(b){var c;do if(c=M?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===
pa},focus:function(a){return a===ca.activeElement&&(!ca.hasFocus||ca.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!E.pseudos.empty(a)},
header:function(a){return wa.test(a.nodeName)},input:function(a){return va.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[0>c?c+b:c]}),even:l(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),
odd:l(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:l(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};E.pseudos.nth=E.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[x]=h(x);for(x in{submit:!0,reset:!0})E.pseudos[x]=k(x);m.prototype=E.filters=E.pseudos;E.setFilters=new m;z=b.tokenize=function(a,c){var s,e,f,d,g,B,h;if(g=T[a+" "])return c?0:g.slice(0);g=a;B=[];for(h=E.preFilter;g;){if(!s||
(e=ra.exec(g)))e&&(g=g.slice(e[0].length)||g),B.push(f=[]);s=!1;if(e=Na.exec(g))s=e.shift(),f.push({value:s,type:e[0].replace(fa," ")}),g=g.slice(s.length);for(d in E.filter)!(e=ia[d].exec(g))||h[d]&&!(e=h[d](e))||(s=e.shift(),f.push({value:s,type:d,matches:e}),g=g.slice(s.length));if(!s)break}return c?g.length:g?b.error(a):T(a,B).slice(0)};H=b.compile=function(a,b){var c,s=[],e=[],f=U[a+" "];if(!f){b||(b=z(a));for(c=b.length;c--;)f=w(b[c]),f[W]?s.push(f):e.push(f);f=U(a,y(e,s));f.selector=a}return f};
F=b.select=function(a,b,c,s){var e,f,d,C,g="function"===typeof a&&a,B=!s&&z(a=g.selector||a);c=c||[];if(1===B.length){f=B[0]=B[0].slice(0);if(2<f.length&&"ID"===(d=f[0]).type&&v.getById&&9===b.nodeType&&M&&E.relative[f[1].type]){b=(E.find.ID(d.matches[0].replace(ta,ua),b)||[])[0];if(!b)return c;g&&(b=b.parentNode);a=a.slice(f.shift().value.length)}for(e=ia.needsContext.test(a)?0:f.length;e--;){d=f[e];if(E.relative[C=d.type])break;if(C=E.find[C])if(s=C(d.matches[0].replace(ta,ua),qa.test(f[0].type)&&
p(b.parentNode)||b)){f.splice(e,1);a=s.length&&n(f);if(!a)return Y.apply(c,s),c;break}}}(g||H(a,B))(s,b,!M,c,qa.test(a)&&p(b.parentNode)||b);return c};v.sortStable=W.split("").sort(X).join("")===W;v.detectDuplicates=!!J;K();v.sortDetached=f(function(a){return a.compareDocumentPosition(ca.createElement("div"))&1});f(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||d("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?
1:2)});v.attributes&&f(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||d("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});f(function(a){return null==a.getAttribute("disabled")})||d("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var s;if(!c)return!0===a[b]?b.toLowerCase():(s=a.getAttributeNode(b))&&
s.specified?s.value:null});return b}(a);f.find=va;f.expr=va.selectors;f.expr[":"]=f.expr.pseudos;f.unique=va.uniqueSort;f.text=va.getText;f.isXMLDoc=va.isXML;f.contains=va.contains;var jb=f.expr.match.needsContext,kb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Eb=/^.[^:#\[\.,]*$/;f.filter=function(a,b,c){var e=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===e.nodeType?f.find.matchesSelector(e,a)?[e]:[]:f.find.matches(a,f.grep(b,function(a){return 1===a.nodeType}))};f.fn.extend({find:function(a){var b,c=[],e=
this,d=e.length;if("string"!==typeof a)return this.pushStack(f(a).filter(function(){for(b=0;b<d;b++)if(f.contains(e[b],this))return!0}));for(b=0;b<d;b++)f.find(a,e[b],c);c=this.pushStack(1<d?f.unique(c):c);c.selector=this.selector?this.selector+" "+a:a;return c},filter:function(a){return this.pushStack(l(this,a||[],!1))},not:function(a){return this.pushStack(l(this,a||[],!0))},is:function(a){return!!l(this,"string"===typeof a&&jb.test(a)?f(a):a||[],!1).length}});var za,D=a.document,Qb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
(f.fn.init=function(a,b){var c,e;if(!a)return this;if("string"===typeof a){c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Qb.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||za).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof f?b[0]:b,f.merge(this,f.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:D,!0)),kb.test(c[1])&&f.isPlainObject(b))for(c in b)if(f.isFunction(this[c]))this[c](b[c]);else this.attr(c,b[c])}else{if((e=D.getElementById(c[2]))&&e.parentNode){if(e.id!==
c[2])return za.find(a);this.length=1;this[0]=e}this.context=D;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(f.isFunction(a))return"undefined"!==typeof za.ready?za.ready(a):a(f);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return f.makeArray(a,this)}).prototype=f.fn;za=f(D);var Rb=/^(?:parents|prev(?:Until|All))/,Sb={children:!0,contents:!0,next:!0,prev:!0};f.extend({dir:function(a,b,c){var e=[];for(a=a[b];a&&9!==a.nodeType&&
(void 0===c||1!==a.nodeType||!f(a).is(c));)1===a.nodeType&&e.push(a),a=a[b];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});f.fn.extend({has:function(a){var b,c=f(a,this),e=c.length;return this.filter(function(){for(b=0;b<e;b++)if(f.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,e=0,d=this.length,g=[],h=jb.test(a)||"string"!==typeof a?f(a,b||this.context):0;e<d;e++)for(c=this[e];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&
(h?-1<h.index(c):1===c.nodeType&&f.find.matchesSelector(c,a))){g.push(c);break}return this.pushStack(1<g.length?f.unique(g):g)},index:function(a){return a?"string"===typeof a?f.inArray(this[0],f(a)):f.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(f.unique(f.merge(this.get(),f(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});f.each({parent:function(a){return(a=a.parentNode)&&
11!==a.nodeType?a:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return m(a,"nextSibling")},prev:function(a){return m(a,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.merge([],a.childNodes)}},function(a,b){f.fn[a]=function(c,e){var d=f.map(this,b,c);"Until"!==a.slice(-5)&&(e=c);e&&"string"===typeof e&&(d=f.filter(e,d));1<this.length&&(Sb[a]||(d=f.unique(d)),Rb.test(a)&&(d=d.reverse()));return this.pushStack(d)}});var ga=/\S+/g,db={};f.Callbacks=function(a){a="string"===typeof a?db[a]||n(a):f.extend({},
a);var b,c,e,d,g,h,k=[],l=!a.once&&[],p=function(f){c=a.memory&&f;e=!0;g=h||0;h=0;d=k.length;for(b=!0;k&&g<d;g++)if(!1===k[g].apply(f[0],f[1])&&a.stopOnFalse){c=!1;break}b=!1;k&&(l?l.length&&p(l.shift()):c?k=[]:m.disable())},m={add:function(){if(k){var e=k.length;(function Pb(b){f.each(b,function(b,c){var e=f.type(c);"function"===e?a.unique&&m.has(c)||k.push(c):c&&c.length&&"string"!==e&&Pb(c)})})(arguments);b?d=k.length:c&&(h=e,p(c))}return this},remove:function(){k&&f.each(arguments,function(a,
c){for(var s;-1<(s=f.inArray(c,k,s));)k.splice(s,1),b&&(s<=d&&d--,s<=g&&g--)});return this},has:function(a){return a?-1<f.inArray(a,k):!(!k||!k.length)},empty:function(){k=[];d=0;return this},disable:function(){k=l=c=void 0;return this},disabled:function(){return!k},lock:function(){l=void 0;c||m.disable();return this},locked:function(){return!l},fireWith:function(a,c){!k||e&&!l||(c=c||[],c=[a,c.slice?c.slice():c],b?l.push(c):p(c));return this},fire:function(){m.fireWith(this,arguments);return this},
fired:function(){return!!e}};return m};f.extend({Deferred:function(a){var b=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],c="pending",e={state:function(){return c},always:function(){d.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return f.Deferred(function(c){f.each(b,function(b,s){var g=f.isFunction(a[b])&&a[b];d[s[1]](function(){var a=g&&g.apply(this,arguments);
if(a&&f.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[s[0]+"With"](this===e?c.promise():this,g?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?f.extend(a,e):e}},d={};e.pipe=e.then;f.each(b,function(a,s){var f=s[2],g=s[3];e[s[1]]=f.add;g&&f.add(function(){c=g},b[a^1][2].disable,b[2][2].lock);d[s[0]]=function(){d[s[0]+"With"](this===d?e:this,arguments);return this};d[s[0]+"With"]=f.fireWith});e.promise(d);a&&a.call(d,d);return d},
when:function(a){var b=0,c=J.call(arguments),e=c.length,d=1!==e||a&&f.isFunction(a.promise)?e:0,g=1===d?a:f.Deferred(),h=function(a,b,c){return function(s){b[a]=this;c[a]=1<arguments.length?J.call(arguments):s;c===k?g.notifyWith(b,c):--d||g.resolveWith(b,c)}},k,l,p;if(1<e)for(k=Array(e),l=Array(e),p=Array(e);b<e;b++)c[b]&&f.isFunction(c[b].promise)?c[b].promise().done(h(b,p,c)).fail(g.reject).progress(h(b,l,k)):--d;d||g.resolveWith(p,c);return g.promise()}});var Ha;f.fn.ready=function(a){f.ready.promise().done(a);
return this};f.extend({isReady:!1,readyWait:1,holdReady:function(a){a?f.readyWait++:f.ready(!0)},ready:function(a){if(!0===a?!--f.readyWait:!f.isReady){if(!D.body)return setTimeout(f.ready);f.isReady=!0;!0!==a&&0<--f.readyWait||(Ha.resolveWith(D,[f]),f.fn.triggerHandler&&(f(D).triggerHandler("ready"),f(D).off("ready")))}}});f.ready.promise=function(c){if(!Ha)if(Ha=f.Deferred(),"complete"===D.readyState)setTimeout(f.ready);else if(D.addEventListener)D.addEventListener("DOMContentLoaded",e,!1),a.addEventListener("load",
e,!1);else{D.attachEvent("onreadystatechange",e);a.attachEvent("onload",e);var d=!1;try{d=null==a.frameElement&&D.documentElement}catch(g){}d&&d.doScroll&&function O(){if(!f.isReady){try{d.doScroll("left")}catch(a){return setTimeout(O,50)}b();f.ready()}}()}return Ha.promise(c)};for(var Tb in f(y))break;y.ownLast="0"!==Tb;y.inlineBlockNeedsLayout=!1;f(function(){var a,b,c;(b=D.getElementsByTagName("body")[0])&&b.style&&(a=D.createElement("div"),c=D.createElement("div"),c.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",
b.appendChild(c).appendChild(a),"undefined"!==typeof a.style.zoom&&(a.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",y.inlineBlockNeedsLayout=a=3===a.offsetWidth)&&(b.style.zoom=1),b.removeChild(c))});(function(){var a=D.createElement("div");if(null==y.deleteExpando){y.deleteExpando=!0;try{delete a.test}catch(b){y.deleteExpando=!1}}})();f.acceptData=function(a){var b=f.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||!0!==b&&a.getAttribute("classid")===
b};var Gb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Fb=/([A-Z])/g;f.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!k(a)},data:function(a,b,c){return p(a,b,c)},removeData:function(a,b){return u(a,b)},_data:function(a,b,c){return p(a,b,c,!0)},_removeData:function(a,b){return u(a,b,!0)}});f.fn.extend({data:function(a,b){var c,e,d,h=this[0],k=h&&h.attributes;if(void 0===a){if(this.length&&
(d=f.data(h),1===h.nodeType&&!f._data(h,"parsedAttrs"))){for(c=k.length;c--;)k[c]&&(e=k[c].name,0===e.indexOf("data-")&&(e=f.camelCase(e.slice(5)),g(h,e,d[e])));f._data(h,"parsedAttrs",!0)}return d}return"object"===typeof a?this.each(function(){f.data(this,a)}):1<arguments.length?this.each(function(){f.data(this,a,b)}):h?g(h,a,f.data(h,a)):void 0},removeData:function(a){return this.each(function(){f.removeData(this,a)})}});f.extend({queue:function(a,b,c){var e;if(a)return b=(b||"fx")+"queue",e=f._data(a,
b),c&&(!e||f.isArray(c)?e=f._data(a,b,f.makeArray(c)):e.push(c)),e||[]},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),e=c.length,d=c.shift(),g=f._queueHooks(a,b),h=function(){f.dequeue(a,b)};"inprogress"===d&&(d=c.shift(),e--);d&&("fx"===b&&c.unshift("inprogress"),delete g.stop,d.call(a,h,g));!e&&g&&g.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return f._data(a,c)||f._data(a,c,{empty:f.Callbacks("once memory").add(function(){f._removeData(a,b+"queue");f._removeData(a,c)})})}});
f.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?f.queue(this[0],a):void 0===b?this:this.each(function(){var c=f.queue(this,a,b);f._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,e=1,d=f.Deferred(),g=this,h=this.length,k=function(){--e||d.resolveWith(g,[g])};"string"!==
typeof a&&(b=a,a=void 0);for(a=a||"fx";h--;)(c=f._data(g[h],a+"queueHooks"))&&c.empty&&(e++,c.empty.add(k));k();return d.promise(b)}});var Ia=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ba=["Top","Right","Bottom","Left"],xa=function(a,b){a=b||a;return"none"===f.css(a,"display")||!f.contains(a.ownerDocument,a)},la=f.access=function(a,b,c,e,d,g,h){var k=0,l=a.length,p=null==c;if("object"===f.type(c))for(k in d=!0,c)f.access(a,b,k,c[k],!0,g,h);else if(void 0!==e&&(d=!0,f.isFunction(e)||(h=!0),p&&(h?
(b.call(a,e),b=null):(p=b,b=function(a,b,c){return p.call(f(a),c)})),b))for(;k<l;k++)b(a[k],c,h?e:e.call(a[k],k,b(a[k],c)));return d?a:p?b.call(a):l?b(a[0],c):g},Pa=/^(?:checkbox|radio)$/i;(function(){var a=D.createElement("input"),b=D.createElement("div"),c=D.createDocumentFragment();b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";y.leadingWhitespace=3===b.firstChild.nodeType;y.tbody=!b.getElementsByTagName("tbody").length;y.htmlSerialize=!!b.getElementsByTagName("link").length;
y.html5Clone="<:nav></:nav>"!==D.createElement("nav").cloneNode(!0).outerHTML;a.type="checkbox";a.checked=!0;c.appendChild(a);y.appendChecked=a.checked;b.innerHTML="<textarea>x</textarea>";y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue;c.appendChild(b);b.innerHTML="<input type='radio' checked='checked' name='t'/>";y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;y.noCloneEvent=!0;b.attachEvent&&(b.attachEvent("onclick",function(){y.noCloneEvent=!1}),b.cloneNode(!0).click());
if(null==y.deleteExpando){y.deleteExpando=!0;try{delete b.test}catch(e){y.deleteExpando=!1}}})();(function(){var b,c,e=D.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(y[b+"Bubbles"]=c in a)||(e.setAttribute(c,"t"),y[b+"Bubbles"]=!1===e.attributes[c].expando)})();var Sa=/^(?:input|select|textarea)$/i,Ub=/^key/,Vb=/^(?:mouse|pointer|contextmenu)|click/,lb=/^(?:focusinfocus|focusoutblur)$/,mb=/^([^.]*)(?:\.(.+)|)$/;f.event={global:{},add:function(a,b,c,e,d){var g,h,k,l,p,m,
n,q,r;if(k=f._data(a)){c.handler&&(l=c,c=l.handler,d=l.selector);c.guid||(c.guid=f.guid++);(h=k.events)||(h=k.events={});(p=k.handle)||(p=k.handle=function(a){return"undefined"===typeof f||a&&f.event.triggered===a.type?void 0:f.event.dispatch.apply(p.elem,arguments)},p.elem=a);b=(b||"").match(ga)||[""];for(k=b.length;k--;)g=mb.exec(b[k])||[],q=m=g[1],r=(g[2]||"").split(".").sort(),q&&(g=f.event.special[q]||{},q=(d?g.delegateType:g.bindType)||q,g=f.event.special[q]||{},m=f.extend({type:q,origType:m,
data:e,handler:c,guid:c.guid,selector:d,needsContext:d&&f.expr.match.needsContext.test(d),namespace:r.join(".")},l),(n=h[q])||(n=h[q]=[],n.delegateCount=0,g.setup&&!1!==g.setup.call(a,e,r,p)||(a.addEventListener?a.addEventListener(q,p,!1):a.attachEvent&&a.attachEvent("on"+q,p))),g.add&&(g.add.call(a,m),m.handler.guid||(m.handler.guid=c.guid)),d?n.splice(n.delegateCount++,0,m):n.push(m),f.event.global[q]=!0);a=null}},remove:function(a,b,c,e,d){var g,h,k,l,p,m,n,q,r,u,t,w=f.hasData(a)&&f._data(a);if(w&&
(m=w.events)){b=(b||"").match(ga)||[""];for(p=b.length;p--;)if(k=mb.exec(b[p])||[],r=t=k[1],u=(k[2]||"").split(".").sort(),r){n=f.event.special[r]||{};r=(e?n.delegateType:n.bindType)||r;q=m[r]||[];k=k[2]&&new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)");for(l=g=q.length;g--;)h=q[g],!d&&t!==h.origType||c&&c.guid!==h.guid||k&&!k.test(h.namespace)||e&&e!==h.selector&&("**"!==e||!h.selector)||(q.splice(g,1),h.selector&&q.delegateCount--,n.remove&&n.remove.call(a,h));l&&!q.length&&(n.teardown&&
!1!==n.teardown.call(a,u,w.handle)||f.removeEvent(a,r,w.handle),delete m[r])}else for(r in m)f.event.remove(a,r+b[p],c,e,!0);f.isEmptyObject(m)&&(delete w.handle,f._removeData(a,"events"))}},trigger:function(b,c,e,d){var g,h,k,l,p,m,n=[e||D],q=ia.call(b,"type")?b.type:b;p=ia.call(b,"namespace")?b.namespace.split("."):[];k=g=e=e||D;if(3!==e.nodeType&&8!==e.nodeType&&!lb.test(q+f.event.triggered)&&(0<=q.indexOf(".")&&(p=q.split("."),q=p.shift(),p.sort()),h=0>q.indexOf(":")&&"on"+q,b=b[f.expando]?b:
new f.Event(q,"object"===typeof b&&b),b.isTrigger=d?2:3,b.namespace=p.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:f.makeArray(c,[b]),p=f.event.special[q]||{},d||!p.trigger||!1!==p.trigger.apply(e,c))){if(!d&&!p.noBubble&&!f.isWindow(e)){l=p.delegateType||q;lb.test(l+q)||(k=k.parentNode);for(;k;k=k.parentNode)n.push(k),g=k;g===(e.ownerDocument||D)&&n.push(g.defaultView||g.parentWindow||a)}for(m=
0;(k=n[m++])&&!b.isPropagationStopped();)b.type=1<m?l:p.bindType||q,(g=(f._data(k,"events")||{})[b.type]&&f._data(k,"handle"))&&g.apply(k,c),(g=h&&k[h])&&g.apply&&f.acceptData(k)&&(b.result=g.apply(k,c),!1===b.result&&b.preventDefault());b.type=q;if(!(d||b.isDefaultPrevented()||p._default&&!1!==p._default.apply(n.pop(),c))&&f.acceptData(e)&&h&&e[q]&&!f.isWindow(e)){(g=e[h])&&(e[h]=null);f.event.triggered=q;try{e[q]()}catch(r){}f.event.triggered=void 0;g&&(e[h]=g)}return b.result}},dispatch:function(a){a=
f.event.fix(a);var b,c,e,d,g=[],h=J.call(arguments);b=(f._data(this,"events")||{})[a.type]||[];var k=f.event.special[a.type]||{};h[0]=a;a.delegateTarget=this;if(!k.preDispatch||!1!==k.preDispatch.call(this,a)){g=f.event.handlers.call(this,a,b);for(b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,d=0;(c=e.handlers[d++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(c.namespace))a.handleObj=c,a.data=c.data,c=((f.event.special[c.origType]||{}).handle||
c.handler).apply(e.elem,h),void 0!==c&&!1===(a.result=c)&&(a.preventDefault(),a.stopPropagation());k.postDispatch&&k.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,e,d,g,h=[],k=b.delegateCount,l=a.target;if(k&&l.nodeType&&(!a.button||"click"!==a.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==a.type)){d=[];for(g=0;g<k;g++)e=b[g],c=e.selector+" ",void 0===d[c]&&(d[c]=e.needsContext?0<=f(c,this).index(l):f.find(c,this,null,[l]).length),
d[c]&&d.push(e);d.length&&h.push({elem:l,handlers:d})}k<b.length&&h.push({elem:this,handlers:b.slice(k)});return h},fix:function(a){if(a[f.expando])return a;var b,c,e;b=a.type;var d=a,g=this.fixHooks[b];g||(this.fixHooks[b]=g=Vb.test(b)?this.mouseHooks:Ub.test(b)?this.keyHooks:{});e=g.props?this.props.concat(g.props):this.props;a=new f.Event(d);for(b=e.length;b--;)c=e[b],a[c]=d[c];a.target||(a.target=d.srcElement||D);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return g.filter?
g.filter(a,d):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,d=b.button,f=b.fromElement;null==
a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||D,e=c.documentElement,c=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0));!a.relatedTarget&&f&&(a.relatedTarget=f===a.target?b.toElement:f);a.which||void 0===d||(a.which=d&1?1:d&2?3:d&4?2:0);return a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),
!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(f.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return f.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,e){a=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});
e?f.event.trigger(a,null,b):f.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};f.removeEvent=D.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&
!1===a.returnValue?q:r):this.type=a;b&&f.extend(this,b);this.timeStamp=a&&a.timeStamp||f.now();this[f.expando]=!0};f.Event.prototype={isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=q;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=q;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=
this.originalEvent;this.isImmediatePropagationStopped=q;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,d=a.handleObj;if(!e||e!==this&&!f.contains(this,e))a.type=d.origType,c=d.handler.apply(this,arguments),a.type=b;return c}}});y.submitBubbles||(f.event.special.submit=
{setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=f.nodeName(a,"input")||f.nodeName(a,"button")?a.form:void 0)&&!f._data(a,"submitBubbles")&&(f.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),f._data(a,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,
"form"))return!1;f.event.remove(this,"._submit")}});y.changeBubbles||(f.event.special.change={setup:function(){if(Sa.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)f.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);f.event.simulate("change",this,a,!0)});return!1}f.event.add(this,"beforeactivate._change",function(a){a=
a.target;Sa.test(a.nodeName)&&!f._data(a,"changeBubbles")&&(f.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||f.event.simulate("change",this.parentNode,a,!0)}),f._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return!Sa.test(this.nodeName)}});y.focusinBubbles||f.each({focus:"focusin",
blur:"focusout"},function(a,b){var c=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){var e=this.ownerDocument||this,d=f._data(e,b);d||e.addEventListener(a,c,!0);f._data(e,b,(d||0)+1)},teardown:function(){var e=this.ownerDocument||this,d=f._data(e,b)-1;d?f._data(e,b,d):(e.removeEventListener(a,c,!0),f._removeData(e,b))}}});f.fn.extend({on:function(a,b,c,e,d){var g,h;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,
b,c,a[g],d);return this}null==c&&null==e?(e=b,c=b=void 0):null==e&&("string"===typeof b?(e=c,c=void 0):(e=c,c=b,b=void 0));if(!1===e)e=r;else if(!e)return this;1===d&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,c,b)})},one:function(a,b,c,e){return this.on(a,b,c,e,1)},off:function(a,b,c){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,f(a.delegateTarget).off(e.namespace?e.origType+"."+
e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,b,a[e]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=r);return this.each(function(){f.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return f.event.trigger(a,b,c,!0)}});var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
Wb=/ jQuery\d+="(?:null|\d+)"/g,nb=new RegExp("<(?:"+eb+")[\\s/>]","i"),Ta=/^\s+/,ob=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,pb=/<([\w:]+)/,qb=/<tbody/i,Xb=/<|&#?\w+;/,Yb=/<(?:script|style|link)/i,Zb=/checked\s*(?:[^=]|=\s*.checked.)/i,rb=/^$|\/(?:java|ecma)script/i,Hb=/^true\/(.*)/,$b=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ea={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>",
"</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:y.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ua=w(D).appendChild(D.createElement("div"));ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=ea.td;f.extend({clone:function(a,b,c){var e,d,g,h,k,l=f.contains(a.ownerDocument,a);y.html5Clone||f.isXMLDoc(a)||!nb.test("<"+
a.nodeName+">")?g=a.cloneNode(!0):(Ua.innerHTML=a.outerHTML,Ua.removeChild(g=Ua.firstChild));if(!(y.noCloneEvent&&y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||f.isXMLDoc(a)))for(e=t(g),k=t(a),h=0;null!=(d=k[h]);++h)if(e[h]){var p=e[h],m=void 0,n=void 0,q=void 0;if(1===p.nodeType){m=p.nodeName.toLowerCase();if(!y.noCloneEvent&&p[f.expando]){q=f._data(p);for(n in q.events)f.removeEvent(p,n,q.handle);p.removeAttribute(f.expando)}if("script"===m&&p.text!==d.text)Ca(p).text=d.text,ab(p);else if("object"===
m)p.parentNode&&(p.outerHTML=d.outerHTML),y.html5Clone&&d.innerHTML&&!f.trim(p.innerHTML)&&(p.innerHTML=d.innerHTML);else if("input"===m&&Pa.test(d.type))p.defaultChecked=p.checked=d.checked,p.value!==d.value&&(p.value=d.value);else if("option"===m)p.defaultSelected=p.selected=d.defaultSelected;else if("input"===m||"textarea"===m)p.defaultValue=d.defaultValue}}if(b)if(c)for(k=k||t(a),e=e||t(g),h=0;null!=(d=k[h]);h++)bb(d,e[h]);else bb(a,g);e=t(g,"script");0<e.length&&Ba(e,!l&&t(a,"script"));return g},
buildFragment:function(a,b,c,e){for(var d,g,h,k,l,p,m=a.length,n=w(b),q=[],r=0;r<m;r++)if((g=a[r])||0===g)if("object"===f.type(g))f.merge(q,g.nodeType?[g]:g);else if(Xb.test(g)){h=h||n.appendChild(b.createElement("div"));k=(pb.exec(g)||["",""])[1].toLowerCase();p=ea[k]||ea._default;h.innerHTML=p[1]+g.replace(ob,"<$1></$2>")+p[2];for(d=p[0];d--;)h=h.lastChild;!y.leadingWhitespace&&Ta.test(g)&&q.push(b.createTextNode(Ta.exec(g)[0]));if(!y.tbody)for(d=(g="table"!==k||qb.test(g)?"<table>"!==p[1]||qb.test(g)?
0:h:h.firstChild)&&g.childNodes.length;d--;)f.nodeName(l=g.childNodes[d],"tbody")&&!l.childNodes.length&&g.removeChild(l);f.merge(q,h.childNodes);for(h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=n.lastChild}else q.push(b.createTextNode(g));h&&n.removeChild(h);y.appendChecked||f.grep(t(q,"input"),Na);for(r=0;g=q[r++];)if(!e||-1===f.inArray(g,e))if(a=f.contains(g.ownerDocument,g),h=t(n.appendChild(g),"script"),a&&Ba(h),c)for(d=0;g=h[d++];)rb.test(g.type||"")&&c.push(g);return n},cleanData:function(a,
b){for(var c,e,d,g,h=0,k=f.expando,l=f.cache,p=y.deleteExpando,m=f.event.special;null!=(c=a[h]);h++)if(b||f.acceptData(c))if(g=(d=c[k])&&l[d]){if(g.events)for(e in g.events)m[e]?f.event.remove(c,e):f.removeEvent(c,e,g.handle);l[d]&&(delete l[d],p?delete c[k]:"undefined"!==typeof c.removeAttribute?c.removeAttribute(k):c[k]=null,M.push(d))}}});f.fn.extend({text:function(a){return la(this,function(a){return void 0===a?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||D).createTextNode(a))},
null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oa(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Oa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,
function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,e=a?f.filter(a,this):this,d=0;null!=(c=e[d]);d++)b||1!==c.nodeType||f.cleanData(t(c)),c.parentNode&&(b&&f.contains(c.ownerDocument,c)&&Ba(t(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&f.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&f.nodeName(a,"select")&&(a.options.length=0)}return this},
clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return la(this,function(a){var b=this[0]||{},c=0,e=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(Wb,""):void 0;if(!("string"!==typeof a||Yb.test(a)||!y.htmlSerialize&&nb.test(a)||!y.leadingWhitespace&&Ta.test(a)||ea[(pb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ob,"<$1></$2>");try{for(;c<e;c++)b=this[c]||{},1===b.nodeType&&(f.cleanData(t(b,!1)),b.innerHTML=
a);b=0}catch(d){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;f.cleanData(t(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=hb.apply([],a);var c,e,d,g,h=0,k=this.length,l=this,p=k-1,m=a[0],n=f.isFunction(m);if(n||1<k&&"string"===typeof m&&!y.checkClone&&Zb.test(m))return this.each(function(c){var e=
l.eq(c);n&&(a[0]=m.call(this,c,e.html()));e.domManip(a,b)});if(k&&(g=f.buildFragment(a,this[0].ownerDocument,!1,this),c=g.firstChild,1===g.childNodes.length&&(g=c),c)){d=f.map(t(g,"script"),Ca);for(e=d.length;h<k;h++)c=g,h!==p&&(c=f.clone(c,!0,!0),e&&f.merge(d,t(c,"script"))),b.call(this[h],c,h);if(e)for(g=d[d.length-1].ownerDocument,f.map(d,ab),h=0;h<e;h++)c=d[h],rb.test(c.type||"")&&!f._data(c,"globalEval")&&f.contains(g,c)&&(c.src?f._evalUrl&&f._evalUrl(c.src):f.globalEval((c.text||c.textContent||
c.innerHTML||"").replace($b,"")));g=c=null}return this}});f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(a){for(var c=0,e=[],d=f(a),g=d.length-1;c<=g;c++)a=c===g?this:this.clone(!0),f(d[c])[b](a),Ra.apply(e,a.get());return this.pushStack(e)}});var ha,fb={};(function(){var a;y.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,e;if((c=D.getElementsByTagName("body")[0])&&c.style)return b=D.createElement("div"),
e=D.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!==typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(D.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(e),a}})();var sb=/^margin/,Ea=new RegExp("^("+Ia+")(?!px)[a-z%]+$","i"),na,
oa,ac=/^(top|right|bottom|left)$/;a.getComputedStyle?(na=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},oa=function(a,b,c){var e,d,g=a.style;d=(c=c||na(a))?c.getPropertyValue(b)||c[b]:void 0;c&&(""!==d||f.contains(a.ownerDocument,a)||(d=f.style(a,b)),Ea.test(d)&&sb.test(b)&&(a=g.width,b=g.minWidth,e=g.maxWidth,g.minWidth=g.maxWidth=g.width=d,d=c.width,g.width=a,g.minWidth=b,g.maxWidth=e));return void 0===d?d:d+""}):D.documentElement.currentStyle&&(na=function(a){return a.currentStyle},
oa=function(a,b,c){var e,d,f,g=a.style;f=(c=c||na(a))?c[b]:void 0;null==f&&g&&g[b]&&(f=g[b]);if(Ea.test(f)&&!ac.test(b)){c=g.left;if(d=(e=a.runtimeStyle)&&e.left)e.left=a.currentStyle.left;g.left="fontSize"===b?"1em":f;f=g.pixelLeft+"px";g.left=c;d&&(e.left=d)}return void 0===f?f:f+""||"auto"});(function(){function b(){var c,e,f,s;if((e=D.getElementsByTagName("body")[0])&&e.style){c=D.createElement("div");f=D.createElement("div");f.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
e.appendChild(f).appendChild(c);c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";d=g=!1;k=!0;a.getComputedStyle&&(d="1%"!==(a.getComputedStyle(c,null)||{}).top,g="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width,s=c.appendChild(D.createElement("div")),s.style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",
s.style.marginRight=s.style.width="0",c.style.width="1px",k=!parseFloat((a.getComputedStyle(s,null)||{}).marginRight));c.innerHTML="<table><tr><td></td><td>t</td></tr></table>";s=c.getElementsByTagName("td");s[0].style.cssText="margin:0;border:0;padding:0;display:none";if(h=0===s[0].offsetHeight)s[0].style.display="",s[1].style.display="none",h=0===s[0].offsetHeight;e.removeChild(f)}}var c,e,d,g,h,k;c=D.createElement("div");c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
if(e=(e=c.getElementsByTagName("a")[0])&&e.style)e.cssText="float:left;opacity:.5",y.opacity="0.5"===e.opacity,y.cssFloat=!!e.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===c.style.backgroundClip,y.boxSizing=""===e.boxSizing||""===e.MozBoxSizing||""===e.WebkitBoxSizing,f.extend(y,{reliableHiddenOffsets:function(){null==h&&b();return h},boxSizingReliable:function(){null==g&&b();return g},pixelPosition:function(){null==d&&b();
return d},reliableMarginRight:function(){null==k&&b();return k}})})();f.swap=function(a,b,c,e){var d,f={};for(d in b)f[d]=a.style[d],a.style[d]=b[d];c=c.apply(a,e||[]);for(d in b)a.style[d]=f[d];return c};var Va=/alpha\([^)]*\)/i,bc=/opacity\s*=\s*([^)]*)/,cc=/^(none|table(?!-c[ea]).+)/,Ib=new RegExp("^("+Ia+")(.*)$","i"),dc=new RegExp("^([+-])=("+Ia+")","i"),ec={position:"absolute",visibility:"hidden",display:"block"},tb={letterSpacing:"0",fontWeight:"400"},gb=["Webkit","O","Moz","ms"];f.extend({cssHooks:{opacity:{get:function(a,
b){if(b){var c=oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":y.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var d,g,h,k=f.camelCase(b),l=a.style;b=f.cssProps[k]||(f.cssProps[k]=Q(l,k));h=f.cssHooks[b]||f.cssHooks[k];if(void 0!==c){if(g=typeof c,"string"===g&&(d=dc.exec(c))&&
(c=(d[1]+1)*d[2]+parseFloat(f.css(a,b)),g="number"),null!=c&&c===c&&("number"!==g||f.cssNumber[k]||(c+="px"),y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(l[b]="inherit"),!(h&&"set"in h)||void 0!==(c=h.set(a,c,e))))try{l[b]=c}catch(p){}}else return h&&"get"in h&&void 0!==(d=h.get(a,!1,e))?d:l[b]}},css:function(a,b,c,e){var d,g;g=f.camelCase(b);b=f.cssProps[g]||(f.cssProps[g]=Q(a.style,g));(g=f.cssHooks[b]||f.cssHooks[g])&&"get"in g&&(d=g.get(a,!0,c));void 0===d&&(d=oa(a,b,e));"normal"===
d&&b in tb&&(d=tb[b]);return""===c||c?(a=parseFloat(d),!0===c||f.isNumeric(a)?a||0:d):d}});f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,e){if(c)return cc.test(f.css(a,"display"))&&0===a.offsetWidth?f.swap(a,ec,function(){return z(a,b,e)}):z(a,b,e)},set:function(a,c,e){var d=e&&na(a);return x(a,c,e?A(a,b,e,y.boxSizing&&"border-box"===f.css(a,"boxSizing",!1,d),d):0)}}});y.opacity||(f.cssHooks.opacity={get:function(a,b){return bc.test((b&&a.currentStyle?a.currentStyle.filter:
a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,e=a.currentStyle,d=f.isNumeric(b)?"alpha(opacity="+100*b+")":"",g=e&&e.filter||c.filter||"";c.zoom=1;if((1<=b||""===b)&&""===f.trim(g.replace(Va,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||e&&!e.filter))return;c.filter=Va.test(g)?g.replace(Va,d):g+" "+d}});f.cssHooks.marginRight=X(y.reliableMarginRight,function(a,b){if(b)return f.swap(a,{display:"inline-block"},oa,[a,"marginRight"])});f.each({margin:"",
padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var e=0,d={};for(c="string"===typeof c?c.split(" "):[c];4>e;e++)d[a+ba[e]+b]=c[e]||c[e-2]||c[0];return d}};sb.test(a)||(f.cssHooks[a+b].set=x)});f.fn.extend({css:function(a,b){return la(this,function(a,b,c){var e,d={},g=0;if(f.isArray(b)){c=na(a);for(e=b.length;g<e;g++)d[b[g]]=f.css(a,b[g],!1,c);return d}return void 0!==c?f.style(a,b,c):f.css(a,b)},a,b,1<arguments.length)},show:function(){return K(this,!0)},hide:function(){return K(this)},
toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){xa(this)?f(this).show():f(this).hide()})}});f.Tween=v;v.prototype={constructor:v,init:function(a,b,c,e,d,g){this.elem=a;this.prop=c;this.easing=d||"swing";this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=g||(f.cssNumber[c]?"":"px")},cur:function(){var a=v.propHooks[this.prop];return a&&a.get?a.get(this):v.propHooks._default.get(this)},run:function(a){var b,c=v.propHooks[this.prop];this.pos=
this.options.duration?b=f.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):v.propHooks._default.set(this);return this}};v.prototype.init.prototype=v.prototype;v.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=f.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(f.fx.step[a.prop])f.fx.step[a.prop](a);
else a.elem.style&&(null!=a.elem.style[f.cssProps[a.prop]]||f.cssHooks[a.prop])?f.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};v.propHooks.scrollTop=v.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};f.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};f.fx=v.prototype.init;f.fx.step={};var sa,Ja,fc=/^(?:toggle|show|hide)$/,ub=new RegExp("^(?:([+-])=|)("+Ia+")([a-z%]*)$","i"),gc=/queueHooks$/,Fa=[function(a,
b,c){var e,d,g,h,k,l,p=this,m={},n=a.style,q=a.nodeType&&xa(a),r=f._data(a,"fxshow");c.queue||(h=f._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,k=h.empty.fire,h.empty.fire=function(){h.unqueued||k()}),h.unqueued++,p.always(function(){p.always(function(){h.unqueued--;f.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],l=f.css(a,"display"),d="none"===l?f._data(a,"olddisplay")||Da(a.nodeName):l,"inline"===d&&
"none"===f.css(a,"float")&&(y.inlineBlockNeedsLayout&&"inline"!==Da(a.nodeName)?n.zoom=1:n.display="inline-block"));c.overflow&&(n.overflow="hidden",y.shrinkWrapBlocks()||p.always(function(){n.overflow=c.overflow[0];n.overflowX=c.overflow[1];n.overflowY=c.overflow[2]}));for(e in b)if(d=b[e],fc.exec(d)){delete b[e];g=g||"toggle"===d;if(d===(q?"hide":"show"))if("show"===d&&r&&void 0!==r[e])q=!0;else continue;m[e]=r&&r[e]||f.style(a,e)}else l=void 0;if(f.isEmptyObject(m))"inline"===("none"===l?Da(a.nodeName):
l)&&(n.display=l);else for(e in r?"hidden"in r&&(q=r.hidden):r=f._data(a,"fxshow",{}),g&&(r.hidden=!q),q?f(a).show():p.done(function(){f(a).hide()}),p.done(function(){var b;f._removeData(a,"fxshow");for(b in m)f.style(a,b,m[b])}),m)b=I(q?r[e]:0,e,p),e in r||(r[e]=b.start,q&&(b.end=b.start,b.start="width"===e||"height"===e?1:0))}],qa={"*":[function(a,b){var c=this.createTween(a,b),e=c.cur(),d=ub.exec(b),g=d&&d[3]||(f.cssNumber[a]?"":"px"),h=(f.cssNumber[a]||"px"!==g&&+e)&&ub.exec(f.css(c.elem,a)),
k=1,l=20;if(h&&h[3]!==g){g=g||h[3];d=d||[];h=+e||1;do k=k||".5",h/=k,f.style(c.elem,a,h+g);while(k!==(k=c.cur()/e)&&1!==k&&--l)}d&&(h=c.start=+h||+e||0,c.unit=g,c.end=d[1]?h+(d[1]+1)*d[2]:+d[2]);return c}]};f.Animation=f.extend(S,{tweener:function(a,b){f.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,e=0,d=a.length;e<d;e++)c=a[e],qa[c]=qa[c]||[],qa[c].unshift(b)},prefilter:function(a,b){b?Fa.unshift(a):Fa.push(a)}});f.speed=function(a,b,c){var e=a&&"object"===typeof a?f.extend({},a):{complete:c||
!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};e.duration=f.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in f.fx.speeds?f.fx.speeds[e.duration]:f.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=function(){f.isFunction(e.old)&&e.old.call(this);e.queue&&f.dequeue(this,e.queue)};return e};f.fn.extend({fadeTo:function(a,b,c,e){return this.filter(xa).css("opacity",0).show().end().animate({opacity:b},a,c,e)},animate:function(a,
b,c,e){var d=f.isEmptyObject(a),g=f.speed(b,c,e);b=function(){var b=S(this,f.extend({},a),g);(d||f._data(this,"finish"))&&b.stop(!0)};b.finish=b;return d||!1===g.queue?this.each(b):this.queue(g.queue,b)},stop:function(a,b,c){var e=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,d=null!=a&&a+"queueHooks",g=f.timers,h=f._data(this);if(d)h[d]&&h[d].stop&&e(h[d]);else for(d in h)h[d]&&h[d].stop&&
gc.test(d)&&e(h[d]);for(d=g.length;d--;)g[d].elem!==this||null!=a&&g[d].queue!==a||(g[d].anim.stop(c),b=!1,g.splice(d,1));!b&&c||f.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=f._data(this),e=c[a+"queue"];b=c[a+"queueHooks"];var d=f.timers,g=e?e.length:0;c.finish=!0;f.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=d.length;b--;)d[b].elem===this&&d[b].queue===a&&(d[b].anim.stop(!0),d.splice(b,1));for(b=0;b<g;b++)e[b]&&e[b].finish&&e[b].finish.call(this);
delete c.finish})}});f.each(["toggle","show","hide"],function(a,b){var c=f.fn[b];f.fn[b]=function(a,e,d){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(F(b,!0),a,e,d)}});f.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,e){return this.animate(b,a,c,e)}});f.timers=[];f.fx.tick=function(){var a,b=f.timers,c=0;for(sa=f.now();c<b.length;c++)a=
b[c],a()||b[c]!==a||b.splice(c--,1);b.length||f.fx.stop();sa=void 0};f.fx.timer=function(a){f.timers.push(a);a()?f.fx.start():f.timers.pop()};f.fx.interval=13;f.fx.start=function(){Ja||(Ja=setInterval(f.fx.tick,f.fx.interval))};f.fx.stop=function(){clearInterval(Ja);Ja=null};f.fx.speeds={slow:600,fast:200,_default:400};f.fn.delay=function(a,b){a=f.fx?f.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var e=setTimeout(b,a);c.stop=function(){clearTimeout(e)}})};(function(){var a,b,c,e,d;b=
D.createElement("div");b.setAttribute("className","t");b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";e=b.getElementsByTagName("a")[0];c=D.createElement("select");d=c.appendChild(D.createElement("option"));a=b.getElementsByTagName("input")[0];e.style.cssText="top:1px";y.getSetAttribute="t"!==b.className;y.style=/top/.test(e.getAttribute("style"));y.hrefNormalized="/a"===e.getAttribute("href");y.checkOn=!!a.value;y.optSelected=d.selected;y.enctype=!!D.createElement("form").enctype;
c.disabled=!0;y.optDisabled=!d.disabled;a=D.createElement("input");a.setAttribute("value","");y.input=""===a.getAttribute("value");a.value="t";a.setAttribute("type","radio");y.radioValue="t"===a.value})();var hc=/\r/g;f.fn.extend({val:function(a){var b,c,e,d=this[0];if(arguments.length)return e=f.isFunction(a),this.each(function(c){1===this.nodeType&&(c=e?a.call(this,c,f(this).val()):a,null==c?c="":"number"===typeof c?c+="":f.isArray(c)&&(c=f.map(c,function(a){return null==a?"":a+""})),b=f.valHooks[this.type]||
f.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(d){if((b=f.valHooks[d.type]||f.valHooks[d.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(d,"value")))return c;c=d.value;return"string"===typeof c?c.replace(hc,""):null==c?"":c}}});f.extend({valHooks:{option:{get:function(a){var b=f.find.attr(a,"value");return null!=b?b:f.trim(f.text(a))}},select:{get:function(a){for(var b,c=a.options,e=a.selectedIndex,d=(a="select-one"===a.type||0>e)?
null:[],g=a?e+1:c.length,h=0>e?g:a?e:0;h<g;h++)if(b=c[h],!(!b.selected&&h!==e||(y.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&f.nodeName(b.parentNode,"optgroup"))){b=f(b).val();if(a)return b;d.push(b)}return d},set:function(a,b){for(var c,e,d=a.options,g=f.makeArray(b),h=d.length;h--;)if(e=d[h],0<=f.inArray(f.valHooks.option.get(e),g))try{e.selected=c=!0}catch(k){e.scrollHeight}else e.selected=!1;c||(a.selectedIndex=-1);return d}}}});f.each(["radio","checkbox"],
function(){f.valHooks[this]={set:function(a,b){if(f.isArray(b))return a.checked=0<=f.inArray(f(a).val(),b)}};y.checkOn||(f.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var wa,vb,Y=f.expr.attrHandle,Wa=/^(?:checked|selected)$/i,fa=y.getSetAttribute,Ka=y.input;f.fn.extend({attr:function(a,b){return la(this,f.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})}});f.extend({attr:function(a,b,c){var e,d,g=a.nodeType;
if(a&&3!==g&&8!==g&&2!==g){if("undefined"===typeof a.getAttribute)return f.prop(a,b,c);1===g&&f.isXMLDoc(a)||(b=b.toLowerCase(),e=f.attrHooks[b]||(f.expr.match.bool.test(b)?vb:wa));if(void 0!==c)if(null===c)f.removeAttr(a,b);else{if(e&&"set"in e&&void 0!==(d=e.set(a,c,b)))return d;a.setAttribute(b,c+"");return c}else{if(e&&"get"in e&&null!==(d=e.get(a,b)))return d;d=f.find.attr(a,b);return null==d?void 0:d}}},removeAttr:function(a,b){var c,e,d=0,g=b&&b.match(ga);if(g&&1===a.nodeType)for(;c=g[d++];)e=
f.propFix[c]||c,f.expr.match.bool.test(c)?Ka&&fa||!Wa.test(c)?a[e]=!1:a[f.camelCase("default-"+c)]=a[e]=!1:f.attr(a,c,""),a.removeAttribute(fa?c:e)},attrHooks:{type:{set:function(a,b){if(!y.radioValue&&"radio"===b&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});vb={set:function(a,b,c){!1===b?f.removeAttr(a,c):Ka&&fa||!Wa.test(c)?a.setAttribute(!fa&&f.propFix[c]||c,c):a[f.camelCase("default-"+c)]=a[c]=!0;return c}};f.each(f.expr.match.bool.source.match(/\w+/g),
function(a,b){var c=Y[b]||f.find.attr;Y[b]=Ka&&fa||!Wa.test(b)?function(a,b,e){var d,g;e||(g=Y[b],Y[b]=d,d=null!=c(a,b,e)?b.toLowerCase():null,Y[b]=g);return d}:function(a,b,c){if(!c)return a[f.camelCase("default-"+b)]?b.toLowerCase():null}});Ka&&fa||(f.attrHooks.value={set:function(a,b,c){if(f.nodeName(a,"input"))a.defaultValue=b;else return wa&&wa.set(a,b,c)}});fa||(wa={set:function(a,b,c){var e=a.getAttributeNode(c);e||a.setAttributeNode(e=a.ownerDocument.createAttribute(c));e.value=b+="";if("value"===
c||b===a.getAttribute(c))return b}},Y.id=Y.name=Y.coords=function(a,b,c){var e;if(!c)return(e=a.getAttributeNode(b))&&""!==e.value?e.value:null},f.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);if(c&&c.specified)return c.value},set:wa.set},f.attrHooks.contenteditable={set:function(a,b,c){wa.set(a,""===b?!1:b,c)}},f.each(["width","height"],function(a,b){f.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}}));y.style||(f.attrHooks.style={get:function(a){return a.style.cssText||
void 0},set:function(a,b){return a.style.cssText=b+""}});var ic=/^(?:input|select|textarea|button|object)$/i,jc=/^(?:a|area)$/i;f.fn.extend({prop:function(a,b){return la(this,f.prop,a,b,1<arguments.length)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}});f.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var e,d,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!f.isXMLDoc(a))b=f.propFix[b]||b,d=f.propHooks[b];
return void 0!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:a[b]=c:d&&"get"in d&&null!==(e=d.get(a,b))?e:a[b]}},propHooks:{tabIndex:{get:function(a){var b=f.find.attr(a,"tabindex");return b?parseInt(b,10):ic.test(a.nodeName)||jc.test(a.nodeName)&&a.href?0:-1}}}});y.hrefNormalized||f.each(["href","src"],function(a,b){f.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});y.optSelected||(f.propHooks.selected={get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;
return null}});f.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){f.propFix[this.toLowerCase()]=this});y.enctype||(f.propFix.enctype="encoding");var Xa=/[\t\r\n\f]/g;f.fn.extend({addClass:function(a){var b,c,e,d,g,h=0,k=this.length;b="string"===typeof a&&a;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ga)||[];h<k;h++)if(c=this[h],e=1===c.nodeType&&
(c.className?(" "+c.className+" ").replace(Xa," "):" ")){for(g=0;d=b[g++];)0>e.indexOf(" "+d+" ")&&(e+=d+" ");e=f.trim(e);c.className!==e&&(c.className=e)}return this},removeClass:function(a){var b,c,e,d,g,h=0,k=this.length;b=0===arguments.length||"string"===typeof a&&a;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ga)||[];h<k;h++)if(c=this[h],e=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Xa," "):"")){for(g=
0;d=b[g++];)for(;0<=e.indexOf(" "+d+" ");)e=e.replace(" "+d+" "," ");e=a?f.trim(e):"";c.className!==e&&(c.className=e)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,e=0,d=f(this),g=a.match(ga)||[];b=g[e++];)d.hasClass(b)?d.removeClass(b):d.addClass(b);else if("undefined"===
c||"boolean"===c)this.className&&f._data(this,"__className__",this.className),this.className=this.className||!1===a?"":f._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Xa," ").indexOf(a))return!0;return!1}});f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){f.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});f.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Ya=f.now(),Za=/\?/,kc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
f.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,e=null,d=f.trim(b+"");return d&&!f.trim(d.replace(kc,function(a,b,d,g){c&&b&&(e=0);if(0===e)return a;c=d||b;e+=!g-!d;return""}))?Function("return "+d)():f.error("Invalid JSON: "+b)};f.parseXML=function(b){var c,e;if(!b||"string"!==typeof b)return null;try{a.DOMParser?(e=new DOMParser,c=e.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(d){c=void 0}c&&c.documentElement&&
!c.getElementsByTagName("parsererror").length||f.error("Invalid XML: "+b);return c};var ra,ma,lc=/#.*$/,wb=/([?&])_=[^&]*/,mc=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,nc=/^(?:GET|HEAD)$/,oc=/^\/\//,xb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yb={},Qa={},zb="*/".concat("*");try{ma=location.href}catch(vc){ma=D.createElement("a"),ma.href="",ma=ma.href}ra=xb.exec(ma.toLowerCase())||[];f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ma,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ra[1]),
global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?P(P(a,
f.ajaxSettings),b):P(f.ajaxSettings,a)},ajaxPrefilter:T(yb),ajaxTransport:T(Qa),ajax:function(a,b){function c(a,b,e,d){var m,s,C,B;B=b;if(2!==y){y=2;k&&clearTimeout(k);p=void 0;h=d||"";E.readyState=0<a?4:0;d=200<=a&&300>a||304===a;if(e){C=n;for(var v=E,x,N,A,z,O=C.contents,D=C.dataTypes;"*"===D[0];)D.shift(),void 0===N&&(N=C.mimeType||v.getResponseHeader("Content-Type"));if(N)for(z in O)if(O[z]&&O[z].test(N)){D.unshift(z);break}if(D[0]in e)A=D[0];else{for(z in e){if(!D[0]||C.converters[z+" "+D[0]]){A=
z;break}x||(x=z)}A=A||x}A?(A!==D[0]&&D.unshift(A),C=e[A]):C=void 0}a:{e=n;x=C;N=E;A=d;var H,F,G,v={},O=e.dataTypes.slice();if(O[1])for(F in e.converters)v[F.toLowerCase()]=e.converters[F];for(z=O.shift();z;)if(e.responseFields[z]&&(N[e.responseFields[z]]=x),!G&&A&&e.dataFilter&&(x=e.dataFilter(x,e.dataType)),G=z,z=O.shift())if("*"===z)z=G;else if("*"!==G&&G!==z){F=v[G+" "+z]||v["* "+z];if(!F)for(H in v)if(C=H.split(" "),C[1]===z&&(F=v[G+" "+C[0]]||v["* "+C[0]])){!0===F?F=v[H]:!0!==v[H]&&(z=C[0],O.unshift(C[1]));
break}if(!0!==F)if(F&&e["throws"])x=F(x);else try{x=F(x)}catch(I){C={state:"parsererror",error:F?I:"No conversion from "+G+" to "+z};break a}}C={state:"success",data:x}}if(d)n.ifModified&&((B=E.getResponseHeader("Last-Modified"))&&(f.lastModified[g]=B),(B=E.getResponseHeader("etag"))&&(f.etag[g]=B)),204===a||"HEAD"===n.type?B="nocontent":304===a?B="notmodified":(B=C.state,m=C.data,s=C.error,d=!s);else if(s=B,a||!B)B="error",0>a&&(a=0);E.status=a;E.statusText=(b||B)+"";d?u.resolveWith(q,[m,B,E]):u.rejectWith(q,
[E,B,s]);E.statusCode(w);w=void 0;l&&r.trigger(d?"ajaxSuccess":"ajaxError",[E,n,d?m:s]);t.fireWith(q,[E,B]);l&&(r.trigger("ajaxComplete",[E,n]),--f.active||f.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var e,d,g,h,k,l,p,m,n=f.ajaxSetup({},b),q=n.context||n,r=n.context&&(q.nodeType||q.jquery)?f(q):f.event,u=f.Deferred(),t=f.Callbacks("once memory"),w=n.statusCode||{},v={},x={},y=0,A="canceled",E={readyState:0,getResponseHeader:function(a){var b;if(2===y){if(!m)for(m={};b=
mc.exec(h);)m[b[1].toLowerCase()]=b[2];b=m[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===y?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();y||(a=x[c]=x[c]||a,v[a]=b);return this},overrideMimeType:function(a){y||(n.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>y)for(b in a)w[b]=[w[b],a[b]];else E.always(a[E.status]);return this},abort:function(a){a=a||A;p&&p.abort(a);c(0,a);return this}};u.promise(E).complete=t.add;E.success=E.done;
E.error=E.fail;n.url=((a||n.url||ma)+"").replace(lc,"").replace(oc,ra[1]+"//");n.type=b.method||b.type||n.method||n.type;n.dataTypes=f.trim(n.dataType||"*").toLowerCase().match(ga)||[""];null==n.crossDomain&&(e=xb.exec(n.url.toLowerCase()),n.crossDomain=!(!e||e[1]===ra[1]&&e[2]===ra[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(ra[3]||("http:"===ra[1]?"80":"443"))));n.data&&n.processData&&"string"!==typeof n.data&&(n.data=f.param(n.data,n.traditional));U(yb,n,b,E);if(2===y)return E;(l=n.global)&&0===
f.active++&&f.event.trigger("ajaxStart");n.type=n.type.toUpperCase();n.hasContent=!nc.test(n.type);g=n.url;n.hasContent||(n.data&&(g=n.url+=(Za.test(g)?"&":"?")+n.data,delete n.data),!1===n.cache&&(n.url=wb.test(g)?g.replace(wb,"$1_="+Ya++):g+(Za.test(g)?"&":"?")+"_="+Ya++));n.ifModified&&(f.lastModified[g]&&E.setRequestHeader("If-Modified-Since",f.lastModified[g]),f.etag[g]&&E.setRequestHeader("If-None-Match",f.etag[g]));(n.data&&n.hasContent&&!1!==n.contentType||b.contentType)&&E.setRequestHeader("Content-Type",
n.contentType);E.setRequestHeader("Accept",n.dataTypes[0]&&n.accepts[n.dataTypes[0]]?n.accepts[n.dataTypes[0]]+("*"!==n.dataTypes[0]?", "+zb+"; q=0.01":""):n.accepts["*"]);for(d in n.headers)E.setRequestHeader(d,n.headers[d]);if(n.beforeSend&&(!1===n.beforeSend.call(q,E,n)||2===y))return E.abort();A="abort";for(d in{success:1,error:1,complete:1})E[d](n[d]);if(p=U(Qa,n,b,E)){E.readyState=1;l&&r.trigger("ajaxSend",[E,n]);n.async&&0<n.timeout&&(k=setTimeout(function(){E.abort("timeout")},n.timeout));
try{y=1,p.send(v,c)}catch(z){if(2>y)c(-1,z);else throw z;}}else c(-1,"No Transport");return E},getJSON:function(a,b,c){return f.get(a,b,c,"json")},getScript:function(a,b){return f.get(a,void 0,b,"script")}});f.each(["get","post"],function(a,b){f[b]=function(a,c,e,d){f.isFunction(c)&&(d=d||e,e=c,c=void 0);return f.ajax({url:a,type:b,dataType:d,data:c,success:e})}});f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,
a)}});f._evalUrl=function(a){return f.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};f.fn.extend({wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?
this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()}});f.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!y.reliableHiddenOffsets()&&"none"===(a.style&&
a.style.display||f.css(a,"display"))};f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)};var pc=/%20/g,Jb=/\[\]$/,Ab=/\r?\n/g,qc=/^(?:submit|button|image|reset|file)$/i,rc=/^(?:input|select|textarea|keygen)/i;f.param=function(a,b){var c,e=[],d=function(a,b){b=f.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=f.ajaxSettings&&f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){d(this.name,
this.value)});else for(c in a)V(c,a[c],b,d);return e.join("&").replace(pc,"+")};f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=f.prop(this,"elements");return a?f.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!f(this).is(":disabled")&&rc.test(this.nodeName)&&!qc.test(a)&&(this.checked||!Pa.test(a))}).map(function(a,b){var c=f(this).val();return null==c?null:f.isArray(c)?f.map(c,function(a){return{name:b.name,
value:a.replace(Ab,"\r\n")}}):{name:b.name,value:c.replace(Ab,"\r\n")}}).get()}});f.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:Z;var sc=0,La={},Ma=f.ajaxSettings.xhr();if(a.ActiveXObject)f(a).on("unload",function(){for(var a in La)La[a](void 0,!0)});y.cors=!!Ma&&"withCredentials"in Ma;(Ma=y.ajax=!!Ma)&&f.ajaxTransport(function(a){if(!a.crossDomain||
y.cors){var b;return{send:function(c,e){var d,g=a.xhr(),h=++sc;g.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(d in a.xhrFields)g[d]=a.xhrFields[d];a.mimeType&&g.overrideMimeType&&g.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(d in c)void 0!==c[d]&&g.setRequestHeader(d,c[d]+"");g.send(a.hasContent&&a.data||null);b=function(c,d){var k,l,p;if(b&&(d||4===g.readyState))if(delete La[h],b=void 0,g.onreadystatechange=
f.noop,d)4!==g.readyState&&g.abort();else{p={};k=g.status;"string"===typeof g.responseText&&(p.text=g.responseText);try{l=g.statusText}catch(m){l=""}k||!a.isLocal||a.crossDomain?1223===k&&(k=204):k=p.text?200:404}p&&e(k,l,p,g.getAllResponseHeaders())};a.async?4===g.readyState?setTimeout(b):g.onreadystatechange=La[h]=b:b()},abort:function(){b&&b(void 0,!0)}}}});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},
converters:{"text script":function(a){f.globalEval(a);return a}}});f.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});f.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=D.head||f("head")[0]||D.documentElement;return{send:function(e,d){b=D.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=
b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||d(200,"success")};c.insertBefore(b,c.firstChild)},abort:function(){if(b)b.onload(void 0,!0)}}}});var Bb=[],$a=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Bb.pop()||f.expando+"_"+Ya++;this[a]=!0;return a}});f.ajaxPrefilter("json jsonp",function(b,c,e){var d,g,h,k=!1!==b.jsonp&&($a.test(b.url)?"url":"string"===typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&
$a.test(b.data)&&"data");if(k||"jsonp"===b.dataTypes[0])return d=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,k?b[k]=b[k].replace($a,"$1"+d):!1!==b.jsonp&&(b.url+=(Za.test(b.url)?"&":"?")+b.jsonp+"="+d),b.converters["script json"]=function(){h||f.error(d+" was not called");return h[0]},b.dataTypes[0]="json",g=a[d],a[d]=function(){h=arguments},e.always(function(){a[d]=g;b[d]&&(b.jsonpCallback=c.jsonpCallback,Bb.push(d));h&&f.isFunction(g)&&g(h[0]);h=g=void 0}),"script"});
f.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||D;var e=kb.exec(a);c=!c&&[];if(e)return[b.createElement(e[1])];e=f.buildFragment([a],b,c);c&&c.length&&f(c).remove();return f.merge([],e.childNodes)};var Cb=f.fn.load;f.fn.load=function(a,b,c){if("string"!==typeof a&&Cb)return Cb.apply(this,arguments);var e,d,g,h=this,k=a.indexOf(" ");0<=k&&(e=f.trim(a.slice(k,a.length)),a=a.slice(0,k));f.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(g=
"POST");0<h.length&&f.ajax({url:a,type:g,dataType:"html",data:b}).done(function(a){d=arguments;h.html(e?f("<div>").append(f.parseHTML(a)).find(e):a)}).complete(c&&function(a,b){h.each(c,d||[a.responseText,b,a])});return this};f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length};var Db=a.document.documentElement;f.offset={setOffset:function(a,b,c){var e,d,g,h=f.css(a,"position"),k=f(a),l={};"static"===h&&(a.style.position="relative");g=k.offset();d=f.css(a,
"top");e=f.css(a,"left");("absolute"===h||"fixed"===h)&&-1<f.inArray("auto",[d,e])?(e=k.position(),d=e.top,e=e.left):(d=parseFloat(d)||0,e=parseFloat(e)||0);f.isFunction(b)&&(b=b.call(a,c,g));null!=b.top&&(l.top=b.top-g.top+d);null!=b.left&&(l.left=b.left-g.left+e);"using"in b?b.using.call(a,l):k.css(l)}};f.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){f.offset.setOffset(this,a,b)});var b,c,e={top:0,left:0},d=(c=this[0])&&c.ownerDocument;if(d){b=d.documentElement;
if(!f.contains(b,c))return e;"undefined"!==typeof c.getBoundingClientRect&&(e=c.getBoundingClientRect());c=R(d);return{top:e.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:e.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}},position:function(){if(this[0]){var a,b,c={top:0,left:0},e=this[0];"fixed"===f.css(e,"position")?b=e.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),f.nodeName(a[0],"html")||(c=a.offset()),c.top+=f.css(a[0],"borderTopWidth",!0),c.left+=f.css(a[0],"borderLeftWidth",
!0));return{top:b.top-c.top-f.css(e,"marginTop",!0),left:b.left-c.left-f.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Db;a&&!f.nodeName(a,"html")&&"static"===f.css(a,"position");)a=a.offsetParent;return a||Db})}});f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);f.fn[a]=function(e){return la(this,function(a,e,d){var g=R(a);if(void 0===d)return g?b in g?g[b]:g.document.documentElement[e]:a[e];g?g.scrollTo(c?
f(g).scrollLeft():d,c?d:f(g).scrollTop()):a[e]=d},a,e,arguments.length,null)}});f.each(["top","left"],function(a,b){f.cssHooks[b]=X(y.pixelPosition,function(a,c){if(c)return c=oa(a,b),Ea.test(c)?f(a).position()[b]+"px":c})});f.each({Height:"height",Width:"width"},function(a,b){f.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,e){f.fn[e]=function(e,d){var g=arguments.length&&(c||"boolean"!==typeof e),h=c||(!0===e||!0===d?"margin":"border");return la(this,function(b,c,e){return f.isWindow(b)?
b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===e?f.css(b,c,h):f.style(b,c,e,h)},b,g?e:void 0,g,null)}})});f.fn.size=function(){return this.length};f.fn.andSelf=f.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return f});var tc=a.jQuery,uc=a.$;f.noConflict=function(b){a.$===f&&(a.$=uc);b&&a.jQuery===f&&(a.jQuery=tc);return f};"undefined"===
typeof c&&(a.jQuery=a.$=f);return f});(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function c(b,c){var g,k;g=b.nodeName.toLowerCase();if("area"===g){g=b.parentNode;k=g.name;if(!b.href||!k||"map"!==g.nodeName.toLowerCase())return!1;g=a("img[usemap='#"+k+"']")[0];return!!g&&d(g)}return(/input|select|textarea|button|object/.test(g)?!b.disabled:"a"===g?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,
"visibility")}).length}a.ui=a.ui||{};a.extend(a.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,k=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:k.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);
return"fixed"!==c&&b.length?b:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,
"tabindex")))},tabbable:function(b){var e=a.attr(b,"tabindex"),d=isNaN(e);return(d||0<=e)&&c(b,!d)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,e,g){a.each(k,function(){c-=parseFloat(a.css(b,"padding"+this))||0;e&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(c-=parseFloat(a.css(b,"margin"+this))||0)});return c}var k="Width"===c?["Left","Right"]:["Top","Bottom"],l=c.toLowerCase(),m={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,
outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?m["inner"+c].call(this):this.each(function(){a(this).css(l,d(this,b)+"px")})};a.fn["outer"+c]=function(b,k){return"number"!==typeof b?m["outer"+c].call(this,b):this.each(function(){a(this).css(l,d(this,b,!0,k)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?
b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData));a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.fn.extend({focus:function(b){return function(c,d){return"number"===typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),
enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var c;b.length&&b[0]!==document;){c=b.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(b.css("zIndex"),10),!isNaN(c)&&0!==c)return c;b=b.parent()}}return 0}});a.ui.plugin={add:function(b,c,d){var k;b=a.ui[b].prototype;for(k in d)b.plugins[k]=b.plugins[k]||[],b.plugins[k].push([c,d[k]])},call:function(a,c,d,
k){if((c=a.plugins[c])&&(k||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(k=0;k<c.length;k++)a.options[c[k][0]]&&c[k][1].apply(a.element,d)}};var l=0,m=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,k,l;for(l=0;null!=(k=c[l]);l++)try{(d=a._data(k,"events"))&&d.remove&&a(k).triggerHandler("remove")}catch(m){}b(c)}}(a.cleanData);a.widget=function(b,c,d){var k,l,m,n,r={},h=b.split(".")[0];b=b.split(".")[1];k=h+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][k.toLowerCase()]=
function(b){return!!a.data(b,k)};a[h]=a[h]||{};l=a[h][b];m=a[h][b]=function(a,b){if(!this._createWidget)return new m(a,b);arguments.length&&this._createWidget(a,b)};a.extend(m,l,{version:d.version,_proto:a.extend({},d),_childConstructors:[]});n=new c;n.options=a.widget.extend({},n.options);a.each(d,function(b,d){a.isFunction(d)?r[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},g=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,
e;this._super=a;this._superApply=g;e=d.apply(this,arguments);this._super=b;this._superApply=c;return e}}():r[b]=d});m.prototype=a.widget.extend(n,{widgetEventPrefix:l?n.widgetEventPrefix||b:b},r,{constructor:m,namespace:h,widgetName:b,widgetFullName:k});l?(a.each(l._childConstructors,function(b,c){var e=c.prototype;a.widget(e.namespace+"."+e.widgetName,m,c._proto)}),delete l._childConstructors):c._childConstructors.push(m);a.widget.bridge(b,m);return m};a.widget.extend=function(b){for(var c=m.call(arguments,
1),d=0,k=c.length,l,n;d<k;d++)for(l in c[d])n=c[d][l],c[d].hasOwnProperty(l)&&void 0!==n&&(a.isPlainObject(n)?b[l]=a.isPlainObject(b[l])?a.widget.extend({},b[l],n):a.widget.extend({},n):b[l]=n);return b};a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(k){var l="string"===typeof k,n=m.call(arguments,1),q=this;k=!l&&n.length?a.widget.extend.apply(null,[k].concat(n)):k;l?this.each(function(){var c,e=a.data(this,d);if("instance"===k)return q=e,!1;if(!e)return a.error("cannot call methods on "+
b+" prior to initialization; attempted to call method '"+k+"'");if(!a.isFunction(e[k])||"_"===k.charAt(0))return a.error("no such method '"+k+"' for "+b+" widget instance");c=e[k].apply(e,n);if(c!==e&&void 0!==c)return q=c&&c.jquery?q.pushStack(c.get()):c,!1}):this.each(function(){var b=a.data(this,d);b?(b.option(k||{}),b._init&&b._init()):a.data(this,d,new c(k,this))});return q}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",
options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=l++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||
this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d=b,k,l,m;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b)if(d={},k=b.split("."),b=k.shift(),k.length){l=d[b]=a.widget.extend({},this.options[b]);for(m=0;m<k.length-1;m++)l[k[m]]=l[k[m]]||{},l=l[k[m]];b=k.pop();if(1===arguments.length)return void 0===l[b]?null:l[b];l[b]=c}else{if(1===arguments.length)return void 0===
this.options[b]?null:this.options[b];d[b]=c}this._setOptions(d);return this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,c){this.options[a]=c;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!c),c&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},
_on:function(b,c,d){var k,l=this;"boolean"!==typeof b&&(d=c,c=b,b=!1);d?(c=k=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,k=this.widget());a.each(d,function(d,g){function m(){if(b||!0!==l.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof g?l[g]:g).apply(l,arguments)}"string"!==typeof g&&(m.guid=g.guid=g.guid||m.guid||a.guid++);var h=d.match(/^([\w:-]*)\s*(.*)$/),n=h[1]+l.eventNamespace;(h=h[2])?k.delegate(h,n,m):c.bind(n,m)})},_off:function(a,c){c=(c||
"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(c).undelegate(c)},_delay:function(a,c){var d=this;return setTimeout(function(){return("string"===typeof a?d[a]:a).apply(d,arguments)},c||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,
{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var k,l=this.options[b];d=d||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(k in b)k in c||(c[k]=b[k]);this.element.trigger(c,d);return!(a.isFunction(l)&&!1===l.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",
hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,k,l){"string"===typeof k&&(k={effect:k});var m,n=k?!0===k||"number"===typeof k?c:k.effect||c:b;k=k||{};"number"===typeof k&&(k={duration:k});m=!a.isEmptyObject(k);k.complete=l;k.delay&&d.delay(k.delay);if(m&&a.effects&&a.effects.effect[n])d[b](k);else if(n!==b&&d[n])d[n](k.duration,k.easing,l);else d.queue(function(c){a(this)[b]();l&&l.call(d[0]);c()})}});var n=!1;a(document).mouseup(function(){n=!1});a.widget("ui.mouse",{version:"1.11.1",
options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!n){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=1===b.which,k="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!d||k||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));
if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);
b.preventDefault();return n=!0}},_mouseMove:function(b){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button||!b.which)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return n=!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});
a.widget("ui.slider",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();
this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var b,c;b=this.options;var d=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),k=[];c=b.values&&b.values.length||1;d.length>c&&(d.slice(c).remove(),d=d.slice(0,c));for(b=d.length;b<c;b++)k.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");
this.handles=d.add(a(k.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",
bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var c,d,k,l,m,n=this,r=this.options;if(r.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:b.pageX,y:b.pageY});d=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var m=Math.abs(c-n.values(b));if(d>m||d===m&&(b===n._lastChangedValue||n.values(b)===r.min))d=m,k=a(this),l=b});if(!1===this._start(b,l))return!1;this._mouseSliding=
!0;this._handleIndex=l;k.addClass("ui-state-active").focus();m=k.offset();this._clickOffset=a(b.target).parents().addBack().is(".ui-slider-handle")?{left:b.pageX-m.left-k.width()/2,top:b.pageY-m.top-k.height()/2-(parseInt(k.css("borderTopWidth"),10)||0)-(parseInt(k.css("borderBottomWidth"),10)||0)+(parseInt(k.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,l,c);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var c=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,c);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var c;"horizontal"===this.orientation?(c=this.elementSize.width,
a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(c=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));c=a/c;1<c&&(c=1);0>c&&(c=0);"vertical"===this.orientation&&(c=1-c);a=this._valueMax()-this._valueMin();c=this._valueMin()+c*a;return this._trimAlignValue(c)},_start:function(a,c){var d={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(c),d.values=this.values());
return this._trigger("start",a,d)},_slide:function(a,c,d){var k;this.options.values&&this.options.values.length?(k=this.values(c?0:1),2===this.options.values.length&&!0===this.options.range&&(0===c&&d>k||1===c&&d<k)&&(d=k),d!==this.values(c)&&(k=this.values(),k[c]=d,a=this._trigger("slide",a,{handle:this.handles[c],value:d,values:k}),this.values(c?0:1),!1!==a&&this.values(c,d))):d!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[c],value:d}),!1!==a&&this.value(d))},_stop:function(a,
c){var d={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(c),d.values=this.values());this._trigger("stop",a,d)},_change:function(a,c){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(c),d.values=this.values());this._lastChangedValue=c;this._trigger("change",a,d)}},value:function(a){if(arguments.length)this.options.value=
this._trimAlignValue(a),this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,c){var d,k,l;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);else if(arguments.length)if(a.isArray(arguments[0])){d=this.options.values;k=arguments[0];for(l=0;l<d.length;l+=1)d[l]=this._trimAlignValue(k[l]),this._change(null,l);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();
else return this._values()},_setOption:function(b,c){var d,k=0;"range"===b&&!0===this.options.range&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));a.isArray(this.options.values)&&(k=this.options.values.length);"disabled"===b&&this.element.toggleClass("ui-state-disabled",!!c);this._super(b,c);switch(b){case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();this.handles.css("horizontal"===c?"bottom":"left","");break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<k;d+=1)this._change(null,d);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0;this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=
this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var c,d;if(arguments.length)return c=this.options.values[a],c=this._trimAlignValue(c);if(this.options.values&&this.options.values.length){c=this.options.values.slice();for(d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var c=0<this.options.step?this.options.step:1,d=(a-this._valueMin())%
c;a-=d;2*Math.abs(d)>=c&&(a+=0<d?c:-c);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,k,l,m=this.options.range,n=this.options,r=this,h=this._animateOff?!1:n.animate,w={};if(this.options.values&&this.options.values.length)this.handles.each(function(d){c=(r.values(d)-r._valueMin())/(r._valueMax()-r._valueMin())*100;w["horizontal"===r.orientation?"left":"bottom"]=c+"%";a(this).stop(1,1)[h?
"animate":"css"](w,n.animate);if(!0===r.options.range)if("horizontal"===r.orientation){if(0===d)r.range.stop(1,1)[h?"animate":"css"]({left:c+"%"},n.animate);if(1===d)r.range[h?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:n.animate})}else{if(0===d)r.range.stop(1,1)[h?"animate":"css"]({bottom:c+"%"},n.animate);if(1===d)r.range[h?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:n.animate})}b=c});else{d=this.value();k=this._valueMin();l=this._valueMax();c=l!==k?(d-k)/(l-k)*100:0;w["horizontal"===
this.orientation?"left":"bottom"]=c+"%";this.handle.stop(1,1)[h?"animate":"css"](w,n.animate);if("min"===m&&"horizontal"===this.orientation)this.range.stop(1,1)[h?"animate":"css"]({width:c+"%"},n.animate);if("max"===m&&"horizontal"===this.orientation)this.range[h?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:n.animate});if("min"===m&&"vertical"===this.orientation)this.range.stop(1,1)[h?"animate":"css"]({height:c+"%"},n.animate);if("max"===m&&"vertical"===this.orientation)this.range[h?"animate":
"css"]({height:100-c+"%"},{queue:!1,duration:n.animate})}},_handleEvents:{keydown:function(b){var c,d,k,l=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,l),!1===c))return}k=this.options.step;
c=this.options.values&&this.options.values.length?d=this.values(l):d=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+
k);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-k)}this._slide(b,l,d)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}});a.widget("ui.tabs",{version:"1.11.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,
load:null},_isLocal:function(){var a=/#.*$/;return function(c){var d,k;c=c.cloneNode(!1);d=c.href.replace(a,"");k=location.href.replace(a,"");try{d=decodeURIComponent(d)}catch(l){}try{k=decodeURIComponent(k)}catch(m){}return 1<c.hash.length&&d===k}}(),_create:function(){var b=this,c=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible);this._processTabs();c.active=this._initialActive();a.isArray(c.disabled)&&
(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(c.active):a();this._refresh();this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);null===b&&(d&&this.tabs.each(function(c,e){if(a(e).attr("aria-controls")===d)return b=c,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),
null===b||-1===b)&&(b=this.tabs.length?0:!1);!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0));!c&&!1===b&&this.anchors.length&&(b=0);return b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),k=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:k=
!1;d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(d);return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}b.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,k);b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=
this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,c){function d(){b>
k&&(b=0);0>b&&(b=k);return b}for(var k=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,c){a=this._findNextTab(a,c);this.tabs.eq(a).focus();return a},_setOption:function(a,c){"active"===a?this._activate(c):"disabled"===a?this._setupDisabled(c):(this._super(a,c),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",c),c||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(c),"heightStyle"===a&&this._setupHeightStyle(c))},
_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):
b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",
"aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&
this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=a();this.anchors.each(function(c,d){var k,l,m=a(d).uniqueId().attr("id"),n=a(d).closest("li"),r=n.attr("aria-controls");b._isLocal(d)?(k=d.hash,l=k.substring(1),k=b.element.find(b._sanitizeSelector(k))):(l=n.attr("aria-controls")||
a({}).uniqueId()[0].id,k=b.element.find("#"+l),k.length||(k=b._createPanel(l),k.insertAfter(b.panels[c-1]||b.tablist)),k.attr("aria-live","polite"));k.length&&(b.panels=b.panels.add(k));r&&n.data("ui-tabs-aria-controls",r);n.attr({"aria-controls":l,"aria-labelledby":m});k.attr("aria-labelledby",m)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",
b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c=0,d;d=this.tabs[c];c++)!0===b||-1!==a.inArray(c,b)?a(d).addClass("ui-state-disabled").attr("aria-disabled","true"):a(d).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));
this._on(!0,this.anchors,{click:function(a){a.preventDefault()}});this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),
this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,k=a(b.currentTarget).closest("li"),l=k[0]===d[0],m=l&&c.collapsible,n=m?a():this._getPanelForTab(k),r=d.length?this._getPanelForTab(d):
a(),d={oldTab:d,oldPanel:r,newTab:m?a():k,newPanel:n};b.preventDefault();k.hasClass("ui-state-disabled")||k.hasClass("ui-tabs-loading")||this.running||l&&!c.collapsible||!1===this._trigger("beforeActivate",b,d)||(c.active=m?!1:this.tabs.index(k),this.active=l?a():k,this.xhr&&this.xhr.abort(),r.length||n.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),n.length&&this.load(this.tabs.index(k),b),this._toggle(b,d))},_toggle:function(b,c){function d(){l.running=!1;l._trigger("activate",
b,c)}function k(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");m.length&&l.options.show?l._show(m,l.options.show,d):(m.show(),d())}var l=this,m=c.newPanel,n=c.oldPanel;this.running=!0;n.length&&this.options.hide?this._hide(n,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");k()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n.hide(),k());n.attr("aria-hidden","true");c.oldTab.attr({"aria-selected":"false",
"aria-expanded":"false"});m.length&&n.length?c.oldTab.attr("tabIndex",-1):m.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);m.attr("aria-hidden","false");c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===
b?a():this.tabs.eq(b)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=
a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;!1!==c&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(c))},disable:function(b){var c=this.options.disabled;
if(!0!==c){if(void 0===b)c=!0;else{b=this._getIndex(b);if(-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setupDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,k=this.tabs.eq(b),l=k.find(".ui-tabs-anchor"),m=this._getPanelForTab(k),n={tab:k,panel:m};this._isLocal(l[0])||(this.xhr=a.ajax(this._ajaxSettings(l,c,n)))&&"canceled"!==this.xhr.statusText&&(k.addClass("ui-tabs-loading"),m.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){m.html(a);
d._trigger("load",c,n)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,!0);k.removeClass("ui-tabs-loading");m.removeAttr("aria-busy");a===d.xhr&&delete d.xhr},1)}))},_ajaxSettings:function(b,c,d){var k=this;return{url:b.attr("href"),beforeSend:function(b,l){return k._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:l},d))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}})});var mapPlane,mapBuildings,mapSkyDome,mapApartment,mapSun,gl,fieldOfView=50.625,layoutId,rowId,OFFER_REST_BASE_URL="rest",mqSaveSpace=window.matchMedia("(max-width: 799px), (max-height: 799px)"),mqLandscape=window.matchMedia("(orientation: landscape)"),myToolbar;function toDictionary(a){a=a.split("&");var c={},d;for(d in a){var l=a[d].split("=");2==l.length&&(c[l[0]]=parseFloat(l[1]))}return c}
function getFloorName(a){if(0==a)return"Erdgeschoss";if(0<a)return a+". Etage";if(0>a)return a+". Untergeschoss"}function asPriceString(a){a=Math.floor(100*a);var c=Math.floor(a/100);a%=100;10>a&&(a="0"+a);return c+","+a+" \u20ac"}
function initEventHandlers(){webGlCanvas.addEventListener("mousedown",function(a){a.preventDefault();Controller.onMouseDown(a)},!1);webGlCanvas.addEventListener("mouseup",function(a){Controller.onMouseUp(a)},!1);webGlCanvas.addEventListener("mouseout",function(a){Controller.onMouseUp(a)},!1);webGlCanvas.addEventListener("mousemove",function(a){Controller.onMouseMove(a)},!1);webGlCanvas.addEventListener("touchstart",function(a){Controller.onTouchDown(a)},!1);webGlCanvas.addEventListener("touchcancel",
function(a){Controller.onTouchEnd(a)},!1);webGlCanvas.addEventListener("touchend",function(a){Controller.onTouchEnd(a)},!1);webGlCanvas.addEventListener("touchleave",function(a){Controller.onTouchEnd(a)},!1);webGlCanvas.addEventListener("touchmove",function(a){Controller.onTouchMove(a)},!1);document.addEventListener("keydown",function(a){38!=a.keyCode&&40!=a.keyCode||a.preventDefault();Controller.onKeyDown(a)},!1);document.addEventListener("keyup",function(a){Controller.onKeyUp(a)},!1);document.body.onresize=
onResize;ApartmentMap.addEventListener("click",function(a,c){var d=mapApartment.pixelToLocalCoordinates([a,c]);Controller.moveTo(d.x,d.y);scheduleFrameRendering()},!1);Controller.onRequestFrameRender=scheduleFrameRendering}
function offerMetadataLoaded(a){a=JSON.parse(a);if(gl){var c=3*a.level+1;Controller.position={lat:a.lat,lng:a.lon};null!=a.yaw&&(Controller.viewAngleYaw=parseFloat(a.yaw));glu.performShadowMapping&&(mapSun=new Sun(Controller.position));onSunPositionChanged($("#slider-day").slider("value"),$("#slider-time").slider("value"));mapBuildings=new Buildings(gl,Controller.position);mapBuildings.onLoaded=function(){Shadows.dirty=!0;scheduleFrameRendering()};mapApartment=new Apartment(a.layoutId,a.scale,a.layout,
null!=a.yaw?a.yaw:0,c);Helpers.ajaxGet(OFFER_REST_BASE_URL+"/get/textures/"+a.layoutId,mapApartment.updateTextures.bind(mapApartment));Controller.localPosition.x=mapApartment.startingPos[0];Controller.localPosition.y=mapApartment.startingPos[1];Controller.localPosition.z=c+1.6;mapPlane=new MapLayer;mapPlane.onProgress=scheduleFrameRendering;lblAddress.innerHTML=a.address;lblLevel.innerHTML=getFloorName(a.level);lblSize.innerHTML=a.area+"m\u00b2";lblRooms.innerHTML=a.numRooms;lblRent.innerHTML=asPriceString(a.rent);
lblDetails.innerHTML="<a target='_blank' href='http://www.wobau-magdeburg.de/"+a.detailsUrl+"'>[in neuem Tab]</a>";CollisionHandling.init(a.layout.layoutImageSize[0],a.layout.layoutImageSize[1],a.collisionMap);VicinityMap.init("mapDiv",a.lat,a.lon);ApartmentMap.init(layoutDiv,layoutCanvas,a.layoutImageUrl?a.layoutImageUrl:OFFER_REST_BASE_URL+"/get/layout/"+a.layoutId);initEventHandlers();scheduleFrameRendering()}}
function onSunPositionChanged(a,c){if(mapSun){mapSun.setMomentInTime(a,c);var d=mapSun.getSunriseTime();null==d&&(d=0);var l=mapSun.getSunsetTime();null==l&&(l=24);$("#slider-time").slider("option","min",d);$("#slider-time").slider("option","max",l);lblDay.textContent=Helpers.getDayString(a);for(var m=c|0,n=""+(60*(c-m)).toFixed(0);2>n.length;)n="0"+n;lblTime.textContent=""+m+":"+n;c==d&&(lblTime.textContent+=" (Sonnenaufgang)");c==l&&(lblTime.textContent+=" (Sonnenuntergang)");Shadows.dirty=!0;scheduleFrameRendering()}}
function init(){var a=document.URL.indexOf("?");a&&(a=toDictionary(document.URL.substring(a+1)),rowId=a.rowid?parseInt(a.rowid):13);initGl();if(gl){Shaders.init(errorLog);a=new Date(Date.now());jQuery("#slider-day").slider({min:0,max:364,value:getDayOfYear(a),step:1,stop:function(a,c){onSunPositionChanged(c.value,mapSun.time)},slide:function(a,c){onSunPositionChanged(c.value,mapSun.time)}});jQuery("#slider-time").slider({min:0,max:24,value:a.getHours()+1/60*a.getMinutes(),step:.01,stop:function(a,
c){onSunPositionChanged(mapSun.dayOfYear,c.value)},slide:function(a,c){onSunPositionChanged(mapSun.dayOfYear,c.value)}});jQuery("#slider-day .ui-slider-handle").unbind("keydown");jQuery("#slider-time .ui-slider-handle").unbind("keydown");Helpers.ajaxGet(OFFER_REST_BASE_URL+"/get/offer/"+rowId,offerMetadataLoaded);var c=navigator.userAgent.toLowerCase(),a=-1<c.indexOf("android"),d=-1<c.indexOf("webkit"),l=-1<c.indexOf("iphone"),c=-1<c.indexOf("ipad");(a||l||c)&&d||new FullScreenButton(btnFullScreen,
{target:dummy,icon:"images/ic_action_full_screen.png",returnIcon:"images/ic_action_return_from_full_screen.png"});a=[{icon:"images/ic_action_place.png",target:mapDiv,onShow:function(){VicinityMap.onChangeSize()}},{icon:"images/ic_action_layout.png",target:layoutDiv,onShow:ApartmentMap.resize.bind(ApartmentMap)},{icon:"images/ic_action_sun_position.png",target:divSunPos},{icon:"images/ic_action_details.png",target:divDetails},{icon:"images/ic_action_help.png",target:divUsageNotes}];glu.performShadowMapping||
delete a[2];myToolbar=new WindowToolBar(toolbarDiv,{windows:a});mqSaveSpace.addListener(onResize);mqLandscape.addListener(onResize);onResize()}}var frameRenderingScheduled=!1;function scheduleFrameRendering(){frameRenderingScheduled||(frameRenderingScheduled=!0,window.requestAnimationFrame?window.requestAnimationFrame(executeFrameRendering):executeFrameRendering())}
function executeFrameRendering(){frameRenderingScheduled=!1;void 0!==Controller.position.lat&&void 0!==Controller.position.lng&&(Controller.keysStillPressed()&&scheduleFrameRendering(),Controller.keysStillPressed()&&Controller.updateKeyInteraction(),VicinityMap.updatePositionMarker(Controller.getEffectivePosition()),VicinityMap.renderFrustum(),renderScene(),void 0!=mapApartment&&ApartmentMap.render(mapApartment.localToPixelCoordinates(Controller.localPosition)))}
function onGlContextLost(a){a.preventDefault();mapSkyDome=mapSun=mapPlane=mapApartment=mapBuildings=gl=null}function onGlContextRestored(a){initGl();Shaders.init(errorLog);mapSkyDome=new SkyDome;mapSkyDome.onLoaded=scheduleFrameRendering;Helpers.ajaxGet(OFFER_REST_BASE_URL+"/get/offer/"+rowId,offerMetadataLoaded)}
function initGl(){gl=webGlCanvas.getContext("webgl")||webGlCanvas.getContext("experimental-webgl");webGlCanvas.addEventListener("webglcontextlost",onGlContextLost,!1);webGlCanvas.addEventListener("webglcontextrestored",onGlContextRestored,!1);gl?(glu.init(),Shadows.init(),gl.clearColor(.5,.5,.5,1),gl.clearDepth(1),gl.enable(gl.DEPTH_TEST),gl.depthFunc(gl.LEQUAL),gl.enable(gl.CULL_FACE),onResize(),mapSkyDome=new SkyDome,mapSkyDome.onLoaded=scheduleFrameRendering):(glErrorDiv.style.display="inherit",
dummy.style.display="none",divDisclaimer.style.display="none",lblGlErrorMessage.textContent=Helpers.getWebGlFailReason())}
function onResize(){var a=myToolbar?myToolbar.getActiveWindow():void 0,c=a=a&&a.target;c||(c={style:{offsetTop:"72px;",offsetHeight:"0px"}});var d="overlay";mqSaveSpace.matches&&a&&(d=mqLandscape.matches?"side":"top");switch(d){case "overlay":canvasContainer.style.left="0px";canvasContainer.style.top="0px";c.className="toolWindow toolOverlay";c.style.maxHeight="";c==mapDiv&&(mapDiv.className="toolWindow toolOverlay leaflet-container leaflet-fade-anim",mapDiv.style.width="400px",mapDiv.style.height=
"400px");c==layoutDiv&&ApartmentMap.resize(400,400);break;case "side":canvasContainer.style.top="0px";c.style.maxHeight="";c.className="toolWindow toolSide";c==mapDiv&&(mapDiv.className="toolWindow toolSide leaflet-container leaflet-fade-anim",mapDiv.style.width="400px",mapDiv.style.height="");c==layoutDiv&&ApartmentMap.resize(400,window.innerHeight-72);canvasContainer.style.left=c.offsetLeft+c.offsetWidth+"px";break;case "top":canvasContainer.style.left="0px",c.className="toolWindow toolTop",c.style.height=
"",c.style.width="",c.style.maxHeight="400px",c==mapDiv&&(mapDiv.className="toolWindow toolTop leaflet-container leaflet-fade-anim",mapDiv.style.width="",mapDiv.style.height="400px"),c==layoutDiv&&ApartmentMap.resize(window.innerWidth,400),canvasContainer.style.top=c.offsetTop+c.offsetHeight+"px"}divDisclaimer.style.left=canvasContainer.style.left;webGlCanvas.height=webGlCanvas.clientHeight*window.devicePixelRatio/Math.sqrt(2);webGlCanvas.width=webGlCanvas.clientWidth*window.devicePixelRatio/Math.sqrt(2);
VicinityMap.onChangeSize();ApartmentMap.resize();scheduleFrameRendering()}
function renderScene(){if(gl&&Controller.localPosition){var a=mapSun?mapSun.getPosition():mapSkyDome?[0,0,mapSkyDome.RADIUS]:[0,0,5E3];Shadows.renderDepthTexture(a,[0,0,Controller.localPosition.z],[mapBuildings,mapApartment]);gl.bindFramebuffer(gl.FRAMEBUFFER,null);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);gl.viewport(0,0,webGlCanvas.width,webGlCanvas.height);var a=glu.lookAt(Controller.viewAngleYaw,Controller.viewAnglePitch,Controller.localPosition),c=mat4.create();mat4.perspective(c,fieldOfView/
180*Math.PI,webGlCanvas.width/webGlCanvas.height,.5,5100);gl.enable(gl.CULL_FACE);var d=[mapPlane,mapBuildings,mapSkyDome,mapSun],l;for(l in d)d[l]&&d[l].render(a,c,Shadows.shadowMvpMatrix);mapApartment&&(c=mat4.create(),mat4.perspective(c,fieldOfView/180*Math.PI,webGlCanvas.width/webGlCanvas.height,.01,100),mapApartment.render(a,c,Shadows.shadowMvpMatrix))}}window.onload=init;function MapLayer(){this.createTileHierarchy()}MapLayer.MIN_ZOOM=12;MapLayer.MAX_ZOOM=19;
MapLayer.prototype.createTilesRecursive=function(a,c,d,l,m,n){var b=long2tile(Controller.position.lng,d),e=lat2tile(Controller.position.lat,d),g=12756200*Math.PI*Math.cos(Controller.position.lat/180*Math.PI)/Math.pow(2,d),k=(a-b)*g,b=(a-b+1)*g,p=(c-e)*g,e=(c-e+1)*g,g=[k,p,0],u=[b,p,0],q=[b,e,0],r=[k,e,0];if(getMinDistanceFromOrigin(k,b,p,e)<l[d]||!m)n.push([[g,u,q,r],a,c,d]),d<MapLayer.MAX_ZOOM&&(this.createTilesRecursive(2*a,2*c,d+1,l,!0,n),this.createTilesRecursive(2*a+1,2*c,d+1,l,!0,n),this.createTilesRecursive(2*
a,2*c+1,d+1,l,!0,n),this.createTilesRecursive(2*a+1,2*c+1,d+1,l,!0,n))};function getRadius(a,c){var d=.25*Math.PI/768,l=Math.atan(a/c);if(l<d)return 0;for(var m=0,n=1E5,b=0;100>b;b++){var e=(m+n)/2,l=Math.sqrt(c*c+e*e),g=Math.sqrt(c*c+(e+a)*(e+a)),l=-(a*a-l*l-g*g)/(2*l*g);1<l&&(l=1);l=Math.acos(l);l<d?n=e:m=e}return e}
MapLayer.prototype.createTileHierarchy=function(){for(var a=Controller.localPosition.z,c=12756200*Math.PI,d=c*Math.cos(Controller.position.lat/180*Math.PI)/Math.pow(2,17),d=d/512,l={},m=0;25>m;m++)d=c*Math.cos(Controller.position.lat/180*Math.PI)/Math.pow(2,m),d/=512,l[m]=getRadius(d,a);var a=long2tile(Controller.position.lng,12),c=lat2tile(Controller.position.lat,12),m=[-1,0,1],d=[-1,0,1],a=Math.floor(a),c=Math.floor(c),n=[],b;for(b in m)for(var e in d)this.createTilesRecursive(a+m[b],c+d[e],12,
l,!1,n);n.sort(function(a,b){return b[3]-a[3]});console.log("map layer consists of %s tiles",n.length);this.tiles=[];for(b in n)this.tiles.push(new Tile(n[b][1],n[b][2],n[b][3],this))};MapLayer.prototype.render=function(a,c){for(var d in this.tiles)this.tiles[d].render(a,c)};function long2tile(a,c){return(a+180)/360*Math.pow(2,c)}function lat2tile(a,c){return(1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*Math.pow(2,c)}function tile2long(a,c){return a/Math.pow(2,c)*360-180}function tile2lat(a,c){var d=Math.PI-2*Math.PI*a/Math.pow(2,c);return 180/Math.PI*Math.atan(.5*(Math.exp(d)-Math.exp(-d)))}function dist3(a,c){return Math.sqrt(Math.pow(a[0]-c[0],2)+Math.pow(a[1]-c[1],2)+Math.pow(a[2]-c[2],2))}
function len3(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}function sub3(a,c){return[a[0]-c[0],a[1]-c[1],a[2]-c[2]]}function add3(a,c){return[a[0]+c[0],a[1]+c[1],a[2]+c[2]]}function mul3scalar(a,c){return[a[0]*c,a[1]*c,a[2]*c]}function neg3(a){return[-a[0],-a[1],-a[2]]}function sub2(a,c){return[a[0]-c[0],a[1]-c[1]]}function add2(a,c){return[a[0]+c[0],a[1]+c[1]]}function len2(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function dist2(a,c){return len2(sub(a,c))}
function norm2(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return[a[0]/c,a[1]/c]}function dot2(a,c){return a[0]*c[0]+a[1]*c[1]}function rotate(a,c){c=c/180*Math.PI;var d=Math.cos(c)*a[0]-Math.sin(c)*a[1];a[1]=Math.sin(c)*a[0]+Math.cos(c)*a[1];a[0]=d}function norm3(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/c,a[1]/c,a[2]/c]}
function getNormal(a,c,d){c=[c[0]-a[0],c[1]-a[1],c[2]-a[2]];a=[d[0]-a[0],d[1]-a[1],d[2]-a[2]];return norm3([c[2]*a[1]-c[1]*a[2],c[0]*a[2]-c[2]*a[0],c[1]*a[0]-c[0]*a[1]])}function openingAngle(a,c,d){var l=dist3(c,d);c=dist3(a,c);a=dist3(a,d);return Math.acos(-(l*l-c*c-a*a)/(2*c*a))/Math.PI*180}
function getMinDistanceFromOrigin(a,c,d,l){var m=[c,d,0],n=[c,l,0],b=[a,l,0],m=Math.min(len3([a,d,0]),len3(m),len3(n),len3(b));0>a*c&&(m=Math.min(m,Math.abs(d),Math.abs(l)));0>d*l&&(m=Math.min(m,Math.abs(a),Math.abs(c)));0>a*c&&0>d*l&&(m=0);return m};var Shaders={shaderSrc:null,init:function(a){if(Shaders.shaderSrc)Shaders.onShadersRetrieved(Shaders.shaderSrc);else Helpers.ajaxGet("shaders.xml",Shaders.onShadersRetrieved.bind(Shaders));Shaders.errorOutput=a},onShadersRetrieved:function(a){Shaders.shaderSrc=a;a=(new DOMParser).parseFromString(a,"application/xml").getElementsByTagName("script");Shaders.shaderSource={};for(var c=0;c<a.length;c++){var d=a[c].attributes.type.value,l=a[c].attributes.id.value,m=a[c].textContent;"x-shader/x-vertex"!=
d&&"x-shader/x-fragment"!=d?console.log("[WARN] unknown script type: %s for script %o",d,a[c]):void 0===l||null===l?console.log("[WARN] shader %o has no id, skipping",a[c]):Shaders.shaderSource[l]=m}glu.performShadowMapping&&(Shaders.depth=glu.createShader(Shaders.shaderSource["depth-shader-vs"],Shaders.shaderSource["depth-shader-fs"],["vertexPosition"],["modelViewProjectionMatrix","lightPos"],Shaders.errorOutput));Shaders.building=glu.createShader(Shaders.shaderSource["building-shader-vs"],Shaders.shaderSource["building-shader-fs"],
["vertexPosition","vertexTexCoords","vertexNormal","vertexColorIn"],["modelViewProjectionMatrix","tex","cameraPos"],Shaders.errorOutput);Shaders.flat=glu.createShader(Shaders.shaderSource["flat-shader-vs"],Shaders.shaderSource["flat-shader-fs"],["vertexPosition"],["modelViewProjectionMatrix","color"],Shaders.errorOutput);Shaders.textured=glu.createShader(Shaders.shaderSource["texture-shader-vs"],Shaders.shaderSource["texture-shader-fs"],["vertexPosition","vertexTexCoords"],["modelViewProjectionMatrix",
"tex"],Shaders.errorOutput);Shaders.shadow=glu.performShadowMapping?glu.createShader(Shaders.shaderSource["shadowed-shader-vs"],Shaders.shaderSource["shadowed-texture-shader-fs"],["vertexPosition","normalIn","vertexTexCoords"],["modelViewProjectionMatrix","sunDir","shadowMatrix","tex","shadowTex"],Shaders.errorOutput):Shaders.textured;Shaders.ready=!0;scheduleFrameRendering()}};var Shadows={dirty:!0,depthTextureSize:2048,init:function(){glu.performShadowMapping&&(Shadows.shadowMvpMatrix=mat4.create(),Shadows.colorTexture=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,Shadows.colorTexture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texImage2D(gl.TEXTURE_2D,
0,gl.RGBA,Shadows.depthTextureSize,Shadows.depthTextureSize,0,gl.RGBA,gl.UNSIGNED_BYTE,null),Shadows.renderbuffer=gl.createRenderbuffer(),gl.bindRenderbuffer(gl.RENDERBUFFER,Shadows.renderbuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,Shadows.depthTextureSize,Shadows.depthTextureSize),Shadows.framebuffer=gl.createFramebuffer(),gl.bindFramebuffer(gl.FRAMEBUFFER,Shadows.framebuffer),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,Shadows.colorTexture,0),
gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,Shadows.renderbuffer),gl.bindFramebuffer(gl.FRAMEBUFFER,null))},renderDepthTexture:function(a,c,d){if(Shadows.dirty&&glu.performShadowMapping&&(Shadows.dirty=!1,a))if(gl.bindFramebuffer(gl.FRAMEBUFFER,Shadows.framebuffer),0>a[2])gl.clearDepth(-1),gl.clear(gl.DEPTH_BUFFER_BIT),gl.clearDepth(1);else{gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);gl.viewport(0,0,Shadows.depthTextureSize,Shadows.depthTextureSize);var l=mat4.create();
mat4.lookAt(l,[a[0],-a[1],a[2]],c,[0,0,1]);mat4.scale(l,l,[1,-1,1]);a=mat4.create();mat4.perspective(a,.17/180*Math.PI,webGlCanvas.width/webGlCanvas.height,3E3,5100);Shadows.shadowMvpMatrix=mat4.create();mat4.mul(Shadows.shadowMvpMatrix,a,l);for(var m in d)d[m]&&d[m].renderDepth(l,a)}}};function SkyDome(){this.buildGlGeometry()}function onTextureLoaded(a,c){var d=gl.getParameter(gl.MAX_TEXTURE_SIZE),l=Math.round(Math.log(d)/Math.log(2));d<a.width&&(d=document.createElement("canvas"),d.width=1<<l,d.height=1<<l-2,d.getContext("2d").drawImage(a,0,0,d.width,d.height),a=d);c.tex=glu.createTexture(a);if(c.onLoaded)c.onLoaded()}
SkyDome.prototype.buildGlGeometry=function(){this.vertices=[];this.texCoords=[];var a=new Image,c=this;a.onload=function(){onTextureLoaded(a,c)};a.src="skydome.jpg";for(var d=0;20>d;d++)for(var l=d/20*2*Math.PI,m=Math.cos(l)*SkyDome.RADIUS,l=Math.sin(l)*SkyDome.RADIUS,n=(d+1)/20*2*Math.PI,b=Math.cos(n)*SkyDome.RADIUS,n=Math.sin(n)*SkyDome.RADIUS,e=0;10>=e+1;e++){var g=e*Math.PI/20,k=(e+1)*Math.PI/20,p=[m*Math.cos(g),l*Math.cos(g),SkyDome.RADIUS*Math.sin(g)],g=[b*Math.cos(g),n*Math.cos(g),SkyDome.RADIUS*
Math.sin(g)],u=[b*Math.cos(k),n*Math.cos(k),SkyDome.RADIUS*Math.sin(k)],k=[m*Math.cos(k),l*Math.cos(k),SkyDome.RADIUS*Math.sin(k)],p=[].concat(p,g,u,p,u,k);this.vertices.push.apply(this.vertices,p);p=d/20;k=(d+1)/20;g=1-(e+1)/10;u=1-e/10;this.texCoords.push.apply(this.texCoords,[p,u,k,u,k,g,p,u,k,g,p,g])}this.numVertices=this.vertices.length/3;this.vertices=glu.createArrayBuffer(this.vertices);this.texCoords=glu.createArrayBuffer(this.texCoords)};
SkyDome.prototype.render=function(a,c){if(Shaders.ready){gl.useProgram(Shaders.textured);glu.enableVertexAttribArrays(Shaders.textured);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertices);gl.vertexAttribPointer(Shaders.textured.locations.vertexPosition,3,gl.FLOAT,!1,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,this.texCoords);gl.vertexAttribPointer(Shaders.textured.locations.vertexTexCoords,2,gl.FLOAT,!1,0,0);gl.uniform1i(Shaders.textured.locations.tex,0);var d=mat4.create();mat4.mul(d,c,a);gl.uniformMatrix4fv(Shaders.textured.locations.modelViewProjectionMatrix,
!1,d);gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,this.tex);gl.drawArrays(gl.TRIANGLES,0,this.numVertices);glu.disableVertexAttribArrays(Shaders.textured)}};SkyDome.RADIUS=5E3;function getDayOfYear(a){var c=new Date(a.getFullYear(),0,0);return(a.valueOf()-c.valueOf())/864E5}function Sun(a){this.lat=a.lat;this.lng=a.lng;this.dayOfYear=229;this.time=12;this.buildGlGeometry()}Sun.prototype.setMomentInTime=function(a,c){a&&(this.dayOfYear=a);c&&(this.time=c);(a||c)&&this.buildGlGeometry()};
Sun.getAngles=function(a,c,d,l){var m=1;90<d&&273>d&&(m=2);m*=15;d=(d-81)/365*2*Math.PI;var n=9.87*Math.sin(2*d)-7.53*Math.cos(d)-1.5*Math.sin(d);c=15*(l+(4*(c-m)+n)/60-12)/180*Math.PI;l=23.45*Math.sin(d)/180*Math.PI;m=a/180*Math.PI;a=Math.asin(Math.sin(l)*Math.sin(m)+Math.cos(l)*Math.cos(m)*Math.cos(c));l=Math.acos((Math.sin(l)*Math.cos(m)-Math.cos(l)*Math.sin(m)*Math.cos(c))/Math.cos(a));0<c&&(l=2*Math.PI-l);return{elevation:a,azimuth:l}};
Sun.prototype.getAngles=function(){return Sun.getAngles(this.lat,this.lng,this.dayOfYear,this.time)};Sun.getPosition=function(a,c,d){void 0===d&&(d=SkyDome.RADIUS);return[d*Math.sin(a)*Math.cos(c),-d*Math.cos(a)*Math.cos(c),d*Math.sin(c)]};Sun.getSunriseTime=function(a,c,d){var l=12,m=0;if(0>Sun.getAngles(a,c,d,l).elevation||0<Sun.getAngles(a,c,d,m).elevation)return null;for(var n=0;10>n;n++){var b=(l+m)/2;0>Sun.getAngles(a,c,d,b).elevation?m=b:l=b}return(l+m)/2};
Sun.prototype.getSunriseTime=function(){return Sun.getSunriseTime(this.lat,this.lng,this.dayOfYear)};Sun.getSunsetTime=function(a,c,d){var l=12,m=24;if(0<Sun.getAngles(a,c,d,m).elevation||0>Sun.getAngles(a,c,d,l).elevation)return null;for(var n=0;10>n;n++){var b=(m+l)/2;0>Sun.getAngles(a,c,d,b).elevation?m=b:l=b}return(m+l)/2};Sun.prototype.getSunsetTime=function(){return Sun.getSunsetTime(this.lat,this.lng,this.dayOfYear)};
Sun.prototype.getPosition=function(){var a=this.getAngles();return Sun.getPosition(a.azimuth,a.elevation,SkyDome.RADIUS-100)};Sun.prototype.buildOrbitGlGeometry=function(){this.orbitVertices&&gl.deleteBuffer(this.orbitVertices);for(var a=[],c=0;24>=c;c+=.1){var d=Sun.getAngles(this.lat,this.lng,this.dayOfYear,c),d=Sun.getPosition(d.azimuth,d.elevation,SkyDome.RADIUS-100);[].push.apply(a,d)}this.numOrbitVertices=a.length/3|0;this.orbitVertices=glu.createArrayBuffer(a)};
Sun.prototype.buildGlGeometry=function(){this.vertices&&gl.deleteBuffer(this.vertices);for(var a=this.getPosition(),c=[],d=0;10>d;d++)for(var l=d/10*2*Math.PI,m=Math.cos(l)*Sun.RADIUS,l=Math.sin(l)*Sun.RADIUS,n=(d+1)/10*2*Math.PI,b=Math.cos(n)*Sun.RADIUS,n=Math.sin(n)*Sun.RADIUS,e=0;10>=e+1;e++){var g=e*Math.PI/20,k=(e+1)*Math.PI/20,p=[m*Math.cos(g),l*Math.cos(g),Sun.RADIUS*Math.sin(g)],g=[b*Math.cos(g),n*Math.cos(g),Sun.RADIUS*Math.sin(g)],u=[b*Math.cos(k),n*Math.cos(k),Sun.RADIUS*Math.sin(k)],k=
[m*Math.cos(k),l*Math.cos(k),Sun.RADIUS*Math.sin(k)],q=[].concat(p,u,g,p,k,u);c.push.apply(c,q);p[2]=-p[2];g[2]=-g[2];u[2]=-u[2];k[2]=-k[2];q=[].concat(p,g,u,p,u,k);c.push.apply(c,q)}for(d=0;d<c.length;d+=3)c[d]+=a[0],c[d+1]+=a[1],c[d+2]+=a[2];this.numVertices=c.length/3;this.vertices=glu.createArrayBuffer(c);this.buildOrbitGlGeometry()};
Sun.prototype.render=function(a,c){if(Shaders.ready){gl.useProgram(Shaders.flat);glu.enableVertexAttribArrays(Shaders.flat);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertices);gl.vertexAttribPointer(Shaders.flat.locations.vertexPosition,3,gl.FLOAT,!1,0,0);var d=mat4.create();mat4.mul(d,c,a);gl.uniformMatrix4fv(Shaders.flat.locations.modelViewProjectionMatrix,!1,d);gl.uniform4fv(Shaders.flat.locations.color,[1,1,.9,1]);gl.drawArrays(gl.TRIANGLES,0,this.numVertices);gl.useProgram(Shaders.flat);gl.bindBuffer(gl.ARRAY_BUFFER,
this.orbitVertices);gl.vertexAttribPointer(Shaders.flat.locations.vertexPosition,3,gl.FLOAT,!1,0,0);gl.uniformMatrix4fv(Shaders.flat.locations.modelViewProjectionMatrix,!1,d);gl.uniform4fv(Shaders.flat.locations.color,[.6,.2,.2,1]);gl.drawArrays(gl.LINES,0,this.numOrbitVertices);glu.disableVertexAttribArrays(Shaders.flat)}};Sun.RADIUS=100;function Tile(a,c,d,l){this.level=d;this.x=a;this.y=c;this.texId=null;this.mapLayer=l;a=new Image;a.tile=this;a.crossOrigin="anonymous";a.onload=this.onImageLoaded;c=["a","b","c"];l=Math.floor(Math.random()*c.length);a.src=Tile.basePath.replace("{s}",c[l])+d+"/"+this.x+"/"+this.y+"."+Tile.fileExtension;this.image=a;this.updateGeometry(Controller.position)}
Tile.prototype.updateGeometry=function(a){var c=long2tile(a.lng,this.level),d=lat2tile(a.lat,this.level),l=Helpers.getEarthCircumference()*Math.cos(a.lat/180*Math.PI)/Math.pow(2,this.level);a=(this.x-c)*l;var c=(this.x-c+1)*l,m=(this.y-d)*l,d=(this.y-d+1)*l,l=[a,m,0],n=[c,d,0];a=[].concat(l,[a,d,0],n,l,n,[c,m,0]);this.vertices&&gl.deleteBuffer(this.vertices);this.texCoords&&gl.deleteBuffer(this.texCoords);this.vertices=glu.createArrayBuffer(a);this.texCoords=glu.createArrayBuffer([0,0,0,1,1,1,0,0,
1,1,1,0])};Tile.prototype.free=function(){gl.deleteBuffer(this.vertices);gl.deleteBuffer(this.texCoords);gl.deleteTexture(this.texId)};
Tile.prototype.render=function(a,c){if(null!==this.texId&&Shaders.ready){gl.useProgram(Shaders.textured);glu.enableVertexAttribArrays(Shaders.textured);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertices);gl.vertexAttribPointer(Shaders.textured.locations.vertexPosition,3,gl.FLOAT,!1,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,this.texCoords);gl.vertexAttribPointer(Shaders.textured.locations.vertexTexCoords,2,gl.FLOAT,!1,0,0);gl.uniform1i(Shaders.textured.locations.tex,0);var d=mat4.create();mat4.multiply(d,c,a);gl.uniformMatrix4fv(Shaders.textured.locations.modelViewProjectionMatrix,
!1,d);gl.enable(gl.POLYGON_OFFSET_FILL);gl.activeTexture(gl.TEXTURE0);gl.polygonOffset(MapLayer.MAX_ZOOM-this.level+1,MapLayer.MAX_ZOOM-this.level+1);gl.bindTexture(gl.TEXTURE_2D,this.texId);gl.drawArrays(gl.TRIANGLES,0,6);gl.disable(gl.POLYGON_OFFSET_FILL);glu.disableVertexAttribArrays(Shaders.textured)}};Tile.prototype.onImageLoaded=function(a){a=this.tile;a.texId=glu.createTexture(this);delete a.image;if(a.mapLayer.onProgress)a.mapLayer.onProgress()};Tile.basePath="https://{s}.tile.openstreetmap.org/";
Tile.fileExtension="png";var VicinityMap={init:function(a,c,d){VicinityMap.map||(VicinityMap.map=L.map(a,{keyboard:!1}),VicinityMap.map.on("click",VicinityMap.onMapClick),VicinityMap.map.on("zoomend",VicinityMap.renderFrustum),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"OpenStreetMap",maxZoom:19,minZoom:0,tileSize:256}).addTo(VicinityMap.map),L.control.scale({imperial:!1,position:"topright"}).addTo(VicinityMap.map));VicinityMap.map.setView([c,d],18)},updatePositionMarker:function(a){VicinityMap.map&&
(VicinityMap.positionMarker&&VicinityMap.map.removeLayer(VicinityMap.positionMarker),VicinityMap.positionMarker=L.marker(a),VicinityMap.positionMarker.addTo(VicinityMap.map))},renderFrustum:function(){if(VicinityMap.map){VicinityMap.frustum&&(VicinityMap.map.removeLayer(VicinityMap.frustum),VicinityMap.frustum=null);var a=Controller.getEffectivePosition(),c=Math.cos(a.lat/180*Math.PI),d=Controller.viewAngleYaw/180*Math.PI,l=[Math.sin(d),Math.cos(d)],m=.5*fieldOfView/webGlCanvas.height*webGlCanvas.width;
60<m&&(m=60);m=m/180*Math.PI;d=[Math.cos(m)*l[0]-Math.sin(m)*l[1],Math.sin(m)*l[0]+Math.cos(m)*l[1]];l=[Math.cos(-m)*l[0]-Math.sin(-m)*l[1],Math.sin(-m)*l[0]+Math.cos(-m)*l[1]];m=2E3*Math.pow(.5,VicinityMap.map.getZoom());VicinityMap.frustum=L.polygon([a,{lat:a.lat+d[1]*m*c,lng:a.lng+d[0]*m},{lat:a.lat+l[1]*m*c,lng:a.lng+l[0]*m},a],{color:"red",noClip:"true",fillColor:"white",fillOpacity:.4}).addTo(VicinityMap.map)}},onChangeSize:function(){VicinityMap.map&&VicinityMap.map.invalidateSize(!1)}};function FullScreenButton(a,c){this.config=c;this.config.element=a;this.isFullScreen=!1;a.className="toolButton";a.src=c.icon;a.addEventListener("click",this.onToggleFullScreen.bind(this),!1);document.addEventListener("fullscreenchange",this.onFullScreenToogled.bind(this),!1);document.addEventListener("mozfullscreenchange",this.onFullScreenToogled.bind(this),!1);document.addEventListener("webkitfullscreenchange",this.onFullScreenToogled.bind(this),!1);document.addEventListener("MSFullscreenChange",
this.onFullScreenToogled.bind(this),!1)}FullScreenButton.prototype.getFullScreenElement=function(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement};FullScreenButton.prototype.requestFullScreenMode=function(a){var c=a.requestFullscreen||a.msRequestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen;c&&c.bind(a)()};
FullScreenButton.prototype.exitFullScreenMode=function(a){(a=document.cancelFullScreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen)&&a.bind(document)()};FullScreenButton.prototype.onToggleFullScreen=function(){this.isFullScreen?this.exitFullScreenMode(this.config.target):this.requestFullScreenMode(this.config.target)};
FullScreenButton.prototype.onFullScreenToogled=function(){console.log("fullscreen toggled");this.isFullScreen=this.getFullScreenElement()===this.config.target;this.config.element.src=this.isFullScreen?this.config.returnIcon:this.config.icon};
function WindowToolBar(a,c){this.element=a;this.config=c;for(var d in c.windows){var l=document.createElement("SPAN");l.style.marginLeft="5px";a.appendChild(l);l=c.windows[d];l.img=new Image;l.img.className="toolButton";l.img.src=l.icon;l.img.addEventListener("click",this.createOnClickFunction(l.img));l.tabVisible=!1;a.appendChild(l.img);l.target.style.display="none"}}
WindowToolBar.prototype.getActiveWindow=function(){for(var a in this.config.windows)if(this.config.windows[a].tabVisible)return this.config.windows[a];return null};WindowToolBar.prototype.createOnClickFunction=function(a){var c=this;return function(d){c.onButtonClicked(c,a,d)}};
WindowToolBar.prototype.onButtonClicked=function(a,c,d){a=null;for(var l in this.config.windows)d=this.config.windows[l],c!=d.img||d.tabVisible||(a=d);for(l in this.config.windows)d=this.config.windows[l],d.img.className="toolButton",d.target.style.display="none",d.tabVisible=!1;if(a&&(a.img.className="toolButtonClicked",a.target.style.display="",a.tabVisible=!0,a.onShow))a.onShow();onResize()};
